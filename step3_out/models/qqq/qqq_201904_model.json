{"fold_id":"qqq_201904","symbol":"QQQ","test_start_utc":"2019-04-01 00:00:00+00:00","test_end_utc":"2019-05-01 00:00:00+00:00","n_train":388,"n_test":14,"n_trades_test":6,"policy_score_test":48.38946055,"best_params":{"mix_struct_weight":0.55,"p_cut":0.5,"agg_p_cut":0.64,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00208102,"agg_ev_cut":-0.00188102,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.5,"agg_p_cut":0.64,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00208102,"agg_ev_cut":-0.00188102,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00645869,"b_sl":0.00483414,"beta_proxy":1.12768994,"cost_rt":0.00075723,"dist_to_hi":-0.00377984,"ema_fast_slope":0.0004075,"entry_overnight":0.0,"gap_mu":0.00066047,"gap_sd":0.00449303,"gap_tail":4.0,"hold_bars":7.0,"intraday_tail_frac":0.06,"pullback_z":0.66089996,"range_ratio":0.0026678,"regime_agree":1.0,"ret_spread":0.0001411,"rs_log":-0.55544101,"same_bar_ambiguous":0.0,"sigma":0.00244415,"sigma_prank":0.324,"slip_half":0.00020862,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00023719,"spy_pullback_z":0.56211627,"spy_range_ratio":0.00204479,"spy_sigma":0.0018031,"spy_trend_score":1.84009537,"spy_u_atr":0.00245555,"spy_vol_z":-0.41652962,"touch_delay_bars":7.0,"tp_to_cost":8.31796381,"trend_score":2.21646767,"truncated_horizon":0.0,"u_atr":0.00321076,"u_atr_prank":0.33467742,"vol_z":-0.29809843},"mu":[11.88484848,0.00717214,0.00536889,1.16138971,0.00080436,-0.00595497,0.00041336,0.05757576,0.00053706,0.00496758,5.75151515,7.3969697,0.06206203,0.57561516,0.00315834,0.86363636,0.00010803,-0.56286135,0.0030303,0.00268907,0.37679946,0.00023218,0.00012,0.0,0.00027409,0.49007907,0.00238979,0.00206967,2.01690273,0.00275005,-0.32624927,7.21818182,8.81617718,2.436806,0.0,0.00356564,0.37187936,-0.29135177],"sd":[0.46587891,0.00297124,0.00222011,0.14909262,0.00016559,0.00782177,0.00080309,0.23293946,0.00038228,0.00162684,4.58509583,3.92389609,0.01181387,1.05913976,0.00191167,0.34317429,0.00120236,0.06450839,0.05496472,0.0010128,0.2782091,8.28e-05,0.0,1.0,0.00062532,1.02141548,0.0016418,0.00089771,1.75920221,0.00132011,0.8671017,3.68629358,2.7744879,1.55077324,1.0,0.00147087,0.260571,0.90412586],"beta":[0.51212121,-0.00872841,-0.01714927,-0.02489867,0.03627498,-0.0062925,-0.05216883,0.0953386,0.00872841,0.01635184,0.00469862,-0.00429174,0.07927074,0.02662875,-0.05789829,-0.10935675,0.01066768,0.0295571,-0.00437979,-0.02440078,-0.04291823,0.07168283,-0.0062925,0.0,0.0,-0.04075423,-0.00382799,0.07891678,-0.04604902,0.05658032,0.14612876,0.05581637,0.04198544,-0.03639627,-0.02954462,0.0,-0.04052091,-0.04057584,0.00386373],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00645869,"b_sl":0.00483414,"beta_proxy":1.12768994,"cost_rt":0.00075723,"dist_to_hi":-0.00377984,"ema_fast_slope":0.0004075,"entry_overnight":0.0,"gap_mu":0.00066047,"gap_sd":0.00449303,"gap_tail":4.0,"hold_bars":7.0,"intraday_tail_frac":0.06,"pullback_z":0.66089996,"range_ratio":0.0026678,"regime_agree":1.0,"ret_spread":0.0001411,"rs_log":-0.55544101,"same_bar_ambiguous":0.0,"sigma":0.00244415,"sigma_prank":0.324,"slip_half":0.00020862,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00023719,"spy_pullback_z":0.56211627,"spy_range_ratio":0.00204479,"spy_sigma":0.0018031,"spy_trend_score":1.84009537,"spy_u_atr":0.00245555,"spy_vol_z":-0.41652962,"touch_delay_bars":7.0,"tp_to_cost":8.31796381,"trend_score":2.21646767,"truncated_horizon":0.0,"u_atr":0.00321076,"u_atr_prank":0.33467742,"vol_z":-0.29809843},"mu":[11.88484848,0.00717214,0.00536889,1.16138971,0.00080436,-0.00595497,0.00041336,0.05757576,0.00053706,0.00496758,5.75151515,7.3969697,0.06206203,0.57561516,0.00315834,0.86363636,0.00010803,-0.56286135,0.0030303,0.00268907,0.37679946,0.00023218,0.00012,0.0,0.00027409,0.49007907,0.00238979,0.00206967,2.01690273,0.00275005,-0.32624927,7.21818182,8.81617718,2.436806,0.0,0.00356564,0.37187936,-0.29135177],"sd":[0.46587891,0.00297124,0.00222011,0.14909262,0.00016559,0.00782177,0.00080309,0.23293946,0.00038228,0.00162684,4.58509583,3.92389609,0.01181387,1.05913976,0.00191167,0.34317429,0.00120236,0.06450839,0.05496472,0.0010128,0.2782091,8.28e-05,0.0,1.0,0.00062532,1.02141548,0.0016418,0.00089771,1.75920221,0.00132011,0.8671017,3.68629358,2.7744879,1.55077324,1.0,0.00147087,0.260571,0.90412586],"beta":[-7.298e-05,-0.00022897,-1.349e-05,-0.00020766,8.306e-05,-0.00037623,-0.00135633,0.00161405,0.00022897,-0.00027431,-8.446e-05,0.00055355,0.00039307,0.0001327,-0.00057536,-0.00234563,0.00020481,0.00047262,-0.000404,-0.00012289,0.0002234,0.00068575,-0.00037623,0.0,0.0,-0.00038913,-0.00045721,0.00117304,-0.00090208,0.0007235,0.00142023,0.00097743,0.00096763,0.0003826,-0.00049096,0.0,-0.00059963,-0.00046375,-1.093e-05],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_201904_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_201904_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_201904_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_201904_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.22673005,0.27564962,0.30364211,0.51730427,0.52187615,0.78858973,0.82011061,0.84241142],"y_thresholds":[0.0,0.0,0.38095238,0.38095238,0.62068966,0.62068966,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.1547619,0.15689655,0.16093346,0.17846566,0.99987],"y_thresholds":[0.4,0.44444444,0.44444444,0.5,0.5]},"uncertainty_calibration":{"u_q25":0.01326769,"u_q75":0.02354421},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":2.15496057,"policy_score":2.33632208,"brier":0.22527953,"rmse":0.00620094,"n_val":55},{"cfg_name":"tree_heavy","inner_split":2,"score":21.14858052,"policy_score":21.3468043,"brier":0.24486349,"rmse":0.00728809,"n_val":55},{"cfg_name":"tree_stable","inner_split":1,"score":9.8534273,"policy_score":10.0384881,"brier":0.23105509,"rmse":0.00588475,"n_val":55},{"cfg_name":"tree_stable","inner_split":2,"score":42.38419084,"policy_score":42.57913311,"brier":0.23986771,"rmse":0.00752075,"n_val":55},{"cfg_name":"blend_conservative","inner_split":1,"score":1.41288686,"policy_score":1.60855151,"brier":0.24519697,"rmse":0.00588346,"n_val":55},{"cfg_name":"blend_conservative","inner_split":2,"score":15.5035086,"policy_score":15.70479777,"brier":0.248945,"rmse":0.00729021,"n_val":55},{"selected_cfg":"tree_stable","nested_score":26.11880907}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.40509047,"max_abs_z":1.59533716,"top_shift_features":[{"feature":"rs_log","abs_z":1.59533716},{"feature":"gap_sd","abs_z":1.53180397},{"feature":"intraday_tail_frac","abs_z":0.8836098},{"feature":"sigma_prank","abs_z":0.79693465},{"feature":"u_atr_prank","abs_z":0.5995027}]},"performance_drift":{"mean_abs_z":0.40509047,"recent_median_net_bps":18.75923589,"recent_median_calmar":-10.092522}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","spy_sigma","spy_u_atr","spy_trend_score","spy_pullback_z","spy_range_ratio","spy_ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.51212121,"global_ev":-7.298e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":37,"win_rate_raw":0.51351351,"ev_raw":0.00086712,"win_rate_shrunk":0.51244933,"ev_shrunk":0.00014857,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":84,"win_rate_raw":0.44047619,"ev_raw":-0.0005056,"win_rate_shrunk":0.48262032,"ev_shrunk":-0.00025112,"ev_half_a":-0.0009265,"ev_half_b":0.00038297,"consistency":0.16815805,"prob_delta":-0.00496081,"ev_delta":-4.223e-05},{"cluster":2,"n":83,"win_rate_raw":0.5060241,"ev_raw":-0.00074767,"win_rate_shrunk":0.5096283,"ev_shrunk":-0.00034884,"ev_half_a":5.644e-05,"ev_half_b":-0.00111445,"consistency":0.17681901,"prob_delta":-0.00044079,"ev_delta":-6.168e-05},{"cluster":3,"n":59,"win_rate_raw":0.59322034,"ev_raw":0.00036585,"win_rate_shrunk":0.53885221,"ev_shrunk":7.166e-05,"ev_half_a":-0.00070706,"ev_half_b":0.00110155,"consistency":0.13696163,"prob_delta":0.00366112,"ev_delta":9.81e-06},{"cluster":4,"n":36,"win_rate_raw":0.47222222,"ev_raw":-0.00098249,"win_rate_shrunk":0.50291375,"ev_shrunk":-0.00028287,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":5,"n":31,"win_rate_raw":0.61290323,"ev_raw":0.00200464,"win_rate_shrunk":0.53281156,"ev_shrunk":0.00035355,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}