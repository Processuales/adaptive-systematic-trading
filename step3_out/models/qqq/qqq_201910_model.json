{"fold_id":"qqq_201910","symbol":"QQQ","test_start_utc":"2019-10-01 00:00:00+00:00","test_end_utc":"2019-11-01 00:00:00+00:00","n_train":443,"n_test":13,"n_trades_test":5,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.00083551,"agg_ev_cut":-0.00063551,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.00083551,"agg_ev_cut":-0.00063551,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00687921,"b_sl":0.00512935,"beta_proxy":1.14812844,"cost_rt":0.00077001,"dist_to_hi":-0.00408719,"ema_fast_slope":0.00042616,"entry_overnight":0.0,"gap_mu":0.00061629,"gap_sd":0.00530254,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65740098,"range_ratio":0.00279387,"regime_agree":1.0,"ret_spread":0.00013459,"rs_log":-0.54290512,"same_bar_ambiguous":0.0,"sigma":0.00263498,"sigma_prank":0.318,"slip_half":0.000215,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00025176,"spy_pullback_z":0.57903209,"spy_range_ratio":0.00216321,"spy_sigma":0.00190906,"spy_trend_score":1.93560461,"spy_u_atr":0.00252107,"spy_vol_z":-0.43363001,"touch_delay_bars":6.0,"tp_to_cost":8.72789101,"trend_score":2.12403039,"truncated_horizon":0.0,"u_atr":0.00341957,"u_atr_prank":0.312,"vol_z":-0.34230055},"mu":[11.8938992,0.00765747,0.0057329,1.17054793,0.00082183,-0.00686012,0.00042798,0.0530504,0.00048501,0.00535579,6.28647215,7.28647215,0.06279965,0.56046202,0.00339881,0.87267905,9.851e-05,-0.55160066,0.00265252,0.00289999,0.36875284,0.00024091,0.00012,0.0,0.00029612,0.4992134,0.00255439,0.00221951,2.03946345,0.00292292,-0.34382301,7.11405836,9.14814339,2.37030684,0.0,0.00380833,0.36126798,-0.30411158],"sd":[0.44826801,0.00332521,0.00248376,0.14392286,0.00017497,0.00989128,0.00089162,0.22413401,0.00038801,0.00186969,4.55530734,3.92876254,0.01208178,1.05578005,0.00211732,0.33333216,0.00123662,0.06743399,0.05143427,0.00125252,0.2806877,8.749e-05,0.0,1.0,0.00068394,1.02976487,0.00178228,0.00105957,1.71564776,0.00143208,0.86097854,3.69460697,2.81460736,1.51053376,1.0,0.00164424,0.26344311,0.89927543],"beta":[0.50397878,-0.00476904,-0.0718724,-0.07131567,0.01958231,0.00563225,-0.04909904,0.07670472,0.00476904,-0.01175277,0.01182768,0.05060005,0.10022851,0.00850059,-0.05126465,-0.09858746,0.00867876,0.03352571,-0.02168714,-0.02089405,0.01737958,0.0506592,0.00563225,0.0,0.0,-0.01941371,-0.01607695,0.07907415,-0.08945774,0.04486942,0.21718523,0.06711789,0.03720964,-0.01308818,-0.02473469,0.0,-0.07010633,-0.03432537,-0.01885281],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00687921,"b_sl":0.00512935,"beta_proxy":1.14812844,"cost_rt":0.00077001,"dist_to_hi":-0.00408719,"ema_fast_slope":0.00042616,"entry_overnight":0.0,"gap_mu":0.00061629,"gap_sd":0.00530254,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65740098,"range_ratio":0.00279387,"regime_agree":1.0,"ret_spread":0.00013459,"rs_log":-0.54290512,"same_bar_ambiguous":0.0,"sigma":0.00263498,"sigma_prank":0.318,"slip_half":0.000215,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00025176,"spy_pullback_z":0.57903209,"spy_range_ratio":0.00216321,"spy_sigma":0.00190906,"spy_trend_score":1.93560461,"spy_u_atr":0.00252107,"spy_vol_z":-0.43363001,"touch_delay_bars":6.0,"tp_to_cost":8.72789101,"trend_score":2.12403039,"truncated_horizon":0.0,"u_atr":0.00341957,"u_atr_prank":0.312,"vol_z":-0.34230055},"mu":[11.8938992,0.00765747,0.0057329,1.17054793,0.00082183,-0.00686012,0.00042798,0.0530504,0.00048501,0.00535579,6.28647215,7.28647215,0.06279965,0.56046202,0.00339881,0.87267905,9.851e-05,-0.55160066,0.00265252,0.00289999,0.36875284,0.00024091,0.00012,0.0,0.00029612,0.4992134,0.00255439,0.00221951,2.03946345,0.00292292,-0.34382301,7.11405836,9.14814339,2.37030684,0.0,0.00380833,0.36126798,-0.30411158],"sd":[0.44826801,0.00332521,0.00248376,0.14392286,0.00017497,0.00989128,0.00089162,0.22413401,0.00038801,0.00186969,4.55530734,3.92876254,0.01208178,1.05578005,0.00211732,0.33333216,0.00123662,0.06743399,0.05143427,0.00125252,0.2806877,8.749e-05,0.0,1.0,0.00068394,1.02976487,0.00178228,0.00105957,1.71564776,0.00143208,0.86097854,3.69460697,2.81460736,1.51053376,1.0,0.00164424,0.26344311,0.89927543],"beta":[-0.00028795,-0.00014402,-0.00131595,-0.0013899,-4.238e-05,-3.026e-05,-0.00129596,0.00142619,0.00014402,-0.00026471,-9.563e-05,0.00105294,0.00039705,-0.00012621,-0.00063839,-0.00196115,9.636e-05,0.00044811,-0.00067343,-0.00012863,0.00096343,0.00060265,-3.026e-05,0.0,0.0,0.00057478,-0.00098235,0.00127479,-0.00125656,0.00040677,0.00227907,0.00081495,0.00125128,0.00142384,-0.00047202,0.0,-0.00153782,-0.00070065,1.425e-05],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_201910_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_201910_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_201910_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_201910_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.15980823,0.1845939,0.18544151,0.52258604,0.54584,0.89292559],"y_thresholds":[0.0,0.0,0.45714286,0.45714286,0.65517241,0.65517241]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.05571429,0.17048125,0.18640232,0.30117463,0.30916195,0.40627745,0.40683792,0.74754126],"y_thresholds":[0.27272727,0.27272727,0.43478261,0.43478261,0.66666667,0.66666667,0.72727273,0.72727273]},"uncertainty_calibration":{"u_q25":0.01269474,"u_q75":0.01917967},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":10.93560204,"policy_score":11.12660889,"brier":0.23709031,"rmse":0.00659456,"n_val":63},{"cfg_name":"tree_heavy","inner_split":2,"score":15.6162348,"policy_score":15.8114153,"brier":0.23705181,"rmse":0.00869582,"n_val":63},{"cfg_name":"tree_stable","inner_split":1,"score":9.93893172,"policy_score":10.13308106,"brier":0.2410005,"rmse":0.00669948,"n_val":63},{"cfg_name":"tree_stable","inner_split":2,"score":4.75815855,"policy_score":4.9625818,"brier":0.24812357,"rmse":0.00916529,"n_val":63},{"cfg_name":"blend_conservative","inner_split":1,"score":2.79008156,"policy_score":2.99649126,"brier":0.25730644,"rmse":0.00671493,"n_val":63},{"cfg_name":"blend_conservative","inner_split":2,"score":3.30748137,"policy_score":3.51697891,"brier":0.25563215,"rmse":0.00888671,"n_val":63},{"selected_cfg":"tree_heavy","nested_score":13.27591842}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.24832608,"max_abs_z":1.36598727,"top_shift_features":[{"feature":"rs_log","abs_z":1.36598727},{"feature":"intraday_tail_frac","abs_z":1.22493954},{"feature":"gap_sd","abs_z":0.88389794},{"feature":"gap_mu","abs_z":0.65344071},{"feature":"vol_z","abs_z":0.39191119}]},"performance_drift":{"mean_abs_z":0.24832608,"recent_median_net_bps":30.44515535,"recent_median_calmar":10.85763517}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","spy_sigma","spy_u_atr","spy_trend_score","spy_pullback_z","spy_range_ratio","spy_ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.50397878,"global_ev":-0.00028795,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":31,"win_rate_raw":0.48387097,"ev_raw":-0.00069587,"win_rate_shrunk":0.49985069,"ev_shrunk":-0.00037169,"ev_half_a":-0.00302842,"ev_half_b":0.00122505,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":1,"n":91,"win_rate_raw":0.42857143,"ev_raw":-0.00067185,"win_rate_shrunk":0.47145713,"ev_shrunk":-0.00045352,"ev_half_a":-0.00083086,"ev_half_b":-0.00034855,"consistency":0.87942234,"prob_delta":-0.02860027,"ev_delta":-0.00039883},{"cluster":2,"n":74,"win_rate_raw":0.56756757,"ev_raw":0.00036742,"win_rate_shrunk":0.5282343,"ev_shrunk":-3.796e-05,"ev_half_a":0.00066581,"ev_half_b":0.00016397,"consistency":0.87454062,"prob_delta":0.02121243,"ev_delta":-3.32e-05},{"cluster":3,"n":39,"win_rate_raw":0.51282051,"ev_raw":-0.00059631,"win_rate_shrunk":0.50614751,"ev_shrunk":-0.00036358,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":97,"win_rate_raw":0.54639175,"ev_raw":-0.00026642,"win_rate_shrunk":0.52293757,"ev_shrunk":-0.00027832,"ev_half_a":0.00056893,"ev_half_b":-0.0009316,"consistency":0.15621704,"prob_delta":0.00296169,"ev_delta":-4.348e-05},{"cluster":5,"n":45,"win_rate_raw":0.46666667,"ev_raw":-8.745e-05,"win_rate_shrunk":0.49380275,"ev_shrunk":-0.00023326,"ev_half_a":0.0022378,"ev_half_b":-0.00473794,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}