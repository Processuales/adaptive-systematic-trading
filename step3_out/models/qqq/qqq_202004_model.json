{"fold_id":"qqq_202004","symbol":"QQQ","test_start_utc":"2020-04-01 00:00:00+00:00","test_end_utc":"2020-05-01 00:00:00+00:00","n_train":484,"n_test":13,"n_trades_test":6,"policy_score_test":130.44237575,"best_params":{"mix_struct_weight":0.55,"p_cut":0.48,"agg_p_cut":0.61,"safe_size":0.882,"aggressive_size":0.88,"ev_cut":-0.00161418,"agg_ev_cut":-0.00131418,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00161418,"agg_ev_cut":-0.00141418,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00692479,"b_sl":0.00518652,"beta_proxy":1.1449642,"cost_rt":0.00077335,"dist_to_hi":-0.00411713,"ema_fast_slope":0.00041942,"entry_overnight":0.0,"gap_mu":0.00054859,"gap_sd":0.00555241,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65538423,"range_ratio":0.00278438,"regime_agree":1.0,"ret_spread":0.00010073,"rs_log":-0.52854059,"same_bar_ambiguous":0.0,"sigma":0.00265517,"sigma_prank":0.33,"slip_half":0.00021667,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00023765,"spy_pullback_z":0.54635196,"spy_range_ratio":0.00215139,"spy_sigma":0.00191951,"spy_trend_score":1.95776742,"spy_u_atr":0.00252109,"spy_vol_z":-0.41597917,"touch_delay_bars":6.0,"tp_to_cost":8.75751557,"trend_score":2.12168752,"truncated_horizon":0.0,"u_atr":0.00345768,"u_atr_prank":0.325,"vol_z":-0.29953983},"mu":[11.89805825,0.00745453,0.00558131,1.17361126,0.00081787,-0.00681405,0.00042071,0.05097087,0.00043263,0.00558102,6.50970874,7.25970874,0.06320388,0.55804302,0.00330694,0.87864078,5.9e-05,-0.53249726,0.00242718,0.00288019,0.37638854,0.00023894,0.00012,0.0,0.00027942,0.48440388,0.00248357,0.00217656,2.01964936,0.00282123,-0.33568438,7.08495146,8.98091314,2.36175332,0.0,0.00370808,0.36539796,-0.28787808],"sd":[0.43987655,0.0027913,0.00208298,0.14207128,0.00016809,0.00980648,0.0008813,0.21993827,0.0003798,0.00190626,4.36417486,3.9570544,0.01180041,1.07000746,0.0020115,0.32654427,0.00116594,0.07049338,0.04920664,0.0011981,0.28192878,8.405e-05,0.0,1.0,0.00066387,1.04294805,0.00169494,0.00098792,1.6828745,0.00117725,0.87433429,3.71954517,2.13628891,1.49564605,1.0,0.0013767,0.26209548,0.92865552],"beta":[0.51456311,-0.01311453,-0.04050206,-0.04117776,0.01280263,-0.00848937,-0.02543362,0.03703297,0.01311453,-0.02416727,0.03539576,0.06898515,0.09229468,0.01173111,-0.03056479,-0.05737014,0.01020423,0.03019521,-0.0145283,-0.01760813,0.00747363,0.02439776,-0.00848937,0.0,0.0,0.01643277,-0.02760563,0.07106633,-0.0743023,0.03048334,0.14964972,0.05038578,0.04778814,-0.07408506,-0.03094236,0.0,-0.04248627,0.01391012,-0.02473574],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00692479,"b_sl":0.00518652,"beta_proxy":1.1449642,"cost_rt":0.00077335,"dist_to_hi":-0.00411713,"ema_fast_slope":0.00041942,"entry_overnight":0.0,"gap_mu":0.00054859,"gap_sd":0.00555241,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65538423,"range_ratio":0.00278438,"regime_agree":1.0,"ret_spread":0.00010073,"rs_log":-0.52854059,"same_bar_ambiguous":0.0,"sigma":0.00265517,"sigma_prank":0.33,"slip_half":0.00021667,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00023765,"spy_pullback_z":0.54635196,"spy_range_ratio":0.00215139,"spy_sigma":0.00191951,"spy_trend_score":1.95776742,"spy_u_atr":0.00252109,"spy_vol_z":-0.41597917,"touch_delay_bars":6.0,"tp_to_cost":8.75751557,"trend_score":2.12168752,"truncated_horizon":0.0,"u_atr":0.00345768,"u_atr_prank":0.325,"vol_z":-0.29953983},"mu":[11.89805825,0.00745453,0.00558131,1.17361126,0.00081787,-0.00681405,0.00042071,0.05097087,0.00043263,0.00558102,6.50970874,7.25970874,0.06320388,0.55804302,0.00330694,0.87864078,5.9e-05,-0.53249726,0.00242718,0.00288019,0.37638854,0.00023894,0.00012,0.0,0.00027942,0.48440388,0.00248357,0.00217656,2.01964936,0.00282123,-0.33568438,7.08495146,8.98091314,2.36175332,0.0,0.00370808,0.36539796,-0.28787808],"sd":[0.43987655,0.0027913,0.00208298,0.14207128,0.00016809,0.00980648,0.0008813,0.21993827,0.0003798,0.00190626,4.36417486,3.9570544,0.01180041,1.07000746,0.0020115,0.32654427,0.00116594,0.07049338,0.04920664,0.0011981,0.28192878,8.405e-05,0.0,1.0,0.00066387,1.04294805,0.00169494,0.00098792,1.6828745,0.00117725,0.87433429,3.71954517,2.13628891,1.49564605,1.0,0.0013767,0.26209548,0.92865552],"beta":[2.508e-05,-0.00043347,-0.00144956,-0.00152427,0.00012045,-0.00036548,-0.00088292,0.000502,0.00043347,-5.504e-05,0.00085365,0.00077846,8.773e-05,-0.00015993,-0.00050099,-0.00114123,8.568e-05,0.00065637,-0.00034868,-7.02e-05,0.00202944,-0.0002694,-0.00036548,0.0,0.0,0.00106928,-0.00089307,0.00104134,-0.00016936,0.00035026,0.0014917,0.00029582,0.00153715,0.00012445,-0.00058483,0.0,-0.00167348,0.00100384,-0.00014124],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202004_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202004_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202004_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202004_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.16879518,0.18077294,0.19535751,0.21161643,0.22630783,0.34695316,0.35615179,0.65151563,0.65172089,0.86987046],"y_thresholds":[0.0,0.0,0.4,0.4,0.45,0.45,0.6,0.6,0.66666667,0.66666667]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.065,0.10256395,0.11052262,0.46213189,0.46343978,0.71111205],"y_thresholds":[0.375,0.375,0.54545455,0.54545455,0.55,0.55]},"uncertainty_calibration":{"u_q25":0.01130018,"u_q75":0.01544536},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":7.26812457,"policy_score":7.45661989,"brier":0.22860751,"rmse":0.00851984,"n_val":69},{"cfg_name":"tree_heavy","inner_split":2,"score":-1.12130661,"policy_score":-0.87293143,"brier":0.30388371,"rmse":0.01023119,"n_val":69},{"cfg_name":"tree_stable","inner_split":1,"score":6.4805583,"policy_score":6.67943717,"brier":0.24245049,"rmse":0.0085205,"n_val":69},{"cfg_name":"tree_stable","inner_split":2,"score":-1.10561915,"policy_score":-0.8650954,"brier":0.29378296,"rmse":0.01009326,"n_val":69},{"cfg_name":"blend_conservative","inner_split":1,"score":5.75766373,"policy_score":5.95551998,"brier":0.2410168,"rmse":0.00854683,"n_val":69},{"cfg_name":"blend_conservative","inner_split":2,"score":-1.01120573,"policy_score":-0.75683921,"brier":0.31224591,"rmse":0.01009105,"n_val":69},{"selected_cfg":"tree_heavy","nested_score":3.07340898}],"drift":{"flag":true,"feature_drift":{"mean_abs_z":2.11350345,"max_abs_z":7.80847044,"top_shift_features":[{"feature":"gap_sd","abs_z":7.80847044},{"feature":"spy_sigma","abs_z":7.46969223},{"feature":"spy_u_atr","abs_z":6.81660516},{"feature":"sigma","abs_z":5.62048369},{"feature":"u_atr","abs_z":5.35157149}]},"performance_drift":{"mean_abs_z":2.11350345,"recent_median_net_bps":4.33796212,"recent_median_calmar":2.25519206}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","spy_sigma","spy_u_atr","spy_trend_score","spy_pullback_z","spy_range_ratio","spy_ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.51456311,"global_ev":2.508e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":42,"win_rate_raw":0.47619048,"ev_raw":0.00021362,"win_rate_shrunk":0.50461465,"ev_shrunk":7.396e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":1,"n":130,"win_rate_raw":0.47692308,"ev_raw":-0.00063576,"win_rate_shrunk":0.49499029,"ev_shrunk":-0.00031856,"ev_half_a":-0.00067187,"ev_half_b":-0.00033655,"consistency":0.9161687,"prob_delta":-0.017932,"ev_delta":-0.00029185},{"cluster":2,"n":50,"win_rate_raw":0.5,"ev_raw":-0.00016514,"win_rate_shrunk":0.51027984,"ev_shrunk":-3.087e-05,"ev_half_a":0.00067328,"ev_half_b":-0.00049119,"consistency":0.17722039,"prob_delta":-0.00075908,"ev_delta":-5.47e-06},{"cluster":3,"n":88,"win_rate_raw":0.5,"ev_raw":-0.00020008,"win_rate_shrunk":0.50840179,"ev_shrunk":-7.018e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":4,"n":39,"win_rate_raw":0.58974359,"ev_raw":0.00173551,"win_rate_shrunk":0.5330036,"ev_shrunk":0.00044462,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":63,"win_rate_raw":0.6031746,"ev_raw":0.00066967,"win_rate_shrunk":0.5450687,"ev_shrunk":0.00024699,"ev_half_a":0.00091972,"ev_half_b":0.00028959,"consistency":0.8424676,"prob_delta":0.02569998,"ev_delta":0.00020808}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}