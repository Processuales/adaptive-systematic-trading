{"fold_id":"qqq_202106","symbol":"QQQ","test_start_utc":"2021-06-01 00:00:00+00:00","test_end_utc":"2021-07-01 00:00:00+00:00","n_train":488,"n_test":15,"n_trades_test":6,"policy_score_test":95.07389476,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.2,"ev_cut":-0.00056908,"agg_ev_cut":-0.00036908,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.2,"ev_cut":-0.00056908,"agg_ev_cut":-0.00036908,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00825842,"b_sl":0.00619381,"beta_proxy":1.17763913,"cost_rt":0.00082284,"dist_to_hi":-0.00456167,"ema_fast_slope":0.00057664,"entry_overnight":0.0,"gap_mu":0.0006229,"gap_sd":0.0064997,"gap_tail":9.0,"hold_bars":6.0,"intraday_tail_frac":0.065,"pullback_z":0.71298455,"range_ratio":0.00360759,"regime_agree":1.0,"ret_spread":8.09e-05,"rs_log":-0.44910381,"same_bar_ambiguous":0.0,"sigma":0.00315933,"sigma_prank":0.338,"slip_half":0.00024142,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00034149,"spy_pullback_z":0.63165176,"spy_range_ratio":0.00257018,"spy_sigma":0.00223683,"spy_trend_score":2.25328851,"spy_u_atr":0.00289018,"spy_vol_z":-0.3607836,"touch_delay_bars":6.0,"tp_to_cost":9.92116151,"trend_score":2.27084606,"truncated_horizon":0.0,"u_atr":0.00412505,"u_atr_prank":0.38,"vol_z":-0.27240274},"mu":[11.90361446,0.00956809,0.0071644,1.18124294,0.00089084,-0.00871016,0.00049005,0.04819277,0.00044375,0.00864275,9.44819277,7.07228916,0.06577108,0.54852468,0.00441212,0.91807229,1.979e-05,-0.42660504,0.00240964,0.00366742,0.37931566,0.00027542,0.00012,0.0,0.00036592,0.52128249,0.00330658,0.0029073,2.22257351,0.0036933,-0.29777319,6.91084337,10.30783791,2.42820516,0.0,0.0047607,0.39235181,-0.22975449],"sd":[0.42834672,0.00502784,0.00376421,0.15505356,0.00023287,0.01467592,0.00130049,0.21417336,0.00058239,0.00573905,4.86408925,3.96120686,0.011761,1.12668356,0.00328917,0.27425456,0.00147428,0.10181492,0.04902889,0.0020612,0.26970973,0.00011643,0.0,1.0,0.0011863,1.10919806,0.00281978,0.00223152,1.54017874,0.00262309,0.88660788,3.73640546,2.75632912,1.43616835,1.0,0.00250226,0.26545151,0.96051464],"beta":[0.52771084,-0.00596468,-0.01286374,-0.00299514,-0.00647276,0.0072406,0.04094558,-0.01734639,0.00596468,0.03300519,0.14613874,-0.02439987,0.07768396,0.02671819,0.02637591,0.01018823,0.02497434,0.01585495,-0.09111643,-0.0168793,-0.03292208,-0.04310324,0.0072406,0.0,0.0,-0.00963707,0.01271301,0.01726085,-0.05063943,-0.03202156,0.08320365,0.04850256,0.06612455,-0.07163292,-0.02600286,0.0,0.01683609,0.04490193,-0.03898],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00825842,"b_sl":0.00619381,"beta_proxy":1.17763913,"cost_rt":0.00082284,"dist_to_hi":-0.00456167,"ema_fast_slope":0.00057664,"entry_overnight":0.0,"gap_mu":0.0006229,"gap_sd":0.0064997,"gap_tail":9.0,"hold_bars":6.0,"intraday_tail_frac":0.065,"pullback_z":0.71298455,"range_ratio":0.00360759,"regime_agree":1.0,"ret_spread":8.09e-05,"rs_log":-0.44910381,"same_bar_ambiguous":0.0,"sigma":0.00315933,"sigma_prank":0.338,"slip_half":0.00024142,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00034149,"spy_pullback_z":0.63165176,"spy_range_ratio":0.00257018,"spy_sigma":0.00223683,"spy_trend_score":2.25328851,"spy_u_atr":0.00289018,"spy_vol_z":-0.3607836,"touch_delay_bars":6.0,"tp_to_cost":9.92116151,"trend_score":2.27084606,"truncated_horizon":0.0,"u_atr":0.00412505,"u_atr_prank":0.38,"vol_z":-0.27240274},"mu":[11.90361446,0.00956809,0.0071644,1.18124294,0.00089084,-0.00871016,0.00049005,0.04819277,0.00044375,0.00864275,9.44819277,7.07228916,0.06577108,0.54852468,0.00441212,0.91807229,1.979e-05,-0.42660504,0.00240964,0.00366742,0.37931566,0.00027542,0.00012,0.0,0.00036592,0.52128249,0.00330658,0.0029073,2.22257351,0.0036933,-0.29777319,6.91084337,10.30783791,2.42820516,0.0,0.0047607,0.39235181,-0.22975449],"sd":[0.42834672,0.00502784,0.00376421,0.15505356,0.00023287,0.01467592,0.00130049,0.21417336,0.00058239,0.00573905,4.86408925,3.96120686,0.011761,1.12668356,0.00328917,0.27425456,0.00147428,0.10181492,0.04902889,0.0020612,0.26970973,0.00011643,0.0,1.0,0.0011863,1.10919806,0.00281978,0.00223152,1.54017874,0.00262309,0.88660788,3.73640546,2.75632912,1.43616835,1.0,0.00250226,0.26545151,0.96051464],"beta":[0.00052769,-0.00043658,-0.00095708,-0.00095719,-0.00043047,-0.00017974,0.00116087,-0.00147953,0.00043658,0.00023141,0.00183571,-0.00053201,-7e-08,0.0002332,0.00010049,0.00062941,3.198e-05,0.00069558,-0.00059098,-5.1e-05,0.0017933,-0.00038439,-0.00017974,0.0,0.0,0.00117794,0.00018469,0.00038845,0.00082134,-0.00073459,-0.00033679,-0.00021846,0.00209613,-0.00025234,-0.0005911,0.0,-0.00095675,0.00093724,-0.0001876],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202106_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202106_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202106_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202106_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.18525912,0.28609408,0.28754684,0.34977062,0.36501078,0.48714934,0.48734234,0.58539509,0.59487108,0.67525013,0.67759908,0.85739102,0.88613549,0.8940397],"y_thresholds":[0.125,0.125,0.22222222,0.22222222,0.4,0.4,0.41666667,0.41666667,0.625,0.625,0.68965517,0.68965517,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.10833333,0.13,0.13624175,0.36396197,0.37260317,0.8375,0.97423195,0.99987],"y_thresholds":[0.375,0.375,0.47368421,0.47368421,0.52272727,0.52272727,1.0,1.0]},"uncertainty_calibration":{"u_q25":0.01555646,"u_q75":0.02183155},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":0.36168744,"policy_score":0.60197481,"brier":0.29545977,"rmse":0.00934627,"n_val":70},{"cfg_name":"tree_heavy","inner_split":2,"score":3.88398915,"policy_score":4.10508471,"brier":0.26376089,"rmse":0.01163744,"n_val":70},{"cfg_name":"tree_stable","inner_split":1,"score":-0.85695733,"policy_score":-0.59269068,"brier":0.32778382,"rmse":0.00921439,"n_val":70},{"cfg_name":"tree_stable","inner_split":2,"score":1.44530544,"policy_score":1.69143986,"brier":0.29734577,"rmse":0.01156254,"n_val":70},{"cfg_name":"blend_conservative","inner_split":1,"score":0.35989945,"policy_score":0.63762921,"brier":0.34662119,"rmse":0.00888194,"n_val":70},{"cfg_name":"blend_conservative","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.25793717,"rmse":0.01186651,"n_val":70},{"selected_cfg":"tree_heavy","nested_score":2.1228383}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.34719342,"max_abs_z":1.43521402,"top_shift_features":[{"feature":"rs_log","abs_z":1.43521402},{"feature":"sigma_prank","abs_z":0.97488549},{"feature":"gap_tail","abs_z":0.96114739},{"feature":"u_atr_prank","abs_z":0.6982143},{"feature":"cost_rt","abs_z":0.5393928}]},"performance_drift":{"mean_abs_z":0.34719342,"recent_median_net_bps":34.04261882,"recent_median_calmar":29.26225214}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","spy_sigma","spy_u_atr","spy_trend_score","spy_pullback_z","spy_range_ratio","spy_ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.52771084,"global_ev":0.00052769,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":131,"win_rate_raw":0.54961832,"ev_raw":-9.22e-06,"win_rate_shrunk":0.53914463,"ev_shrunk":0.00024747,"ev_half_a":-0.00013693,"ev_half_b":0.00021161,"consistency":0.22821641,"prob_delta":0.00260938,"ev_delta":5.648e-05},{"cluster":1,"n":103,"win_rate_raw":0.55339806,"ev_raw":0.00134487,"win_rate_shrunk":0.53957534,"ev_shrunk":0.00090513,"ev_half_a":0.00065941,"ev_half_b":0.00234043,"consistency":0.57974637,"prob_delta":0.0068784,"ev_delta":0.00052475},{"cluster":2,"n":58,"win_rate_raw":0.51724138,"ev_raw":0.00077627,"win_rate_shrunk":0.52429944,"ev_shrunk":0.00060868,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":3,"n":97,"win_rate_raw":0.46391753,"ev_raw":-0.000175,"win_rate_shrunk":0.49919494,"ev_shrunk":0.00021358,"ev_half_a":-0.00055399,"ev_half_b":0.00038864,"consistency":0.19108566,"prob_delta":-0.00544898,"ev_delta":4.081e-05},{"cluster":4,"n":8,"win_rate_raw":0.625,"ev_raw":0.00532361,"win_rate_shrunk":0.53379142,"ev_shrunk":0.00082743,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":18,"win_rate_raw":0.55555556,"ev_raw":0.00061324,"win_rate_shrunk":0.53134276,"ev_shrunk":0.00053885,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}