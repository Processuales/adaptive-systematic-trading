{"fold_id":"qqq_202111","symbol":"QQQ","test_start_utc":"2021-11-01 00:00:00+00:00","test_end_utc":"2021-12-01 00:00:00+00:00","n_train":496,"n_test":13,"n_trades_test":3,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-5.808e-05,"agg_ev_cut":0.00014192,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-5.808e-05,"agg_ev_cut":0.00014192,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00906399,"b_sl":0.00679066,"beta_proxy":1.1593243,"cost_rt":0.00084743,"dist_to_hi":-0.0050683,"ema_fast_slope":0.00057939,"entry_overnight":0.0,"gap_mu":0.00062785,"gap_sd":0.00751402,"gap_tail":8.0,"hold_bars":6.0,"intraday_tail_frac":0.065,"pullback_z":0.64408863,"range_ratio":0.00389353,"regime_agree":1.0,"ret_spread":6.209e-05,"rs_log":-0.44013611,"same_bar_ambiguous":0.0,"sigma":0.0033951,"sigma_prank":0.335,"slip_half":0.00025371,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00039141,"spy_pullback_z":0.60837844,"spy_range_ratio":0.0028306,"spy_sigma":0.00255597,"spy_trend_score":2.24075374,"spy_u_atr":0.00331147,"spy_vol_z":-0.35254635,"touch_delay_bars":6.0,"tp_to_cost":10.49896138,"trend_score":2.205462,"truncated_horizon":0.0,"u_atr":0.00451372,"u_atr_prank":0.375,"vol_z":-0.22651668},"mu":[11.90047393,0.0103335,0.0077371,1.14942223,0.00092565,-0.00933031,0.00050218,0.04976303,0.00060212,0.00934469,8.87677725,7.07109005,0.06631517,0.51199565,0.00476291,0.92180095,-5.84e-06,-0.38199632,0.0,0.00397449,0.38247867,0.00029282,0.00012,0.0,0.00038474,0.48247809,0.00358758,0.0031772,2.15348959,0.00400584,-0.29509437,6.8957346,10.78868214,2.31925835,0.0,0.0051407,0.38921327,-0.21251455],"sd":[0.43490998,0.00503078,0.00376618,0.14888483,0.0002437,0.01499007,0.00142009,0.21745499,0.00076764,0.00536833,4.97424467,4.00114536,0.01112138,1.16303144,0.00340533,0.26848456,0.00164326,0.12032374,1.0,0.0020719,0.27901731,0.00012185,0.0,1.0,0.00125471,1.13743077,0.00286615,0.0022077,1.46531564,0.00257395,0.8920975,3.75916331,2.7003436,1.35077545,1.0,0.00250354,0.27014714,0.97169336],"beta":[0.52132701,0.00548069,-0.01514822,-0.00818963,-0.01811512,0.02348645,0.04921811,-0.04277585,-0.00548069,0.02970358,0.07301621,-0.00613386,0.06827415,0.02544623,0.05795493,0.01797948,0.01842001,0.0062082,-0.04436086,0.0,-0.0143985,-0.01797197,0.02348645,0.0,0.0,0.02189028,-0.02673601,0.02882117,-0.06986791,-0.01519013,0.05627664,0.02424633,0.08183376,-0.06885667,-0.05458804,0.0,0.00579983,0.00935104,-0.01775505],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00906399,"b_sl":0.00679066,"beta_proxy":1.1593243,"cost_rt":0.00084743,"dist_to_hi":-0.0050683,"ema_fast_slope":0.00057939,"entry_overnight":0.0,"gap_mu":0.00062785,"gap_sd":0.00751402,"gap_tail":8.0,"hold_bars":6.0,"intraday_tail_frac":0.065,"pullback_z":0.64408863,"range_ratio":0.00389353,"regime_agree":1.0,"ret_spread":6.209e-05,"rs_log":-0.44013611,"same_bar_ambiguous":0.0,"sigma":0.0033951,"sigma_prank":0.335,"slip_half":0.00025371,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00039141,"spy_pullback_z":0.60837844,"spy_range_ratio":0.0028306,"spy_sigma":0.00255597,"spy_trend_score":2.24075374,"spy_u_atr":0.00331147,"spy_vol_z":-0.35254635,"touch_delay_bars":6.0,"tp_to_cost":10.49896138,"trend_score":2.205462,"truncated_horizon":0.0,"u_atr":0.00451372,"u_atr_prank":0.375,"vol_z":-0.22651668},"mu":[11.90047393,0.0103335,0.0077371,1.14942223,0.00092565,-0.00933031,0.00050218,0.04976303,0.00060212,0.00934469,8.87677725,7.07109005,0.06631517,0.51199565,0.00476291,0.92180095,-5.84e-06,-0.38199632,0.0,0.00397449,0.38247867,0.00029282,0.00012,0.0,0.00038474,0.48247809,0.00358758,0.0031772,2.15348959,0.00400584,-0.29509437,6.8957346,10.78868214,2.31925835,0.0,0.0051407,0.38921327,-0.21251455],"sd":[0.43490998,0.00503078,0.00376618,0.14888483,0.0002437,0.01499007,0.00142009,0.21745499,0.00076764,0.00536833,4.97424467,4.00114536,0.01112138,1.16303144,0.00340533,0.26848456,0.00164326,0.12032374,1.0,0.0020719,0.27901731,0.00012185,0.0,1.0,0.00125471,1.13743077,0.00286615,0.0022077,1.46531564,0.00257395,0.8920975,3.75916331,2.7003436,1.35077545,1.0,0.00250354,0.27014714,0.97169336],"beta":[0.00066341,-0.00022408,-0.00091339,-0.00089646,-0.00047514,0.00044545,0.00115658,-0.00180805,0.00022408,0.00025956,0.0013872,-0.00050377,8.69e-05,0.00020943,0.00079623,0.00083228,5.663e-05,0.00078068,-0.00040628,0.0,0.00164218,-0.00056347,0.00044545,0.0,0.0,0.00109263,-0.00015835,0.0009744,1.061e-05,-0.00053047,-0.00059873,-0.00092087,0.00228387,-0.00081885,-0.00132325,0.0,-0.00086174,0.00085751,0.00019796],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202111_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202111_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202111_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202111_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.24594901,0.53564761,0.54753999,0.69815226,0.71574048,0.81938908,0.82234773,0.88787243],"y_thresholds":[0.41176471,0.41176471,0.46153846,0.46153846,0.54545455,0.54545455,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.05,0.38384912,0.39049073,0.46470588,0.64987,0.97196131],"y_thresholds":[0.44444444,0.44444444,0.46153846,0.46153846,1.0,1.0]},"uncertainty_calibration":{"u_q25":0.01267908,"u_q75":0.01745059},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.29714523,"max_abs_z":1.47411159,"top_shift_features":[{"feature":"rs_log","abs_z":1.47411159},{"feature":"gap_tail","abs_z":1.14505221},{"feature":"u_atr_prank","abs_z":0.84652448},{"feature":"gap_sd","abs_z":0.83638476},{"feature":"trend_score","abs_z":0.73744452}]},"performance_drift":{"mean_abs_z":0.29714523,"recent_median_net_bps":6.64127595,"recent_median_calmar":3.53294572}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","spy_sigma","spy_u_atr","spy_trend_score","spy_pullback_z","spy_range_ratio","spy_ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.52132701,"global_ev":0.00066341,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":77,"win_rate_raw":0.50649351,"ev_raw":0.00081047,"win_rate_shrunk":0.51552915,"ev_shrunk":0.00072089,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":1,"n":99,"win_rate_raw":0.47474747,"ev_raw":5.118e-05,"win_rate_shrunk":0.50027051,"ev_shrunk":0.00038665,"ev_half_a":-0.00037101,"ev_half_b":0.0008583,"consistency":0.17316837,"prob_delta":-0.00364632,"ev_delta":6.695e-05},{"cluster":2,"n":107,"win_rate_raw":0.52336449,"ev_raw":-0.0001173,"win_rate_shrunk":0.52228741,"ev_shrunk":0.00029541,"ev_half_a":-0.00021493,"ev_half_b":0.00010161,"consistency":0.23021667,"prob_delta":0.0002211,"ev_delta":6.801e-05},{"cluster":3,"n":24,"win_rate_raw":0.54166667,"ev_raw":0.00150115,"win_rate_shrunk":0.52471696,"ev_shrunk":0.00080303,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":13,"win_rate_raw":0.61538462,"ev_raw":0.00220848,"win_rate_shrunk":0.53052061,"ev_shrunk":0.00081443,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":102,"win_rate_raw":0.55882353,"ev_raw":0.00157156,"win_rate_shrunk":0.53855514,"ev_shrunk":0.00108066,"ev_half_a":0.00135231,"ev_half_b":0.00199126,"consistency":0.84026146,"prob_delta":0.01447613,"ev_delta":0.00090804}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}