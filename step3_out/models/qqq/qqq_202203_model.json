{"fold_id":"qqq_202203","symbol":"QQQ","test_start_utc":"2022-03-01 00:00:00+00:00","test_end_utc":"2022-04-01 00:00:00+00:00","n_train":483,"n_test":10,"n_trades_test":4,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-0.00103316,"agg_ev_cut":-0.00083316,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-0.00103316,"agg_ev_cut":-0.00083316,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00936194,"b_sl":0.00701623,"beta_proxy":1.16896279,"cost_rt":0.00086354,"dist_to_hi":-0.0053342,"ema_fast_slope":0.00061304,"entry_overnight":0.0,"gap_mu":0.0006229,"gap_sd":0.00777175,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.07,"pullback_z":0.6333855,"range_ratio":0.0039886,"regime_agree":1.0,"ret_spread":1.43e-05,"rs_log":-0.42821981,"same_bar_ambiguous":0.0,"sigma":0.00348842,"sigma_prank":0.31,"slip_half":0.00026177,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00039423,"spy_pullback_z":0.56484701,"spy_range_ratio":0.00285578,"spy_sigma":0.00261781,"spy_trend_score":2.16379755,"spy_u_atr":0.00341645,"spy_vol_z":-0.43801527,"touch_delay_bars":6.0,"tp_to_cost":10.76077924,"trend_score":2.10069428,"truncated_horizon":0.0,"u_atr":0.00465495,"u_atr_prank":0.328,"vol_z":-0.29513796},"mu":[11.90754258,0.0106557,0.00797933,1.15106575,0.00093175,-0.00952368,0.00051004,0.04622871,0.00063929,0.00981459,8.41849148,7.12895377,0.0677129,0.49741487,0.0049023,0.91727494,-3.945e-05,-0.35318223,0.0,0.00409122,0.35047689,0.00029587,0.00012,0.0,0.00038414,0.43950392,0.00366973,0.00325661,2.10379019,0.00409785,-0.34601951,6.95377129,11.08093103,2.26026854,0.0,0.00530296,0.36272993,-0.27023615],"sd":[0.41996008,0.00493845,0.00369775,0.14793381,0.00023598,0.01495592,0.00143806,0.20998004,0.00080294,0.00512576,5.19123805,4.00369824,0.01043461,1.15017889,0.00340795,0.2754662,0.00169585,0.11929917,1.0,0.00205109,0.27026286,0.00011799,0.0,1.0,0.0012716,1.12392496,0.00286099,0.00219423,1.45177555,0.00255446,0.89071933,3.76503366,2.55465702,1.31449013,1.0,0.00245899,0.25876069,0.97503663],"beta":[0.513382,-5.977e-05,-0.01418327,-0.00577315,-0.0054656,0.03074676,0.05624218,-0.0438233,5.977e-05,0.0127725,0.0599435,-0.03879898,0.04485552,0.03878121,0.05579109,0.00301866,0.01837042,0.00273767,-0.02745318,0.0,-0.00258676,-0.05418314,0.03074676,0.0,0.0,0.02105987,-0.01525216,0.05887172,-0.04778126,-0.05801637,0.00574209,0.01189461,0.09172535,-0.03281897,-0.02895551,0.0,0.01112164,-0.00480054,-0.03036773],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00936194,"b_sl":0.00701623,"beta_proxy":1.16896279,"cost_rt":0.00086354,"dist_to_hi":-0.0053342,"ema_fast_slope":0.00061304,"entry_overnight":0.0,"gap_mu":0.0006229,"gap_sd":0.00777175,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.07,"pullback_z":0.6333855,"range_ratio":0.0039886,"regime_agree":1.0,"ret_spread":1.43e-05,"rs_log":-0.42821981,"same_bar_ambiguous":0.0,"sigma":0.00348842,"sigma_prank":0.31,"slip_half":0.00026177,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00039423,"spy_pullback_z":0.56484701,"spy_range_ratio":0.00285578,"spy_sigma":0.00261781,"spy_trend_score":2.16379755,"spy_u_atr":0.00341645,"spy_vol_z":-0.43801527,"touch_delay_bars":6.0,"tp_to_cost":10.76077924,"trend_score":2.10069428,"truncated_horizon":0.0,"u_atr":0.00465495,"u_atr_prank":0.328,"vol_z":-0.29513796},"mu":[11.90754258,0.0106557,0.00797933,1.15106575,0.00093175,-0.00952368,0.00051004,0.04622871,0.00063929,0.00981459,8.41849148,7.12895377,0.0677129,0.49741487,0.0049023,0.91727494,-3.945e-05,-0.35318223,0.0,0.00409122,0.35047689,0.00029587,0.00012,0.0,0.00038414,0.43950392,0.00366973,0.00325661,2.10379019,0.00409785,-0.34601951,6.95377129,11.08093103,2.26026854,0.0,0.00530296,0.36272993,-0.27023615],"sd":[0.41996008,0.00493845,0.00369775,0.14793381,0.00023598,0.01495592,0.00143806,0.20998004,0.00080294,0.00512576,5.19123805,4.00369824,0.01043461,1.15017889,0.00340795,0.2754662,0.00169585,0.11929917,1.0,0.00205109,0.27026286,0.00011799,0.0,1.0,0.0012716,1.12392496,0.00286099,0.00219423,1.45177555,0.00255446,0.89071933,3.76503366,2.55465702,1.31449013,1.0,0.00245899,0.25876069,0.97503663],"beta":[0.00063251,-0.00021255,-0.00104256,-0.00099957,-0.00022893,0.00066541,0.00125306,-0.00163126,0.00021255,5.789e-05,0.00126142,-0.00085458,4.472e-05,0.00045846,0.00096433,0.00096361,8.473e-05,0.0006172,-0.00016326,0.0,0.00148171,-0.00098277,0.00066541,0.0,0.0,0.00098767,-0.0003077,0.00103276,0.00036321,-0.00095965,-0.00091324,-0.00088329,0.00224788,-0.00032301,-0.00113602,0.0,-0.00091244,0.00061589,-5.451e-05],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202203_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202203_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202203_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202203_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.18171524,0.29539291,0.29996229,0.33722806,0.34225723,0.37123411,0.3838039,0.40125,0.41368491,0.84790198,0.87494298],"y_thresholds":[0.0,0.0,0.2,0.2,0.28571429,0.28571429,0.5,0.5,0.53846154,0.53846154,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.05,0.76749896,0.99987],"y_thresholds":[0.0,0.46376812,0.46376812,0.5]},"uncertainty_calibration":{"u_q25":0.0126035,"u_q75":0.01785831},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.57703644,"max_abs_z":1.72361609,"top_shift_features":[{"feature":"tp_to_cost","abs_z":1.72361609},{"feature":"gap_tail","abs_z":1.50421034},{"feature":"a_tp","abs_z":1.434012},{"feature":"b_sl","abs_z":1.42869154},{"feature":"u_atr","abs_z":1.41654322}]},"performance_drift":{"mean_abs_z":0.57703644,"recent_median_net_bps":6.64127595,"recent_median_calmar":2.58854578}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","spy_sigma","spy_u_atr","spy_trend_score","spy_pullback_z","spy_range_ratio","spy_ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.513382,"global_ev":0.00063251,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":65,"win_rate_raw":0.52307692,"ev_raw":0.0011076,"win_rate_shrunk":0.51678832,"ev_shrunk":0.00079943,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":24,"win_rate_raw":0.54166667,"ev_raw":0.00150115,"win_rate_shrunk":0.51809611,"ev_shrunk":0.00077728,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":2,"n":100,"win_rate_raw":0.45,"ev_raw":-0.00032359,"win_rate_shrunk":0.484572,"ev_shrunk":0.00019792,"ev_half_a":-0.00091671,"ev_half_b":0.00088062,"consistency":0.13766684,"prob_delta":-0.00396618,"ev_delta":2.725e-05},{"cluster":3,"n":13,"win_rate_raw":0.61538462,"ev_raw":0.00220848,"win_rate_shrunk":0.52335218,"ev_shrunk":0.00078655,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":109,"win_rate_raw":0.52293578,"ev_raw":-0.00023097,"win_rate_shrunk":0.51792943,"ev_shrunk":0.00022151,"ev_half_a":-0.00026219,"ev_half_b":-0.00016209,"consistency":0.97497504,"prob_delta":0.00443364,"ev_delta":0.00021597},{"cluster":5,"n":100,"win_rate_raw":0.54,"ev_raw":0.00180765,"win_rate_shrunk":0.52548109,"ev_shrunk":0.00116666,"ev_half_a":0.00145706,"ev_half_b":0.00229179,"consistency":0.7913157,"prob_delta":0.0095742,"ev_delta":0.0009232}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}