{"fold_id":"qqq_202212","symbol":"QQQ","test_start_utc":"2022-12-01 00:00:00+00:00","test_end_utc":"2023-01-01 00:00:00+00:00","n_train":463,"n_test":6,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.45739463,"agg_p_cut":0.57869731,"safe_size":0.65903196,"aggressive_size":1.35,"ev_cut":-0.00021365,"agg_ev_cut":1.762e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.00018238,"agg_ev_cut":1.762e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00913164,"b_sl":0.00684873,"beta_proxy":1.14451996,"cost_rt":0.00085991,"dist_to_hi":-0.00479211,"ema_fast_slope":0.00057878,"entry_overnight":0.0,"gap_mu":0.00042231,"gap_sd":0.00802312,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.07,"pullback_z":0.72373873,"range_ratio":0.00389353,"regime_agree":1.0,"ret_spread":-4.05e-05,"rs_log":-0.25512071,"same_bar_ambiguous":0.0,"sigma":0.00345025,"sigma_prank":0.308,"slip_half":0.00025995,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00039219,"spy_pullback_z":0.59592805,"spy_range_ratio":0.00276001,"spy_sigma":0.00256298,"spy_trend_score":2.27629856,"spy_u_atr":0.00324308,"spy_vol_z":-0.44396188,"touch_delay_bars":6.0,"tp_to_cost":10.5408204,"trend_score":2.3040573,"truncated_horizon":0.0,"u_atr":0.00455059,"u_atr_prank":0.345,"vol_z":-0.29811164},"mu":[11.9035533,0.01052551,0.00788143,1.11590836,0.00092963,-0.00904147,0.00051988,0.04822335,0.0005886,0.01002197,7.32741117,7.05329949,0.06765228,0.51979086,0.00485778,0.94670051,-6.422e-05,-0.30327998,0.0,0.00403993,0.349,0.00029481,0.00012,0.0,0.00040853,0.46927481,0.00360253,0.00323769,2.27540646,0.00402685,-0.36461683,6.88324873,10.95893878,2.3879317,0.0,0.00523735,0.36647716,-0.26896638],"sd":[0.42847571,0.00503107,0.00376783,0.15143313,0.0002465,0.01506991,0.00145015,0.21423786,0.00081755,0.0051447,5.28448643,4.02084692,0.01019522,1.17781546,0.00347577,0.22463004,0.00173256,0.12095761,1.0,0.00210251,0.2690706,0.00012325,0.0,1.0,0.00127702,1.12221034,0.0028999,0.00224052,1.42335479,0.00260725,0.93088491,3.78637332,2.60174134,1.37286151,1.0,0.00250647,0.25694341,1.00530823],"beta":[0.53045685,-0.00716943,0.00740513,0.02341605,0.04397189,0.00039477,0.07932092,-0.04720112,0.00716943,-0.00423893,-0.03088251,0.04874228,0.02424405,0.00054644,0.06998265,0.04391486,-0.00771021,0.01305134,0.01191051,0.0,-0.05337971,0.00775836,0.00039477,0.0,0.0,0.02382487,-0.00494042,0.06165911,-0.06127358,-0.0592908,0.00900882,-0.04348827,0.08527978,-0.03860095,-0.02847045,0.0,0.05553614,-0.02066917,-0.00661287],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00913164,"b_sl":0.00684873,"beta_proxy":1.14451996,"cost_rt":0.00085991,"dist_to_hi":-0.00479211,"ema_fast_slope":0.00057878,"entry_overnight":0.0,"gap_mu":0.00042231,"gap_sd":0.00802312,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.07,"pullback_z":0.72373873,"range_ratio":0.00389353,"regime_agree":1.0,"ret_spread":-4.05e-05,"rs_log":-0.25512071,"same_bar_ambiguous":0.0,"sigma":0.00345025,"sigma_prank":0.308,"slip_half":0.00025995,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00039219,"spy_pullback_z":0.59592805,"spy_range_ratio":0.00276001,"spy_sigma":0.00256298,"spy_trend_score":2.27629856,"spy_u_atr":0.00324308,"spy_vol_z":-0.44396188,"touch_delay_bars":6.0,"tp_to_cost":10.5408204,"trend_score":2.3040573,"truncated_horizon":0.0,"u_atr":0.00455059,"u_atr_prank":0.345,"vol_z":-0.29811164},"mu":[11.9035533,0.01052551,0.00788143,1.11590836,0.00092963,-0.00904147,0.00051988,0.04822335,0.0005886,0.01002197,7.32741117,7.05329949,0.06765228,0.51979086,0.00485778,0.94670051,-6.422e-05,-0.30327998,0.0,0.00403993,0.349,0.00029481,0.00012,0.0,0.00040853,0.46927481,0.00360253,0.00323769,2.27540646,0.00402685,-0.36461683,6.88324873,10.95893878,2.3879317,0.0,0.00523735,0.36647716,-0.26896638],"sd":[0.42847571,0.00503107,0.00376783,0.15143313,0.0002465,0.01506991,0.00145015,0.21423786,0.00081755,0.0051447,5.28448643,4.02084692,0.01019522,1.17781546,0.00347577,0.22463004,0.00173256,0.12095761,1.0,0.00210251,0.2690706,0.00012325,0.0,1.0,0.00127702,1.12221034,0.0028999,0.00224052,1.42335479,0.00260725,0.93088491,3.78637332,2.60174134,1.37286151,1.0,0.00250647,0.25694341,1.00530823],"beta":[0.0009821,-0.00032335,-0.00077937,-0.00065623,0.00056723,0.00011097,0.00158354,-0.00165538,0.00032335,-0.00041624,0.00055227,-0.00042207,-4.788e-05,-0.00016069,0.00128399,0.00147086,-0.00080053,0.00068483,0.00025785,0.0,0.00131032,1.511e-05,0.00011097,0.0,0.0,0.00097324,-0.00026218,0.00139134,0.00045135,-0.00060528,-0.00127879,-0.00191673,0.00182856,-0.00026684,-0.00123837,0.0,-0.00040855,0.00012804,0.00037727],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202212_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202212_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202212_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202212_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.17846175,0.20927939,0.21510043,0.24581844,0.25225796,0.54581777,0.55053648,0.82757398,0.84791204,0.87485563,0.88340258,0.92917809],"y_thresholds":[0.0,0.0,0.25,0.25,0.29166667,0.29166667,0.39285714,0.39285714,0.6,0.6,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.13,0.64987,0.65444763,0.96442233,0.99987],"y_thresholds":[0.3442623,0.3442623,0.5,0.5,1.0]},"uncertainty_calibration":{"u_q25":0.02383501,"u_q75":0.03363513},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":26.34456085,"policy_score":26.55594464,"brier":0.24798405,"rmse":0.01269788,"n_val":66},{"cfg_name":"tree_heavy","inner_split":2,"score":7.7651122,"policy_score":7.96657428,"brier":0.24329906,"rmse":0.0094939,"n_val":66},{"cfg_name":"tree_stable","inner_split":1,"score":20.77169244,"policy_score":20.98627753,"brier":0.25209782,"rmse":0.01275586,"n_val":66},{"cfg_name":"tree_stable","inner_split":2,"score":7.9010365,"policy_score":8.12830577,"brier":0.27795791,"rmse":0.00940042,"n_val":66},{"cfg_name":"blend_conservative","inner_split":1,"score":24.57477971,"policy_score":24.81368632,"brier":0.2830309,"rmse":0.01331672,"n_val":66},{"cfg_name":"blend_conservative","inner_split":2,"score":8.36771189,"policy_score":8.58561939,"brier":0.26594229,"rmse":0.00922539,"n_val":66},{"selected_cfg":"tree_heavy","nested_score":17.05483652}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.67565495,"max_abs_z":1.55790643,"top_shift_features":[{"feature":"slip_half","abs_z":1.55790643},{"feature":"cost_rt","abs_z":1.55790643},{"feature":"a_tp","abs_z":1.50392863},{"feature":"b_sl","abs_z":1.50097294},{"feature":"u_atr","abs_z":1.4931767}]},"performance_drift":{"mean_abs_z":0.67565495,"recent_median_net_bps":3.38963411,"recent_median_calmar":19.47384394}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","spy_sigma","spy_u_atr","spy_trend_score","spy_pullback_z","spy_range_ratio","spy_ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.53045685,"global_ev":0.0009821,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":94,"win_rate_raw":0.58510638,"ev_raw":0.00205899,"win_rate_shrunk":0.55446179,"ev_shrunk":0.00145513,"ev_half_a":0.00204946,"ev_half_b":0.00206812,"consistency":0.99533517,"prob_delta":0.02389295,"ev_delta":0.00144834},{"cluster":1,"n":19,"win_rate_raw":0.57894737,"ev_raw":0.0032768,"win_rate_shrunk":0.53708505,"ev_shrunk":0.00129576,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":2,"n":9,"win_rate_raw":0.66666667,"ev_raw":0.00699231,"win_rate_shrunk":0.53995986,"ev_shrunk":0.00140142,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":50,"win_rate_raw":0.48,"ev_raw":0.00064551,"win_rate_shrunk":0.5156166,"ev_shrunk":0.0008831,"ev_half_a":-0.0012996,"ev_half_b":0.00230245,"consistency":0.02487156,"prob_delta":-0.0003691,"ev_delta":2.196e-05},{"cluster":4,"n":136,"win_rate_raw":0.53676471,"ev_raw":0.000319,"win_rate_shrunk":0.5338079,"ev_shrunk":0.00062983,"ev_half_a":0.00019151,"ev_half_b":0.0004465,"consistency":0.93625051,"prob_delta":0.00313742,"ev_delta":0.00058968},{"cluster":5,"n":86,"win_rate_raw":0.46511628,"ev_raw":-8.66e-05,"win_rate_shrunk":0.50317875,"ev_shrunk":0.00053594,"ev_half_a":0.00020741,"ev_half_b":-0.00044092,"consistency":0.20947984,"prob_delta":-0.00571421,"ev_delta":0.00011227}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}