{"fold_id":"qqq_202312","symbol":"QQQ","test_start_utc":"2023-12-01 00:00:00+00:00","test_end_utc":"2024-01-01 00:00:00+00:00","n_train":456,"n_test":12,"n_trades_test":6,"policy_score_test":24.45820893,"best_params":{"mix_struct_weight":0.55,"p_cut":0.45745273,"agg_p_cut":0.57872636,"safe_size":0.65883055,"aggressive_size":1.35,"ev_cut":-0.00014334,"agg_ev_cut":8.723e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.00011277,"agg_ev_cut":8.723e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.01154352,"b_sl":0.00865764,"beta_proxy":1.1621405,"cost_rt":0.00096252,"dist_to_hi":-0.00638867,"ema_fast_slope":0.00065725,"entry_overnight":0.0,"gap_mu":0.00028731,"gap_sd":0.00972419,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.07,"pullback_z":0.76634188,"range_ratio":0.0047211,"regime_agree":1.0,"ret_spread":0.00017704,"rs_log":-0.22643751,"same_bar_ambiguous":0.0,"sigma":0.00438532,"sigma_prank":0.34,"slip_half":0.00031126,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00042412,"spy_pullback_z":0.58399361,"spy_range_ratio":0.00331051,"spy_sigma":0.00327486,"spy_trend_score":2.14590461,"spy_u_atr":0.0040842,"spy_vol_z":-0.44396188,"touch_delay_bars":6.0,"tp_to_cost":11.91947922,"trend_score":2.13905618,"truncated_horizon":0.0,"u_atr":0.00576409,"u_atr_prank":0.369,"vol_z":-0.21533606},"mu":[11.85051546,0.01263194,0.00945016,1.12516885,0.00102505,-0.0121329,0.00061056,0.07474227,0.00032132,0.01077021,8.04381443,7.14175258,0.06815722,0.50451092,0.00570007,0.94072165,5.955e-05,-0.24738264,0.00257732,0.00478919,0.3807268,0.00034253,0.00012,0.0,0.00046179,0.44632272,0.00420953,0.00377466,2.18667211,0.00473152,-0.31722313,6.97938144,11.99117471,2.30332904,0.0,0.00626838,0.39528351,-0.23264652],"sd":[0.52595004,0.00558299,0.00417546,0.15752211,0.00029918,0.01800929,0.00169536,0.26297502,0.00104982,0.00503462,5.38570443,3.95698639,0.0099428,1.18603043,0.00387783,0.23614493,0.00214777,0.071943,0.05070184,0.00233775,0.28051701,0.00014959,0.0,1.0,0.00141992,1.1226595,0.00312535,0.00233603,1.50299668,0.00273794,0.9351303,3.73677567,2.85043118,1.41220577,1.0,0.00277167,0.27319947,1.00175199],"beta":[0.49742268,0.00098146,-0.03058191,-0.01969061,0.00913878,-0.00071206,0.05129831,-0.07066242,-0.00098146,0.03958588,0.03025563,-0.00107837,0.041119,0.01266324,0.05603678,0.01759825,-0.0225886,-0.00570176,-0.01902529,-0.01654696,0.0373126,0.03127609,-0.00071206,0.0,0.0,0.02913062,0.01363618,0.08545814,-0.02300756,-0.07655602,-0.04405464,-0.05207136,0.05428146,0.00532064,0.01418915,0.0,0.00227426,-0.03357787,-0.00848694],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.01154352,"b_sl":0.00865764,"beta_proxy":1.1621405,"cost_rt":0.00096252,"dist_to_hi":-0.00638867,"ema_fast_slope":0.00065725,"entry_overnight":0.0,"gap_mu":0.00028731,"gap_sd":0.00972419,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.07,"pullback_z":0.76634188,"range_ratio":0.0047211,"regime_agree":1.0,"ret_spread":0.00017704,"rs_log":-0.22643751,"same_bar_ambiguous":0.0,"sigma":0.00438532,"sigma_prank":0.34,"slip_half":0.00031126,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00042412,"spy_pullback_z":0.58399361,"spy_range_ratio":0.00331051,"spy_sigma":0.00327486,"spy_trend_score":2.14590461,"spy_u_atr":0.0040842,"spy_vol_z":-0.44396188,"touch_delay_bars":6.0,"tp_to_cost":11.91947922,"trend_score":2.13905618,"truncated_horizon":0.0,"u_atr":0.00576409,"u_atr_prank":0.369,"vol_z":-0.21533606},"mu":[11.85051546,0.01263194,0.00945016,1.12516885,0.00102505,-0.0121329,0.00061056,0.07474227,0.00032132,0.01077021,8.04381443,7.14175258,0.06815722,0.50451092,0.00570007,0.94072165,5.955e-05,-0.24738264,0.00257732,0.00478919,0.3807268,0.00034253,0.00012,0.0,0.00046179,0.44632272,0.00420953,0.00377466,2.18667211,0.00473152,-0.31722313,6.97938144,11.99117471,2.30332904,0.0,0.00626838,0.39528351,-0.23264652],"sd":[0.52595004,0.00558299,0.00417546,0.15752211,0.00029918,0.01800929,0.00169536,0.26297502,0.00104982,0.00503462,5.38570443,3.95698639,0.0099428,1.18603043,0.00387783,0.23614493,0.00214777,0.071943,0.05070184,0.00233775,0.28051701,0.00014959,0.0,1.0,0.00141992,1.1226595,0.00312535,0.00233603,1.50299668,0.00273794,0.9351303,3.73677567,2.85043118,1.41220577,1.0,0.00277167,0.27319947,1.00175199],"beta":[0.00023288,-2.064e-05,-0.00121139,-0.00101228,-0.00050307,-0.00026973,0.00168163,-0.00102405,2.064e-05,0.00120233,0.00022469,0.00017766,0.00061512,0.00044473,0.00082355,0.00105675,-0.00138879,0.00022792,-0.00060091,-0.00014426,0.00314267,-1.188e-05,-0.00026973,0.0,0.0,0.00083344,-0.00025761,0.00206815,0.00076758,-0.00032726,-0.00264206,-0.00210727,0.00072621,0.0005399,-0.00079293,0.0,-0.00060984,-0.00029364,0.0005438],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202312_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202312_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202312_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202312_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.26280042,0.26368922,0.28362095,0.32389267,0.32706361,0.43118492,0.45348466,0.5038867,0.52259795,0.62470563,0.64021607,0.6996793,0.70209851,0.86155734],"y_thresholds":[0.0,0.0,0.2,0.2,0.44444444,0.44444444,0.45454545,0.45454545,0.5,0.5,0.71428571,0.71428571,0.73333333,0.73333333]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.05909091,0.07222222,0.47169716,0.51553886,0.74],"y_thresholds":[0.33333333,0.33333333,0.51111111,0.51111111,0.58823529,0.58823529]},"uncertainty_calibration":{"u_q25":0.01503194,"u_q75":0.02037616},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":2.31531913,"policy_score":2.5256186,"brier":0.25833983,"rmse":0.0082723,"n_val":65},{"cfg_name":"tree_heavy","inner_split":2,"score":0.49741603,"policy_score":0.71265842,"brier":0.24502486,"rmse":0.01573687,"n_val":65},{"cfg_name":"tree_stable","inner_split":1,"score":2.13513327,"policy_score":2.34525308,"brier":0.25764269,"rmse":0.00844389,"n_val":65},{"cfg_name":"tree_stable","inner_split":2,"score":5.37953137,"policy_score":5.58179633,"brier":0.22836832,"rmse":0.01549436,"n_val":65},{"cfg_name":"blend_conservative","inner_split":1,"score":0.76447202,"policy_score":0.96998649,"brier":0.25162174,"rmse":0.00839908,"n_val":65},{"cfg_name":"blend_conservative","inner_split":2,"score":-0.34559781,"policy_score":-0.13704765,"brier":0.23643537,"rmse":0.01561182,"n_val":65},{"selected_cfg":"tree_stable","nested_score":3.75733232}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.5015939,"max_abs_z":2.21877764,"top_shift_features":[{"feature":"intraday_tail_frac","abs_z":2.21877764},{"feature":"rs_log","abs_z":1.23224824},{"feature":"tp_to_cost","abs_z":1.03066871},{"feature":"gap_sd","abs_z":0.94785606},{"feature":"u_atr","abs_z":0.94023853}]},"performance_drift":{"mean_abs_z":0.5015939,"recent_median_net_bps":27.63484367,"recent_median_calmar":7.84941611}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","spy_sigma","spy_u_atr","spy_trend_score","spy_pullback_z","spy_range_ratio","spy_ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49742268,"global_ev":0.00023288,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":151,"win_rate_raw":0.52980132,"ev_raw":0.00085038,"win_rate_shrunk":0.51546392,"ev_shrunk":0.00057695,"ev_half_a":0.00079967,"ev_half_b":0.00089912,"consistency":0.9751377,"prob_delta":0.01759269,"ev_delta":0.00056261},{"cluster":1,"n":8,"win_rate_raw":0.625,"ev_raw":0.00789113,"win_rate_shrunk":0.50539626,"ev_shrunk":0.00071152,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":2,"n":91,"win_rate_raw":0.40659341,"ev_raw":-0.00147107,"win_rate_shrunk":0.45824987,"ev_shrunk":-0.000502,"ev_half_a":0.00049524,"ev_half_b":-0.00348108,"consistency":0.00147983,"prob_delta":-5.797e-05,"ev_delta":-7.4e-07},{"cluster":3,"n":19,"win_rate_raw":0.73684211,"ev_raw":0.00643518,"win_rate_shrunk":0.53014908,"ev_shrunk":0.00108068,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":91,"win_rate_raw":0.47252747,"ev_raw":-0.00075683,"win_rate_shrunk":0.48668588,"ev_shrunk":-0.00019396,"ev_half_a":0.00089229,"ev_half_b":-0.00205025,"consistency":0.06609112,"prob_delta":-0.00070961,"ev_delta":-1.282e-05},{"cluster":5,"n":28,"win_rate_raw":0.5,"ev_raw":-0.00073956,"win_rate_shrunk":0.49791028,"ev_shrunk":4.891e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}