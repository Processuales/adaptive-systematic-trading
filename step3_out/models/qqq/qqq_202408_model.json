{"fold_id":"qqq_202408","symbol":"QQQ","test_start_utc":"2024-08-01 00:00:00+00:00","test_end_utc":"2024-09-01 00:00:00+00:00","n_train":449,"n_test":8,"n_trades_test":6,"policy_score_test":62.99384015,"best_params":{"mix_struct_weight":0.55,"p_cut":0.49749176,"agg_p_cut":0.57874588,"safe_size":0.99310971,"aggressive_size":1.0,"ev_cut":-0.00171211,"agg_ev_cut":-0.00148202,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.5,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00168202,"agg_ev_cut":-0.00148202,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.01077299,"b_sl":0.00803001,"beta_proxy":1.18894278,"cost_rt":0.00091995,"dist_to_hi":-0.00659792,"ema_fast_slope":0.00063055,"entry_overnight":0.0,"gap_mu":0.00035415,"gap_sd":0.0085501,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.065,"pullback_z":0.74038764,"range_ratio":0.00425807,"regime_agree":1.0,"ret_spread":0.00027109,"rs_log":-0.19553839,"same_bar_ambiguous":0.0,"sigma":0.00398321,"sigma_prank":0.312,"slip_half":0.00028997,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00041428,"spy_pullback_z":0.62945129,"spy_range_ratio":0.00295626,"spy_sigma":0.0028477,"spy_trend_score":2.17271519,"spy_u_atr":0.00371798,"spy_vol_z":-0.45197041,"touch_delay_bars":6.0,"tp_to_cost":11.45801349,"trend_score":2.14962692,"truncated_horizon":0.0,"u_atr":0.00531953,"u_atr_prank":0.309,"vol_z":-0.24724734},"mu":[11.83246073,0.01178634,0.00881523,1.17062888,0.00099496,-0.01110943,0.00059182,0.08376963,0.00037353,0.009004,5.69371728,7.0078534,0.06587696,0.50752244,0.00520653,0.94240838,0.00015548,-0.21435024,0.0026178,0.00440509,0.36533508,0.00032748,0.00012,0.0,0.00042021,0.46494827,0.00366269,0.00323864,2.28179623,0.00414645,-0.30729305,6.84816754,11.67793286,2.35820549,0.0,0.00584411,0.37373822,-0.25698699],"sd":[0.55408404,0.00448799,0.00335087,0.13754308,0.00027179,0.01490523,0.00153515,0.27704202,0.00098793,0.00327407,3.81549779,3.92634292,0.01042063,1.17006999,0.00336801,0.23296959,0.00203184,0.05254633,0.05109744,0.00185267,0.29201741,0.00013589,0.0,1.0,0.00108289,1.09809294,0.00241535,0.00147873,1.57856682,0.00176451,0.94451124,3.70410615,2.56956025,1.48913277,1.0,0.00221821,0.27887424,1.00530458],"beta":[0.4921466,-0.0298349,-0.0330435,-0.02052058,-0.00487637,-0.03666512,-0.01110229,-0.00071487,0.0298349,0.00633991,0.03992525,-0.04924244,-0.01986001,-0.00842719,0.03071369,-0.01343834,-0.00200503,-0.03143474,0.02553239,-0.01495366,0.13815341,0.06928222,-0.03666512,0.0,0.0,-0.00493657,0.04025489,0.09319928,-0.04115432,-0.11930186,-0.06514488,-0.08321888,0.11013057,0.04231843,0.05134017,0.0,0.00485757,-0.07244999,0.00314717],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.01077299,"b_sl":0.00803001,"beta_proxy":1.18894278,"cost_rt":0.00091995,"dist_to_hi":-0.00659792,"ema_fast_slope":0.00063055,"entry_overnight":0.0,"gap_mu":0.00035415,"gap_sd":0.0085501,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.065,"pullback_z":0.74038764,"range_ratio":0.00425807,"regime_agree":1.0,"ret_spread":0.00027109,"rs_log":-0.19553839,"same_bar_ambiguous":0.0,"sigma":0.00398321,"sigma_prank":0.312,"slip_half":0.00028997,"spread_half":0.00012,"spy_age_min":0.0,"spy_ema_fast_slope":0.00041428,"spy_pullback_z":0.62945129,"spy_range_ratio":0.00295626,"spy_sigma":0.0028477,"spy_trend_score":2.17271519,"spy_u_atr":0.00371798,"spy_vol_z":-0.45197041,"touch_delay_bars":6.0,"tp_to_cost":11.45801349,"trend_score":2.14962692,"truncated_horizon":0.0,"u_atr":0.00531953,"u_atr_prank":0.309,"vol_z":-0.24724734},"mu":[11.83246073,0.01178634,0.00881523,1.17062888,0.00099496,-0.01110943,0.00059182,0.08376963,0.00037353,0.009004,5.69371728,7.0078534,0.06587696,0.50752244,0.00520653,0.94240838,0.00015548,-0.21435024,0.0026178,0.00440509,0.36533508,0.00032748,0.00012,0.0,0.00042021,0.46494827,0.00366269,0.00323864,2.28179623,0.00414645,-0.30729305,6.84816754,11.67793286,2.35820549,0.0,0.00584411,0.37373822,-0.25698699],"sd":[0.55408404,0.00448799,0.00335087,0.13754308,0.00027179,0.01490523,0.00153515,0.27704202,0.00098793,0.00327407,3.81549779,3.92634292,0.01042063,1.17006999,0.00336801,0.23296959,0.00203184,0.05254633,0.05109744,0.00185267,0.29201741,0.00013589,0.0,1.0,0.00108289,1.09809294,0.00241535,0.00147873,1.57856682,0.00176451,0.94451124,3.70410615,2.56956025,1.48913277,1.0,0.00221821,0.27887424,1.00530458],"beta":[-8.429e-05,-0.00043298,-0.001275,-0.00096809,-0.00089333,-0.00039233,-8.15e-05,0.00159825,0.00043298,5.811e-05,0.00047803,-0.00117644,-0.00013212,0.00030874,0.00031796,4.654e-05,-0.00091762,-0.00029013,0.00118285,-9.486e-05,0.00393333,-0.00020471,-0.00039233,0.0,0.0,-0.00094132,0.0003887,0.00210953,8.445e-05,-0.00116873,-0.00212784,-0.00249129,0.00154783,0.00173464,3.752e-05,0.0,-0.00034517,-0.00098624,0.0010228],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202408_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202408_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202408_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\qqq\\qqq_202408_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.19617464,0.27841776,0.28266397,0.45342321,0.45640346,0.48249819,0.48755653,0.51986619,0.52468481,0.68816749,0.69160165,0.72216471,0.7601363,0.82555426,0.85658298],"y_thresholds":[0.16666667,0.16666667,0.30434783,0.30434783,0.33333333,0.33333333,0.5,0.5,0.6,0.6,0.66666667,0.66666667,0.71428571,0.71428571,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.13,0.45823012,0.46737527,0.49136153,0.51649844,0.52571507,0.56204472,0.68975397,0.91188369],"y_thresholds":[0.38095238,0.38095238,0.42857143,0.42857143,0.5,0.5,0.66666667,0.66666667,1.0]},"uncertainty_calibration":{"u_q25":0.01531834,"u_q75":0.0190479},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-0.90611807,"policy_score":-0.65517873,"brier":0.28944155,"rmse":0.01692909,"n_val":64},{"cfg_name":"tree_heavy","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.30946494,"rmse":0.01269402,"n_val":64},{"cfg_name":"tree_stable","inner_split":1,"score":-1.01891637,"policy_score":-0.7869723,"brier":0.26388348,"rmse":0.01701573,"n_val":64},{"cfg_name":"tree_stable","inner_split":2,"score":144.38997726,"policy_score":144.65847965,"brier":0.3250817,"rmse":0.01234556,"n_val":64},{"cfg_name":"blend_conservative","inner_split":1,"score":-0.62196537,"policy_score":-0.39842924,"brier":0.25356625,"rmse":0.01668072,"n_val":64},{"cfg_name":"blend_conservative","inner_split":2,"score":122.10992862,"policy_score":122.38059786,"brier":0.32850013,"rmse":0.01214707,"n_val":64},{"selected_cfg":"tree_stable","nested_score":71.68553044}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.33244358,"max_abs_z":1.10822444,"top_shift_features":[{"feature":"sigma_prank","abs_z":1.10822444},{"feature":"u_atr_prank","abs_z":1.0821399},{"feature":"gap_tail","abs_z":1.05090318},{"feature":"spread_half","abs_z":1.0},{"feature":"rs_log","abs_z":0.86444473}]},"performance_drift":{"mean_abs_z":0.33244358,"recent_median_net_bps":15.1287105,"recent_median_calmar":-1.01037217}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","spy_sigma","spy_u_atr","spy_trend_score","spy_pullback_z","spy_range_ratio","spy_ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.4921466,"global_ev":-8.429e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":91,"win_rate_raw":0.54945055,"ev_raw":0.00124905,"win_rate_shrunk":0.51686062,"ev_shrunk":0.00049075,"ev_half_a":0.00271845,"ev_half_b":-0.00039122,"consistency":0.05564543,"prob_delta":0.00137522,"ev_delta":2.731e-05},{"cluster":1,"n":35,"win_rate_raw":0.42857143,"ev_raw":-0.00187493,"win_rate_shrunk":0.47779091,"ev_shrunk":-0.00048863,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":2,"n":123,"win_rate_raw":0.52845528,"ev_raw":0.0003192,"win_rate_shrunk":0.51052507,"ev_shrunk":0.00011994,"ev_half_a":0.00072681,"ev_half_b":-0.00025626,"consistency":0.18855857,"prob_delta":0.00346542,"ev_delta":2.262e-05},{"cluster":3,"n":38,"win_rate_raw":0.42105263,"ev_raw":-0.00276746,"win_rate_shrunk":0.47504805,"ev_shrunk":-0.00072961,"ev_half_a":-0.00160074,"ev_half_b":-0.00344806,"consistency":0.51126162,"prob_delta":-0.00874183,"ev_delta":-0.00037302},{"cluster":4,"n":74,"win_rate_raw":0.37837838,"ev_raw":-0.00185935,"win_rate_shrunk":0.44875047,"ev_shrunk":-0.00076138,"ev_half_a":-0.00125877,"ev_half_b":-0.00245994,"consistency":0.69970923,"prob_delta":-0.03036467,"ev_delta":-0.00053274},{"cluster":5,"n":21,"win_rate_raw":0.66666667,"ev_raw":0.00586931,"win_rate_shrunk":0.51813895,"ev_shrunk":0.00080242,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","spy_age_min","spy_ema_fast_slope","spy_pullback_z","spy_range_ratio","spy_sigma","spy_trend_score","spy_u_atr","spy_vol_z","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}