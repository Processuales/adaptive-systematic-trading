{"fold_id":"spy_201806","symbol":"SPY","test_start_utc":"2018-06-01 00:00:00+00:00","test_end_utc":"2018-07-01 00:00:00+00:00","n_train":293,"n_test":8,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.52,"agg_p_cut":0.69,"safe_size":0.72324,"aggressive_size":0.65,"ev_cut":-8.754e-05,"agg_ev_cut":0.00041246,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-8.754e-05,"agg_ev_cut":0.00011246,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00452896,"b_sl":0.00337925,"beta_proxy":0.6395586,"cost_rt":0.00060013,"dist_to_hi":-0.00240964,"ema_fast_slope":0.00024221,"entry_overnight":0.0,"gap_mu":0.00033222,"gap_sd":0.00320145,"gap_tail":3.0,"hold_bars":6.0,"intraday_tail_frac":0.06153846,"pullback_z":0.63628377,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0003451,"qqq_pullback_z":0.62014574,"qqq_range_ratio":0.00258988,"qqq_sigma":0.00235962,"qqq_trend_score":2.18903847,"qqq_u_atr":0.00303505,"qqq_vol_z":-0.2438078,"range_ratio":0.00190692,"regime_agree":1.0,"ret_spread":-0.00019914,"rs_log":0.59877061,"same_bar_ambiguous":0.0,"sigma":0.00171503,"sigma_prank":0.318,"slip_half":0.00017006,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.38751557,"trend_score":2.02975981,"truncated_horizon":0.0,"u_atr":0.00224565,"u_atr_prank":0.32,"vol_z":-0.17956061},"mu":[11.864,0.00525605,0.00393519,0.64266497,0.0006577,-0.00368117,0.00030059,0.068,0.00022051,0.00404066,3.352,7.032,0.06167346,0.57514196,0.0,0.00034596,0.50477548,0.00319663,0.00260701,2.27224551,0.00347553,-0.15563564,0.00237389,0.872,-6.943e-05,0.58981724,0.0,0.00194904,0.36485848,0.00019885,8e-05,6.84,7.87069298,2.26268197,0.0,0.00261432,0.36486625,-0.16963772],"sd":[0.50349181,0.00277863,0.00208527,0.14902872,0.00015631,0.00455982,0.00062901,0.2517459,0.00030199,0.00171771,2.31777825,3.98785356,0.01112274,1.09291414,1.0,0.0008446,1.11016392,0.00207599,0.00108511,1.87566785,0.00165106,0.88669864,0.00169862,0.33408981,0.00124535,0.0463748,1.0,0.00090442,0.2918251,7.816e-05,0.0,3.71892458,3.1760307,1.49009177,1.0,0.00139258,0.26398914,0.87166983],"beta":[0.484,-0.00091526,-7.42e-06,-0.00051519,-0.00786962,-0.00872669,-0.04044169,-0.09238216,0.00091526,0.0028481,0.06934761,0.1125285,-0.02572302,-0.02019521,0.01460894,0.0,0.06965451,-0.04588543,0.06090791,0.04824204,0.04679621,0.06390315,-0.02043982,-0.07327342,0.02294134,-0.0083583,0.02070678,0.0,-0.03725408,0.12043605,-0.00872669,0.0,0.07330636,0.0218177,0.0297896,0.0,-0.00152809,-0.13472881,0.10404813],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00452896,"b_sl":0.00337925,"beta_proxy":0.6395586,"cost_rt":0.00060013,"dist_to_hi":-0.00240964,"ema_fast_slope":0.00024221,"entry_overnight":0.0,"gap_mu":0.00033222,"gap_sd":0.00320145,"gap_tail":3.0,"hold_bars":6.0,"intraday_tail_frac":0.06153846,"pullback_z":0.63628377,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0003451,"qqq_pullback_z":0.62014574,"qqq_range_ratio":0.00258988,"qqq_sigma":0.00235962,"qqq_trend_score":2.18903847,"qqq_u_atr":0.00303505,"qqq_vol_z":-0.2438078,"range_ratio":0.00190692,"regime_agree":1.0,"ret_spread":-0.00019914,"rs_log":0.59877061,"same_bar_ambiguous":0.0,"sigma":0.00171503,"sigma_prank":0.318,"slip_half":0.00017006,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.38751557,"trend_score":2.02975981,"truncated_horizon":0.0,"u_atr":0.00224565,"u_atr_prank":0.32,"vol_z":-0.17956061},"mu":[11.864,0.00525605,0.00393519,0.64266497,0.0006577,-0.00368117,0.00030059,0.068,0.00022051,0.00404066,3.352,7.032,0.06167346,0.57514196,0.0,0.00034596,0.50477548,0.00319663,0.00260701,2.27224551,0.00347553,-0.15563564,0.00237389,0.872,-6.943e-05,0.58981724,0.0,0.00194904,0.36485848,0.00019885,8e-05,6.84,7.87069298,2.26268197,0.0,0.00261432,0.36486625,-0.16963772],"sd":[0.50349181,0.00277863,0.00208527,0.14902872,0.00015631,0.00455982,0.00062901,0.2517459,0.00030199,0.00171771,2.31777825,3.98785356,0.01112274,1.09291414,1.0,0.0008446,1.11016392,0.00207599,0.00108511,1.87566785,0.00165106,0.88669864,0.00169862,0.33408981,0.00124535,0.0463748,1.0,0.00090442,0.2918251,7.816e-05,0.0,3.71892458,3.1760307,1.49009177,1.0,0.00139258,0.26398914,0.87166983],"beta":[-0.00014206,0.00012447,-5.676e-05,-5.535e-05,-3.7e-07,0.00011972,-0.00078227,-0.0012521,-0.00012447,0.00030234,0.00077719,0.00111409,7.719e-05,-0.0004273,0.00026271,0.0,0.00073576,-0.00024106,0.00085184,0.00058241,0.00022331,0.00063519,-0.00031556,-1.365e-05,0.00043758,-0.00035847,0.00023223,0.0,-0.00086628,0.00078464,0.00011972,0.0,0.00038808,4.853e-05,0.00029331,0.0,-5.251e-05,-0.00133381,0.00113352],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201806_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201806_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201806_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201806_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.32153943,0.84879875,0.88935039],"y_thresholds":[0.47619048,0.47619048,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.03095238,0.05948639,0.07519358,0.27342613,0.31516459,0.38095238,0.64987],"y_thresholds":[0.25,0.25,0.53846154,0.53846154,0.58823529,0.58823529,1.0]},"uncertainty_calibration":{"u_q25":0.01000627,"u_q75":0.01862946},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":0.84179833,"policy_score":1.0399999,"brier":0.24764904,"rmse":0.0062324,"n_val":42},{"cfg_name":"tree_heavy","inner_split":2,"score":-0.43330786,"policy_score":-0.11588698,"brier":0.41067517,"rmse":0.00470725,"n_val":42},{"cfg_name":"tree_stable","inner_split":1,"score":1.53821127,"policy_score":1.73996133,"brier":0.25450676,"rmse":0.005435,"n_val":42},{"cfg_name":"tree_stable","inner_split":2,"score":5.44271402,"policy_score":5.70192043,"brier":0.33325391,"rmse":0.00463299,"n_val":42},{"cfg_name":"blend_conservative","inner_split":1,"score":-0.48541177,"policy_score":-0.27683489,"brier":0.26346024,"rmse":0.00549085,"n_val":42},{"cfg_name":"blend_conservative","inner_split":2,"score":-0.74821104,"policy_score":-0.43569944,"brier":0.4052674,"rmse":0.00428053,"n_val":42},{"selected_cfg":"tree_stable","nested_score":3.49046265}],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.39637235,"max_abs_z":2.35941074,"top_shift_features":[{"feature":"gap_tail","abs_z":2.35941074},{"feature":"rs_log","abs_z":2.14128927},{"feature":"gap_mu","abs_z":1.54871109},{"feature":"u_atr_prank","abs_z":1.18176422},{"feature":"sigma_prank","abs_z":1.07899139}]},"performance_drift":{"mean_abs_z":0.39637235,"recent_median_net_bps":-10.12270096,"recent_median_calmar":-3.58158332}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.484,"global_ev":-0.00014206,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":26,"win_rate_raw":0.46153846,"ev_raw":-0.00088035,"win_rate_shrunk":0.48,"ev_shrunk":-0.00027354,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":1,"n":75,"win_rate_raw":0.48,"ev_raw":-0.00023085,"win_rate_shrunk":0.48246154,"ev_shrunk":-0.00017621,"ev_half_a":-0.0007701,"ev_half_b":-3.476e-05,"consistency":0.81616348,"prob_delta":-0.00125564,"ev_delta":-0.00014382},{"cluster":2,"n":50,"win_rate_raw":0.46,"ev_raw":-0.0010316,"win_rate_shrunk":0.47694118,"ev_shrunk":-0.00040369,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":3,"n":15,"win_rate_raw":0.53333333,"ev_raw":-0.00014717,"win_rate_shrunk":0.48948148,"ev_shrunk":-0.00014263,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":26,"win_rate_raw":0.61538462,"ev_raw":0.00277738,"win_rate_shrunk":0.50739726,"ev_shrunk":0.00037784,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":58,"win_rate_raw":0.44827586,"ev_raw":-0.00023685,"win_rate_shrunk":0.47235955,"ev_shrunk":-0.00017295,"ev_half_a":-0.00217317,"ev_half_b":0.00032253,"consistency":0.0940186,"prob_delta":-0.00109442,"ev_delta":-1.626e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}