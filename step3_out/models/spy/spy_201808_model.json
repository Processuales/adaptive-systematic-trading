{"fold_id":"spy_201808","symbol":"SPY","test_start_utc":"2018-08-01 00:00:00+00:00","test_end_utc":"2018-09-01 00:00:00+00:00","n_train":309,"n_test":14,"n_trades_test":5,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00075572,"agg_ev_cut":0.00095572,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00075572,"agg_ev_cut":0.00095572,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00453767,"b_sl":0.00339254,"beta_proxy":0.62224549,"cost_rt":0.00059933,"dist_to_hi":-0.00235837,"ema_fast_slope":0.00025048,"entry_overnight":0.0,"gap_mu":0.00033907,"gap_sd":0.00317187,"gap_tail":3.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65865843,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00037047,"qqq_pullback_z":0.65845636,"qqq_range_ratio":0.00258789,"qqq_sigma":0.00235065,"qqq_trend_score":2.27108224,"qqq_u_atr":0.00304363,"qqq_vol_z":-0.21975456,"range_ratio":0.00194394,"regime_agree":1.0,"ret_spread":-0.00018039,"rs_log":0.59763119,"same_bar_ambiguous":0.0,"sigma":0.00170696,"sigma_prank":0.341,"slip_half":0.00016966,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.43330311,"trend_score":2.18441533,"truncated_horizon":0.0,"u_atr":0.00225697,"u_atr_prank":0.348,"vol_z":-0.14339674},"mu":[11.86311787,0.0052543,0.00393369,0.63646739,0.00066055,-0.00361249,0.00030752,0.06844106,0.00024196,0.00396178,3.56273764,6.9581749,0.06159952,0.60414739,0.0,0.00035351,0.52475634,0.00318839,0.00259495,2.37026438,0.00347228,-0.1289609,0.00237977,0.878327,-5.424e-05,0.58643504,0.0,0.00194164,0.38675141,0.00020028,8e-05,6.77186312,7.86195841,2.38104036,0.0,0.00261308,0.39058769,-0.14194109],"sd":[0.50500252,0.00271799,0.00203961,0.14781767,0.00016242,0.00451332,0.00061981,0.25250126,0.00030895,0.00170964,2.44382891,3.94474186,0.01095172,1.09589611,1.0,0.00083377,1.10882861,0.00204619,0.00106359,1.89181396,0.00161709,0.89400806,0.00167023,0.32690776,0.00122881,0.04758447,1.0,0.00088544,0.29955421,8.121e-05,1.0,3.67930798,3.11837912,1.55647981,1.0,0.00136195,0.27872418,0.87798245],"beta":[0.49429658,-0.00888714,0.00681683,0.0085686,-0.00477128,-0.03381656,-0.03660862,-0.08942056,0.00888714,0.0013256,0.07702226,0.12710118,-0.05028556,-0.02845744,0.01917479,0.0,0.06008922,-0.04147562,0.07402442,0.04292369,0.04831318,0.06602917,-0.0315027,-0.08910308,0.02098033,-0.00860917,0.02515815,0.0,-0.02367934,0.13663453,-0.03381656,0.0,0.08884029,0.00529219,0.03166846,0.0,0.01206002,-0.11960698,0.09246624],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00453767,"b_sl":0.00339254,"beta_proxy":0.62224549,"cost_rt":0.00059933,"dist_to_hi":-0.00235837,"ema_fast_slope":0.00025048,"entry_overnight":0.0,"gap_mu":0.00033907,"gap_sd":0.00317187,"gap_tail":3.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65865843,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00037047,"qqq_pullback_z":0.65845636,"qqq_range_ratio":0.00258789,"qqq_sigma":0.00235065,"qqq_trend_score":2.27108224,"qqq_u_atr":0.00304363,"qqq_vol_z":-0.21975456,"range_ratio":0.00194394,"regime_agree":1.0,"ret_spread":-0.00018039,"rs_log":0.59763119,"same_bar_ambiguous":0.0,"sigma":0.00170696,"sigma_prank":0.341,"slip_half":0.00016966,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.43330311,"trend_score":2.18441533,"truncated_horizon":0.0,"u_atr":0.00225697,"u_atr_prank":0.348,"vol_z":-0.14339674},"mu":[11.86311787,0.0052543,0.00393369,0.63646739,0.00066055,-0.00361249,0.00030752,0.06844106,0.00024196,0.00396178,3.56273764,6.9581749,0.06159952,0.60414739,0.0,0.00035351,0.52475634,0.00318839,0.00259495,2.37026438,0.00347228,-0.1289609,0.00237977,0.878327,-5.424e-05,0.58643504,0.0,0.00194164,0.38675141,0.00020028,8e-05,6.77186312,7.86195841,2.38104036,0.0,0.00261308,0.39058769,-0.14194109],"sd":[0.50500252,0.00271799,0.00203961,0.14781767,0.00016242,0.00451332,0.00061981,0.25250126,0.00030895,0.00170964,2.44382891,3.94474186,0.01095172,1.09589611,1.0,0.00083377,1.10882861,0.00204619,0.00106359,1.89181396,0.00161709,0.89400806,0.00167023,0.32690776,0.00122881,0.04758447,1.0,0.00088544,0.29955421,8.121e-05,1.0,3.67930798,3.11837912,1.55647981,1.0,0.00136195,0.27872418,0.87798245],"beta":[-8.01e-05,2.988e-05,9.84e-06,2.107e-05,2.287e-05,-5.62e-05,-0.00074956,-0.00121324,-2.988e-05,0.00028088,0.0008233,0.00117375,-9.4e-07,-0.00053126,0.00036817,0.0,0.00064034,-0.00024049,0.00100578,0.00058556,0.00021245,0.00063838,-0.00051401,-0.00020696,0.00042797,-0.00037782,0.00024067,0.0,-0.00083934,0.00088872,-5.62e-05,0.0,0.00041193,-5.323e-05,0.00028045,0.0,4.347e-05,-0.00115581,0.00099905],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201808_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201808_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201808_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201808_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.29824526,0.48735365,0.48995396,0.63863485,0.64245832,0.92729168],"y_thresholds":[0.28571429,0.28571429,0.4,0.4,0.5,0.5]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.62857143],"y_thresholds":[0.41304348,0.41304348]},"uncertainty_calibration":{"u_q25":0.00852175,"u_q75":0.01803862},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-0.7371269,"policy_score":-0.53359446,"brier":0.25606614,"rmse":0.00574142,"n_val":44},{"cfg_name":"tree_heavy","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.29430366,"rmse":0.00381974,"n_val":44},{"cfg_name":"tree_stable","inner_split":1,"score":-0.02399926,"policy_score":0.18308372,"brier":0.26182973,"rmse":0.00535534,"n_val":44},{"cfg_name":"tree_stable","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.2908995,"rmse":0.0041257,"n_val":44},{"cfg_name":"blend_conservative","inner_split":1,"score":0.32784199,"policy_score":0.54863277,"brier":0.28079994,"rmse":0.00509541,"n_val":44},{"cfg_name":"blend_conservative","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.28945889,"rmse":0.00388474,"n_val":44},{"selected_cfg":"tree_heavy","nested_score":-5e+17}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.38416734,"max_abs_z":1.97935969,"top_shift_features":[{"feature":"rs_log","abs_z":1.97935969},{"feature":"intraday_tail_frac","abs_z":0.97799447},{"feature":"gap_mu","abs_z":0.80399839},{"feature":"beta_proxy","abs_z":0.78116321},{"feature":"u_atr_prank","abs_z":0.76314263}]},"performance_drift":{"mean_abs_z":0.38416734,"recent_median_net_bps":-1.36170793,"recent_median_calmar":4.08173134}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49429658,"global_ev":-8.01e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":46,"win_rate_raw":0.47826087,"ev_raw":0.00031228,"win_rate_shrunk":0.48985295,"ev_shrunk":2.863e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":1,"n":72,"win_rate_raw":0.47222222,"ev_raw":-0.00026735,"win_rate_shrunk":0.48601869,"ev_shrunk":-0.00015032,"ev_half_a":-0.0004327,"ev_half_b":-0.00016814,"consistency":0.93385991,"prob_delta":-0.00773038,"ev_delta":-0.00014038},{"cluster":2,"n":18,"win_rate_raw":0.5,"ev_raw":-0.00010237,"win_rate_shrunk":0.4950405,"ev_shrunk":-8.301e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":3,"n":28,"win_rate_raw":0.60714286,"ev_raw":0.00172654,"win_rate_shrunk":0.51564587,"ev_shrunk":0.00026169,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":46,"win_rate_raw":0.54347826,"ev_raw":-0.00012543,"win_rate_shrunk":0.50792524,"ev_shrunk":-9.266e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":5,"n":53,"win_rate_raw":0.43396226,"ev_raw":-0.00107385,"win_rate_shrunk":0.47581266,"ev_shrunk":-0.00038455,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}