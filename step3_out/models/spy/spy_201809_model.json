{"fold_id":"spy_201809","symbol":"SPY","test_start_utc":"2018-09-01 00:00:00+00:00","test_end_utc":"2018-10-01 00:00:00+00:00","n_train":321,"n_test":7,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.52,"agg_p_cut":0.75,"safe_size":0.4797,"aggressive_size":0.85536,"ev_cut":0.00075572,"agg_ev_cut":0.00125572,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00075572,"agg_ev_cut":0.00095572,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00459585,"b_sl":0.00341462,"beta_proxy":0.63527571,"cost_rt":0.00060245,"dist_to_hi":-0.00249313,"ema_fast_slope":0.00026713,"entry_overnight":0.0,"gap_mu":0.00034521,"gap_sd":0.00318627,"gap_tail":3.0,"hold_bars":6.0,"intraday_tail_frac":0.06115597,"pullback_z":0.64001468,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038132,"qqq_pullback_z":0.64773276,"qqq_range_ratio":0.00260844,"qqq_sigma":0.00239667,"qqq_trend_score":2.2828217,"qqq_u_atr":0.00308803,"qqq_vol_z":-0.2156343,"range_ratio":0.00200313,"regime_agree":1.0,"ret_spread":-0.00018938,"rs_log":0.59537881,"same_bar_ambiguous":0.0,"sigma":0.00175001,"sigma_prank":0.355,"slip_half":0.00017122,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.45465548,"trend_score":2.1098373,"truncated_horizon":0.0,"u_atr":0.00227642,"u_atr_prank":0.359,"vol_z":-0.14339674},"mu":[11.86813187,0.00542379,0.00406107,0.6426063,0.00066867,-0.00432321,0.00031342,0.06593407,0.00025201,0.00394054,3.9047619,6.95970696,0.06196503,0.59188637,0.0,0.00036906,0.52300257,0.0032903,0.00266645,2.37501973,0.0035548,-0.12802052,0.00247373,0.88278388,-6.483e-05,0.58299074,0.0,0.00201047,0.40392535,0.00020433,8e-05,6.77655678,7.99383289,2.35682178,0.0,0.00269834,0.40733173,-0.14848461],"sd":[0.49633362,0.00281883,0.00211557,0.14856789,0.00016878,0.00683211,0.00063618,0.24816681,0.00030787,0.00168249,2.98931174,3.92538315,0.01105591,1.09336977,1.0,0.00084537,1.1001816,0.00213021,0.00112039,1.86264486,0.00165291,0.88593712,0.00174239,0.32167763,0.00122867,0.04996046,1.0,0.00094756,0.30596197,8.439e-05,1.0,3.66318681,3.15138555,1.53986218,1.0,0.00141298,0.28613178,0.87355136],"beta":[0.49450549,-0.01042747,0.00925446,0.01038112,-0.01883002,-0.03788943,-0.00210018,-0.06764923,0.01042747,-0.00081343,0.04991782,0.05226888,-0.05969457,-0.03790189,-0.00540402,0.0,0.06867848,-0.04687443,0.08150236,0.0311865,0.02797838,0.08619875,-0.03021395,-0.09759416,0.02548374,-0.01306997,-0.00332754,0.0,-0.02699581,0.14336761,-0.03788943,0.0,0.09554254,-0.01904432,0.03021872,0.0,0.01262389,-0.10866952,0.07479113],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00459585,"b_sl":0.00341462,"beta_proxy":0.63527571,"cost_rt":0.00060245,"dist_to_hi":-0.00249313,"ema_fast_slope":0.00026713,"entry_overnight":0.0,"gap_mu":0.00034521,"gap_sd":0.00318627,"gap_tail":3.0,"hold_bars":6.0,"intraday_tail_frac":0.06115597,"pullback_z":0.64001468,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038132,"qqq_pullback_z":0.64773276,"qqq_range_ratio":0.00260844,"qqq_sigma":0.00239667,"qqq_trend_score":2.2828217,"qqq_u_atr":0.00308803,"qqq_vol_z":-0.2156343,"range_ratio":0.00200313,"regime_agree":1.0,"ret_spread":-0.00018938,"rs_log":0.59537881,"same_bar_ambiguous":0.0,"sigma":0.00175001,"sigma_prank":0.355,"slip_half":0.00017122,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.45465548,"trend_score":2.1098373,"truncated_horizon":0.0,"u_atr":0.00227642,"u_atr_prank":0.359,"vol_z":-0.14339674},"mu":[11.86813187,0.00542379,0.00406107,0.6426063,0.00066867,-0.00432321,0.00031342,0.06593407,0.00025201,0.00394054,3.9047619,6.95970696,0.06196503,0.59188637,0.0,0.00036906,0.52300257,0.0032903,0.00266645,2.37501973,0.0035548,-0.12802052,0.00247373,0.88278388,-6.483e-05,0.58299074,0.0,0.00201047,0.40392535,0.00020433,8e-05,6.77655678,7.99383289,2.35682178,0.0,0.00269834,0.40733173,-0.14848461],"sd":[0.49633362,0.00281883,0.00211557,0.14856789,0.00016878,0.00683211,0.00063618,0.24816681,0.00030787,0.00168249,2.98931174,3.92538315,0.01105591,1.09336977,1.0,0.00084537,1.1001816,0.00213021,0.00112039,1.86264486,0.00165291,0.88593712,0.00174239,0.32167763,0.00122867,0.04996046,1.0,0.00094756,0.30596197,8.439e-05,1.0,3.66318681,3.15138555,1.53986218,1.0,0.00141298,0.28613178,0.87355136],"beta":[-4.05e-05,4.88e-05,6.827e-05,7.381e-05,-0.000199,-4.681e-05,-0.00065026,-0.00096096,-4.88e-05,0.00021626,0.00059235,0.0003021,-9.996e-05,-0.00070125,0.00013093,0.0,0.00069831,-0.00031095,0.00102437,0.00042731,-2.568e-05,0.00088077,-0.0004926,-0.00039298,0.00050435,-0.00047057,-0.00016224,0.0,-0.00092683,0.00091591,-4.681e-05,0.0,0.00053774,-0.00032344,0.00024463,0.0,8.483e-05,-0.00107325,0.00085599],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201809_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201809_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201809_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201809_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.25554891,0.34866022,0.35066947,0.54956513,0.58054125,0.67558596,0.70510595,0.88849873],"y_thresholds":[0.125,0.125,0.38461538,0.38461538,0.44444444,0.44444444,0.5,0.5]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.07222222,0.8375],"y_thresholds":[0.28571429,0.41463415,0.41463415]},"uncertainty_calibration":{"u_q25":0.00780591,"u_q75":0.01394512},"nested_tuning_rows":[],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.35822417,"max_abs_z":1.72715154,"top_shift_features":[{"feature":"rs_log","abs_z":1.72715154},{"feature":"qqq_trend_score","abs_z":0.86323168},{"feature":"intraday_tail_frac","abs_z":0.68685598},{"feature":"beta_proxy","abs_z":0.67613725},{"feature":"gap_tail","abs_z":0.64519855}]},"performance_drift":{"mean_abs_z":0.35822417,"recent_median_net_bps":-7.47021747,"recent_median_calmar":-4.75238288}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49450549,"global_ev":-4.05e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":66,"win_rate_raw":0.59090909,"ev_raw":0.00032406,"win_rate_shrunk":0.52871322,"ev_shrunk":8.886e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":40,"win_rate_raw":0.55,"ev_raw":0.00100931,"win_rate_shrunk":0.50837912,"ev_shrunk":0.00022195,"ev_half_a":0.00146254,"ev_half_b":6.8e-05,"consistency":0.65136508,"prob_delta":0.0090368,"ev_delta":0.00014457},{"cluster":2,"n":43,"win_rate_raw":0.51162791,"ev_raw":4.969e-05,"win_rate_shrunk":0.49902245,"ev_shrunk":-1.671e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":3,"n":72,"win_rate_raw":0.38888889,"ev_raw":-0.00076116,"win_rate_shrunk":0.45489927,"ev_shrunk":-0.00031075,"ev_half_a":-0.00094807,"ev_half_b":-0.00040976,"consistency":0.86542321,"prob_delta":-0.03427615,"ev_delta":-0.00026893},{"cluster":4,"n":35,"win_rate_raw":0.45714286,"ev_raw":-0.00040648,"win_rate_shrunk":0.48606877,"ev_shrunk":-0.00012314,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":5,"n":17,"win_rate_raw":0.47058824,"ev_raw":-0.00034851,"win_rate_shrunk":0.49153766,"ev_shrunk":-7.872e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}