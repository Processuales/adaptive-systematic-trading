{"fold_id":"spy_201811","symbol":"SPY","test_start_utc":"2018-11-01 00:00:00+00:00","test_end_utc":"2018-12-01 00:00:00+00:00","n_train":339,"n_test":8,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.52,"agg_p_cut":0.75,"safe_size":0.4797,"aggressive_size":0.85536,"ev_cut":0.00075572,"agg_ev_cut":0.00125572,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00075572,"agg_ev_cut":0.00095572,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.0046978,"b_sl":0.00352335,"beta_proxy":0.66267014,"cost_rt":0.00060664,"dist_to_hi":-0.00262871,"ema_fast_slope":0.00029664,"entry_overnight":0.0,"gap_mu":0.00035592,"gap_sd":0.00324699,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038841,"qqq_pullback_z":0.647129,"qqq_range_ratio":0.00269246,"qqq_sigma":0.00244257,"qqq_trend_score":2.27108224,"qqq_u_atr":0.00315099,"qqq_vol_z":-0.24570999,"range_ratio":0.00214316,"regime_agree":1.0,"ret_spread":-0.00020192,"rs_log":0.57387866,"same_bar_ambiguous":0.0,"sigma":0.0018123,"sigma_prank":0.359,"slip_half":0.00017332,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.65680452,"trend_score":2.04647205,"truncated_horizon":0.0,"u_atr":0.0023489,"u_atr_prank":0.363,"vol_z":-0.24294331},"mu":[11.87543253,0.00562484,0.00421222,0.64922981,0.00067399,-0.00477336,0.0003235,0.06228374,0.00028024,0.00397133,4.5916955,6.99653979,0.06168053,0.58579073,0.0,0.00038618,0.52383643,0.00336722,0.00275611,2.37086003,0.00367954,-0.15797276,0.00252693,0.88581315,-8.164e-05,0.57751862,0.0,0.00209009,0.40891218,0.000207,8e-05,6.81314879,8.19623344,2.33546109,0.0,0.00279961,0.40984623,-0.18057509],"sd":[0.48334035,0.00292764,0.00219748,0.14679687,0.00016703,0.00754872,0.00065243,0.24167017,0.00032309,0.00164174,3.97736679,3.91651482,0.01089045,1.08325094,1.0,0.00086677,1.0929655,0.0021222,0.00118007,1.85021736,0.00173214,0.87820589,0.00172654,0.31803807,0.00123147,0.05349175,1.0,0.00100333,0.30272025,8.351e-05,1.0,3.65459848,3.20862924,1.53106245,1.0,0.00146794,0.28409085,0.8638704],"beta":[0.48788927,-0.00944943,0.03768451,0.03885991,-0.03569783,-0.03778843,0.0180307,-0.02721271,0.00944943,0.00203279,0.01938615,-0.01667852,-0.07869389,-0.01816072,-0.02245222,0.0,0.03035633,-0.03545335,0.06627094,0.06112775,0.01279073,0.00760502,-0.02492287,-0.075797,0.03294115,-0.00719757,-0.01874971,0.0,-0.047196,0.13630496,-0.03778843,0.0,0.1181915,-0.04266477,0.03103463,0.0,0.04118805,-0.09628105,0.059721],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.0046978,"b_sl":0.00352335,"beta_proxy":0.66267014,"cost_rt":0.00060664,"dist_to_hi":-0.00262871,"ema_fast_slope":0.00029664,"entry_overnight":0.0,"gap_mu":0.00035592,"gap_sd":0.00324699,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038841,"qqq_pullback_z":0.647129,"qqq_range_ratio":0.00269246,"qqq_sigma":0.00244257,"qqq_trend_score":2.27108224,"qqq_u_atr":0.00315099,"qqq_vol_z":-0.24570999,"range_ratio":0.00214316,"regime_agree":1.0,"ret_spread":-0.00020192,"rs_log":0.57387866,"same_bar_ambiguous":0.0,"sigma":0.0018123,"sigma_prank":0.359,"slip_half":0.00017332,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.65680452,"trend_score":2.04647205,"truncated_horizon":0.0,"u_atr":0.0023489,"u_atr_prank":0.363,"vol_z":-0.24294331},"mu":[11.87543253,0.00562484,0.00421222,0.64922981,0.00067399,-0.00477336,0.0003235,0.06228374,0.00028024,0.00397133,4.5916955,6.99653979,0.06168053,0.58579073,0.0,0.00038618,0.52383643,0.00336722,0.00275611,2.37086003,0.00367954,-0.15797276,0.00252693,0.88581315,-8.164e-05,0.57751862,0.0,0.00209009,0.40891218,0.000207,8e-05,6.81314879,8.19623344,2.33546109,0.0,0.00279961,0.40984623,-0.18057509],"sd":[0.48334035,0.00292764,0.00219748,0.14679687,0.00016703,0.00754872,0.00065243,0.24167017,0.00032309,0.00164174,3.97736679,3.91651482,0.01089045,1.08325094,1.0,0.00086677,1.0929655,0.0021222,0.00118007,1.85021736,0.00173214,0.87820589,0.00172654,0.31803807,0.00123147,0.05349175,1.0,0.00100333,0.30272025,8.351e-05,1.0,3.65459848,3.20862924,1.53106245,1.0,0.00146794,0.28409085,0.8638704],"beta":[-0.00014034,5.48e-05,0.00032064,0.00032585,-0.00038006,2.042e-05,-0.00019258,-0.00037796,-5.48e-05,0.00034522,0.00022037,-0.00050551,-0.00030929,-0.00036604,-0.00017294,0.0,0.00031637,-0.00027457,0.00087353,0.00072709,-0.00016069,-0.00028499,-0.00033001,-9.648e-05,0.00054651,-0.00038428,-0.00025925,0.0,-0.00109366,0.00079558,2.042e-05,0.0,0.00084463,-0.00035829,0.00017051,0.0,0.00033612,-0.0009048,0.0005623],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201811_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201811_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201811_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201811_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.22363068,0.22548655,0.23079527,0.48425776,0.49192195,0.85775182],"y_thresholds":[0.0,0.0,0.31818182,0.31818182,0.5,0.5]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.70212665],"y_thresholds":[0.4,0.4]},"uncertainty_calibration":{"u_q25":0.00788273,"u_q75":0.01108882},"nested_tuning_rows":[],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.8193761,"max_abs_z":2.87556295,"top_shift_features":[{"feature":"qqq_sigma","abs_z":2.87556295},{"feature":"qqq_u_atr","abs_z":2.26614471},{"feature":"dist_to_hi","abs_z":2.2061974},{"feature":"sigma","abs_z":2.17953944},{"feature":"a_tp","abs_z":1.73557852}]},"performance_drift":{"mean_abs_z":0.8193761,"recent_median_net_bps":-2.21664801,"recent_median_calmar":-5.92318243}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48788927,"global_ev":-0.00014034,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":69,"win_rate_raw":0.50724638,"ev_raw":-0.00010399,"win_rate_shrunk":0.49495615,"ev_shrunk":-0.00012707,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":1,"n":67,"win_rate_raw":0.46268657,"ev_raw":-0.00046154,"win_rate_shrunk":0.47885943,"ev_shrunk":-0.00025542,"ev_half_a":-0.00020664,"ev_half_b":-0.00062318,"consistency":0.89586609,"prob_delta":-0.00808953,"ev_delta":-0.00022882},{"cluster":2,"n":45,"win_rate_raw":0.48888889,"ev_raw":0.00046843,"win_rate_shrunk":0.4881619,"ev_shrunk":2.569e-05,"ev_half_a":0.00106802,"ev_half_b":-0.00028106,"consistency":0.16568292,"prob_delta":4.517e-05,"ev_delta":4.26e-06},{"cluster":3,"n":60,"win_rate_raw":0.51666667,"ev_raw":0.00011432,"win_rate_shrunk":0.49748174,"ev_shrunk":-5.545e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":32,"win_rate_raw":0.4375,"ev_raw":-0.0008538,"win_rate_shrunk":0.47728101,"ev_shrunk":-0.00029054,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":5,"n":16,"win_rate_raw":0.5,"ev_raw":-0.0001923,"win_rate_shrunk":0.48931406,"ev_shrunk":-0.00014645,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}