{"fold_id":"spy_201901","symbol":"SPY","test_start_utc":"2019-01-01 00:00:00+00:00","test_end_utc":"2019-02-01 00:00:00+00:00","n_train":349,"n_test":16,"n_trades_test":5,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.52,"agg_p_cut":0.75,"safe_size":0.4797,"aggressive_size":0.85536,"ev_cut":0.00075572,"agg_ev_cut":0.00125572,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00075572,"agg_ev_cut":0.00095572,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00474078,"b_sl":0.00355559,"beta_proxy":0.67008015,"cost_rt":0.00061001,"dist_to_hi":-0.00262871,"ema_fast_slope":0.00029664,"entry_overnight":0.0,"gap_mu":0.00035923,"gap_sd":0.0032587,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0003849,"qqq_pullback_z":0.62569709,"qqq_range_ratio":0.00270168,"qqq_sigma":0.00246235,"qqq_trend_score":2.2662971,"qqq_u_atr":0.00318692,"qqq_vol_z":-0.25191958,"range_ratio":0.00214316,"regime_agree":1.0,"ret_spread":-0.00019435,"rs_log":0.56753452,"same_bar_ambiguous":0.0,"sigma":0.00182548,"sigma_prank":0.354,"slip_half":0.00017501,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.68113507,"trend_score":2.03976587,"truncated_horizon":0.0,"u_atr":0.00237039,"u_atr_prank":0.3514386,"vol_z":-0.25497208},"mu":[11.87878788,0.00563272,0.00421831,0.65058081,0.00067354,-0.00475065,0.00032072,0.06060606,0.00029681,0.00399393,4.88888889,6.96969697,0.06156792,0.57875191,0.0,0.00038194,0.5186119,0.00337759,0.00276758,2.36126638,0.00368902,-0.18110037,0.00252275,0.88552189,-6e-05,0.57464964,0.0,0.00209764,0.40089098,0.00020677,8e-05,6.79124579,8.2172392,2.31862813,0.0,0.0028039,0.40008423,-0.20176494],"sd":[0.4772126,0.0028925,0.00217112,0.14503016,0.00016486,0.0074637,0.00064838,0.2386063,0.00033398,0.00162486,4.31165257,3.9178119,0.0108031,1.07622643,1.0,0.00086189,1.08739766,0.00212802,0.00116875,1.85188341,0.00171278,0.88114038,0.00171258,0.31839107,0.00124311,0.05550627,1.0,0.00099192,0.30299251,8.243e-05,1.0,3.66209873,3.17387517,1.51941586,1.0,0.00145034,0.28585431,0.86588909],"beta":[0.49158249,-0.00578715,0.0366412,0.03753324,-0.03945728,-0.03683575,0.02003244,-0.03870053,0.00578715,0.00236701,0.03781525,-0.01208509,-0.0782602,-0.01542316,-0.02399528,0.0,0.03615747,-0.03408703,0.04460204,0.03330688,0.03012134,0.0300462,-0.01702422,-0.07083105,0.01692483,-0.00717762,-0.03579759,0.0,-0.02151684,0.13288382,-0.03683575,0.0,0.11847094,-0.04896998,0.02227812,0.0,0.03929679,-0.10614906,0.06584124],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00474078,"b_sl":0.00355559,"beta_proxy":0.67008015,"cost_rt":0.00061001,"dist_to_hi":-0.00262871,"ema_fast_slope":0.00029664,"entry_overnight":0.0,"gap_mu":0.00035923,"gap_sd":0.0032587,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0003849,"qqq_pullback_z":0.62569709,"qqq_range_ratio":0.00270168,"qqq_sigma":0.00246235,"qqq_trend_score":2.2662971,"qqq_u_atr":0.00318692,"qqq_vol_z":-0.25191958,"range_ratio":0.00214316,"regime_agree":1.0,"ret_spread":-0.00019435,"rs_log":0.56753452,"same_bar_ambiguous":0.0,"sigma":0.00182548,"sigma_prank":0.354,"slip_half":0.00017501,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.68113507,"trend_score":2.03976587,"truncated_horizon":0.0,"u_atr":0.00237039,"u_atr_prank":0.3514386,"vol_z":-0.25497208},"mu":[11.87878788,0.00563272,0.00421831,0.65058081,0.00067354,-0.00475065,0.00032072,0.06060606,0.00029681,0.00399393,4.88888889,6.96969697,0.06156792,0.57875191,0.0,0.00038194,0.5186119,0.00337759,0.00276758,2.36126638,0.00368902,-0.18110037,0.00252275,0.88552189,-6e-05,0.57464964,0.0,0.00209764,0.40089098,0.00020677,8e-05,6.79124579,8.2172392,2.31862813,0.0,0.0028039,0.40008423,-0.20176494],"sd":[0.4772126,0.0028925,0.00217112,0.14503016,0.00016486,0.0074637,0.00064838,0.2386063,0.00033398,0.00162486,4.31165257,3.9178119,0.0108031,1.07622643,1.0,0.00086189,1.08739766,0.00212802,0.00116875,1.85188341,0.00171278,0.88114038,0.00171258,0.31839107,0.00124311,0.05550627,1.0,0.00099192,0.30299251,8.243e-05,1.0,3.66209873,3.17387517,1.51941586,1.0,0.00145034,0.28585431,0.86588909],"beta":[-8.86e-05,9.965e-05,0.00032138,0.00032387,-0.00041239,4.071e-05,-0.00015939,-0.00046527,-9.965e-05,0.00037691,0.00042329,-0.00045888,-0.00030087,-0.00031768,-0.00020032,0.0,0.0003304,-0.00024602,0.00057676,0.00050499,9.53e-06,-9.038e-05,-0.00024752,-3.449e-05,0.00041563,-0.00038164,-0.00044887,0.0,-0.0008793,0.00075418,4.071e-05,0.0,0.00082029,-0.0004087,7.666e-05,0.0,0.0003287,-0.00102701,0.00062895],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201901_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201901_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201901_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201901_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.2874807,0.39247534,0.39637254,0.4768677,0.48286088,0.53676675,0.54013143,0.65701612,0.66420135,0.70233553,0.70294068,0.85023463],"y_thresholds":[0.0,0.0,0.14285714,0.14285714,0.33333333,0.33333333,0.45454545,0.45454545,0.5,0.5,0.57142857,0.57142857]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.05909091,0.97471977],"y_thresholds":[0.36538462,0.36538462]},"uncertainty_calibration":{"u_q25":0.00804605,"u_q75":0.01107529},"nested_tuning_rows":[],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.74494009,"max_abs_z":2.32596597,"top_shift_features":[{"feature":"gap_tail","abs_z":2.32596597},{"feature":"sigma","abs_z":2.0835276},{"feature":"qqq_sigma","abs_z":2.08029481},{"feature":"a_tp","abs_z":1.78003276},{"feature":"b_sl","abs_z":1.77107515}]},"performance_drift":{"mean_abs_z":0.74494009,"recent_median_net_bps":-2.21664801,"recent_median_calmar":-5.92318243}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49158249,"global_ev":-8.86e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":73,"win_rate_raw":0.49315068,"ev_raw":-0.00017015,"win_rate_shrunk":0.49217564,"ev_shrunk":-0.00011945,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":1,"n":65,"win_rate_raw":0.49230769,"ev_raw":-6.475e-05,"win_rate_shrunk":0.49183729,"ev_shrunk":-8.022e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":2,"n":72,"win_rate_raw":0.47222222,"ev_raw":-0.00032633,"win_rate_shrunk":0.48432239,"ev_shrunk":-0.00017775,"ev_half_a":-0.00018887,"ev_half_b":-0.00041381,"consistency":0.94376462,"prob_delta":-0.00685183,"ev_delta":-0.00016775},{"cluster":3,"n":39,"win_rate_raw":0.53846154,"ev_raw":0.0009086,"win_rate_shrunk":0.50308113,"ev_shrunk":0.000156,"ev_half_a":0.0019272,"ev_half_b":-0.00040958,"consistency":0.10135254,"prob_delta":0.00116542,"ev_delta":1.581e-05},{"cluster":4,"n":32,"win_rate_raw":0.46875,"ev_raw":-0.0005796,"win_rate_shrunk":0.48677565,"ev_shrunk":-0.00019197,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":5,"n":16,"win_rate_raw":0.5,"ev_raw":-0.0001923,"win_rate_shrunk":0.49257279,"ev_shrunk":-0.0001008,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}