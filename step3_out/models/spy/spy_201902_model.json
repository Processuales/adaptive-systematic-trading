{"fold_id":"spy_201902","symbol":"SPY","test_start_utc":"2019-02-01 00:00:00+00:00","test_end_utc":"2019-03-01 00:00:00+00:00","n_train":358,"n_test":14,"n_trades_test":8,"policy_score_test":14.85978967,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-0.00019215,"agg_ev_cut":7.85e-06,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-0.00019215,"agg_ev_cut":7.85e-06,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00475361,"b_sl":0.00356521,"beta_proxy":0.67988358,"cost_rt":0.0006107,"dist_to_hi":-0.00257674,"ema_fast_slope":0.00030356,"entry_overnight":0.0,"gap_mu":0.0003615,"gap_sd":0.00326499,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038841,"qqq_pullback_z":0.63462757,"qqq_range_ratio":0.00275356,"qqq_sigma":0.00247137,"qqq_trend_score":2.28560118,"qqq_u_atr":0.00322029,"qqq_vol_z":-0.25191958,"range_ratio":0.00215002,"regime_agree":1.0,"ret_spread":-0.00018938,"rs_log":0.55513693,"same_bar_ambiguous":0.0,"sigma":0.00183725,"sigma_prank":0.342,"slip_half":0.00017535,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.7409071,"trend_score":2.1098373,"truncated_horizon":0.0,"u_atr":0.00237681,"u_atr_prank":0.345,"vol_z":-0.25458171},"mu":[11.87540984,0.00562816,0.00421458,0.65191719,0.00067303,-0.00470649,0.00032524,0.06229508,0.00030783,0.00401944,5.16393443,6.9704918,0.06149401,0.58505783,0.0,0.0003866,0.5235649,0.00339941,0.00276602,2.37529036,0.00369456,-0.17557516,0.00253105,0.88852459,-6.437e-05,0.57153929,0.0,0.00209421,0.39280859,0.00020651,8e-05,6.79016393,8.22100108,2.34366529,0.0,0.002801,0.39287725,-0.19780896],"sd":[0.48338144,0.00286039,0.0021469,0.14333854,0.00016359,0.00740011,0.00064619,0.24169072,0.00033687,0.00161084,4.50711761,3.92082896,0.01072172,1.07059216,1.0,0.00085907,1.08225761,0.00213329,0.00115619,1.83556009,0.00169312,0.89081484,0.00170228,0.31471994,0.00126136,0.05789329,1.0,0.00098132,0.30354901,8.179e-05,1.0,3.66219968,3.13976584,1.5164312,1.0,0.00143405,0.28632155,0.87270874],"beta":[0.48852459,-0.00948683,0.03285614,0.03267538,-0.04522456,-0.0366181,0.0136003,-0.04281576,0.00948683,-0.0004504,0.02816501,-0.02282423,-0.06744158,-0.01545566,-0.0172598,0.0,0.04012348,-0.03920829,0.02701377,0.03840201,0.03085643,0.028442,-0.02413144,-0.05661681,0.01708758,-0.00625256,-0.03259329,0.0,-0.00826861,0.12551895,-0.0366181,0.0,0.10259238,-0.03792239,0.0166618,0.0,0.03230006,-0.09447367,0.07196176],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00475361,"b_sl":0.00356521,"beta_proxy":0.67988358,"cost_rt":0.0006107,"dist_to_hi":-0.00257674,"ema_fast_slope":0.00030356,"entry_overnight":0.0,"gap_mu":0.0003615,"gap_sd":0.00326499,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038841,"qqq_pullback_z":0.63462757,"qqq_range_ratio":0.00275356,"qqq_sigma":0.00247137,"qqq_trend_score":2.28560118,"qqq_u_atr":0.00322029,"qqq_vol_z":-0.25191958,"range_ratio":0.00215002,"regime_agree":1.0,"ret_spread":-0.00018938,"rs_log":0.55513693,"same_bar_ambiguous":0.0,"sigma":0.00183725,"sigma_prank":0.342,"slip_half":0.00017535,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.7409071,"trend_score":2.1098373,"truncated_horizon":0.0,"u_atr":0.00237681,"u_atr_prank":0.345,"vol_z":-0.25458171},"mu":[11.87540984,0.00562816,0.00421458,0.65191719,0.00067303,-0.00470649,0.00032524,0.06229508,0.00030783,0.00401944,5.16393443,6.9704918,0.06149401,0.58505783,0.0,0.0003866,0.5235649,0.00339941,0.00276602,2.37529036,0.00369456,-0.17557516,0.00253105,0.88852459,-6.437e-05,0.57153929,0.0,0.00209421,0.39280859,0.00020651,8e-05,6.79016393,8.22100108,2.34366529,0.0,0.002801,0.39287725,-0.19780896],"sd":[0.48338144,0.00286039,0.0021469,0.14333854,0.00016359,0.00740011,0.00064619,0.24169072,0.00033687,0.00161084,4.50711761,3.92082896,0.01072172,1.07059216,1.0,0.00085907,1.08225761,0.00213329,0.00115619,1.83556009,0.00169312,0.89081484,0.00170228,0.31471994,0.00126136,0.05789329,1.0,0.00098132,0.30354901,8.179e-05,1.0,3.66219968,3.13976584,1.5164312,1.0,0.00143405,0.28632155,0.87270874],"beta":[-9.049e-05,5.113e-05,0.00029986,0.00029555,-0.00045583,1.954e-05,-0.00020564,-0.00047025,-5.113e-05,0.00034992,0.00035025,-0.00052846,-0.00022927,-0.00029412,-0.00012923,0.0,0.00037639,-0.00030573,0.00044389,0.00050359,-2.302e-05,-0.00012951,-0.00034753,0.00012444,0.00040537,-0.00034747,-0.00043086,0.0,-0.00072891,0.00068152,1.954e-05,0.0,0.00072702,-0.00036672,5.434e-05,0.0,0.00028682,-0.00090226,0.00065182],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201902_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201902_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201902_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201902_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.36934799,0.39745955,0.40225166,0.61526297,0.62479857,0.82416972],"y_thresholds":[0.0,0.0,0.39285714,0.39285714,0.54545455,0.54545455]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.05909091,0.9496095],"y_thresholds":[0.43396226,0.43396226]},"uncertainty_calibration":{"u_q25":0.00834188,"u_q75":0.01656359},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":4.58900747,"policy_score":4.87940225,"brier":0.37514727,"rmse":0.00451716,"n_val":51},{"cfg_name":"tree_heavy","inner_split":2,"score":4.52538796,"policy_score":4.73152028,"brier":0.26198235,"rmse":0.00482278,"n_val":51},{"cfg_name":"tree_stable","inner_split":1,"score":14.68121154,"policy_score":14.94250449,"brier":0.33625106,"rmse":0.00455233,"n_val":51},{"cfg_name":"tree_stable","inner_split":2,"score":6.19580552,"policy_score":6.40096412,"brier":0.26058919,"rmse":0.00485835,"n_val":51},{"cfg_name":"blend_conservative","inner_split":1,"score":-1.20358365,"policy_score":-0.90391877,"brier":0.38822187,"rmse":0.00424924,"n_val":51},{"cfg_name":"blend_conservative","inner_split":2,"score":1.36959498,"policy_score":1.59275962,"brier":0.28430655,"rmse":0.00496736,"n_val":51},{"selected_cfg":"tree_stable","nested_score":10.43850853}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.3700032,"max_abs_z":2.17965221,"top_shift_features":[{"feature":"gap_tail","abs_z":2.17965221},{"feature":"gap_sd","abs_z":1.41414192},{"feature":"intraday_tail_frac","abs_z":1.3006582},{"feature":"rs_log","abs_z":1.21071307},{"feature":"sigma_prank","abs_z":1.104631}]},"performance_drift":{"mean_abs_z":0.3700032,"recent_median_net_bps":14.6414641,"recent_median_calmar":-5.92318243}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48852459,"global_ev":-9.049e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":99,"win_rate_raw":0.49494949,"ev_raw":-3.572e-05,"win_rate_shrunk":0.491429,"ev_shrunk":-6.573e-05,"ev_half_a":-0.00018835,"ev_half_b":3.387e-05,"consistency":0.2361114,"prob_delta":0.00068576,"ev_delta":-1.552e-05},{"cluster":1,"n":17,"win_rate_raw":0.52941176,"ev_raw":0.00011086,"win_rate_shrunk":0.49359818,"ev_shrunk":-6.55e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":2,"n":46,"win_rate_raw":0.5,"ev_raw":0.00064459,"win_rate_shrunk":0.49170452,"ev_shrunk":0.00011321,"ev_half_a":0.00123576,"ev_half_b":-0.0001955,"consistency":0.16054651,"prob_delta":0.00051053,"ev_delta":1.817e-05},{"cluster":3,"n":33,"win_rate_raw":0.45454545,"ev_raw":-0.00068325,"win_rate_shrunk":0.48119576,"ev_shrunk":-0.00021834,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":4,"n":59,"win_rate_raw":0.47457627,"ev_raw":-8.761e-05,"win_rate_shrunk":0.4839271,"ev_shrunk":-8.954e-05,"ev_half_a":-0.00054244,"ev_half_b":0.00018283,"consistency":0.20467092,"prob_delta":-0.00094097,"ev_delta":-1.833e-05},{"cluster":5,"n":51,"win_rate_raw":0.49019608,"ev_raw":-0.00054672,"win_rate_shrunk":0.4890231,"ev_shrunk":-0.00022656,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}