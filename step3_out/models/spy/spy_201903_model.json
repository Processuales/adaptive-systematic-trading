{"fold_id":"spy_201903","symbol":"SPY","test_start_utc":"2019-03-01 00:00:00+00:00","test_end_utc":"2019-04-01 00:00:00+00:00","n_train":374,"n_test":12,"n_trades_test":8,"policy_score_test":32.55715123,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-0.00019215,"agg_ev_cut":7.85e-06,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-0.00019215,"agg_ev_cut":7.85e-06,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00474804,"b_sl":0.00356103,"beta_proxy":0.66838907,"cost_rt":0.00060873,"dist_to_hi":-0.00252831,"ema_fast_slope":0.0003056,"entry_overnight":0.0,"gap_mu":0.00037014,"gap_sd":0.00333788,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65835352,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038598,"qqq_pullback_z":0.63119062,"qqq_range_ratio":0.00275618,"qqq_sigma":0.00247856,"qqq_trend_score":2.28749512,"qqq_u_atr":0.00322966,"qqq_vol_z":-0.25541713,"range_ratio":0.00215662,"regime_agree":1.0,"ret_spread":-0.00017157,"rs_log":0.55206642,"same_bar_ambiguous":0.0,"sigma":0.00182379,"sigma_prank":0.318,"slip_half":0.00017436,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.69852555,"trend_score":2.14047193,"truncated_horizon":0.0,"u_atr":0.00237402,"u_atr_prank":0.328,"vol_z":-0.25445295},"mu":[11.87421384,0.00558824,0.00418451,0.65035069,0.00067064,-0.00460848,0.00032487,0.06289308,0.00031655,0.00406085,5.39622642,6.99056604,0.06166878,0.58898129,0.0,0.0003802,0.51261735,0.00341228,0.00277137,2.36809514,0.00370331,-0.1791702,0.00251133,0.88993711,-4.34e-06,0.56652904,0.0,0.00207872,0.38041704,0.00020532,8e-05,6.81132075,8.19478718,2.35478087,0.0,0.00278079,0.38206466,-0.2085202],"sd":[0.48554111,0.00281366,0.00211175,0.14082486,0.00016154,0.0072952,0.00063963,0.24277055,0.0003328,0.00158867,4.58260159,3.91536712,0.01060757,1.06544791,1.0,0.00086057,1.08044874,0.00211156,0.00114398,1.82469092,0.00166916,0.89451125,0.00167538,0.31296813,0.00143032,0.0616649,1.0,0.00096558,0.30283903,8.077e-05,0.0,3.65865874,3.08681003,1.50523187,1.0,0.00141051,0.28589528,0.87396878],"beta":[0.48113208,-0.01547677,0.03478292,0.03397861,-0.04240751,-0.03692703,0.01170308,-0.04329017,0.01547677,0.01467648,0.01720446,-0.00712149,-0.0780118,-0.01408541,-0.00733371,0.0,0.05042029,-0.05025123,0.03110098,0.02518271,0.02260583,0.02730471,-0.02704698,-0.05319622,0.02843567,-0.02670481,0.01194434,0.0,-0.01535125,0.12918497,-0.03692703,0.0,0.10173445,-0.04140138,0.00721383,0.0,0.03235792,-0.08568048,0.06804783],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00474804,"b_sl":0.00356103,"beta_proxy":0.66838907,"cost_rt":0.00060873,"dist_to_hi":-0.00252831,"ema_fast_slope":0.0003056,"entry_overnight":0.0,"gap_mu":0.00037014,"gap_sd":0.00333788,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65835352,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038598,"qqq_pullback_z":0.63119062,"qqq_range_ratio":0.00275618,"qqq_sigma":0.00247856,"qqq_trend_score":2.28749512,"qqq_u_atr":0.00322966,"qqq_vol_z":-0.25541713,"range_ratio":0.00215662,"regime_agree":1.0,"ret_spread":-0.00017157,"rs_log":0.55206642,"same_bar_ambiguous":0.0,"sigma":0.00182379,"sigma_prank":0.318,"slip_half":0.00017436,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.69852555,"trend_score":2.14047193,"truncated_horizon":0.0,"u_atr":0.00237402,"u_atr_prank":0.328,"vol_z":-0.25445295},"mu":[11.87421384,0.00558824,0.00418451,0.65035069,0.00067064,-0.00460848,0.00032487,0.06289308,0.00031655,0.00406085,5.39622642,6.99056604,0.06166878,0.58898129,0.0,0.0003802,0.51261735,0.00341228,0.00277137,2.36809514,0.00370331,-0.1791702,0.00251133,0.88993711,-4.34e-06,0.56652904,0.0,0.00207872,0.38041704,0.00020532,8e-05,6.81132075,8.19478718,2.35478087,0.0,0.00278079,0.38206466,-0.2085202],"sd":[0.48554111,0.00281366,0.00211175,0.14082486,0.00016154,0.0072952,0.00063963,0.24277055,0.0003328,0.00158867,4.58260159,3.91536712,0.01060757,1.06544791,1.0,0.00086057,1.08044874,0.00211156,0.00114398,1.82469092,0.00166916,0.89451125,0.00167538,0.31296813,0.00143032,0.0616649,1.0,0.00096558,0.30283903,8.077e-05,0.0,3.65865874,3.08681003,1.50523187,1.0,0.00141051,0.28589528,0.87396878],"beta":[-0.00014069,1.633e-05,0.00031666,0.00030938,-0.00040638,2.198e-05,-0.00017832,-0.00045697,-1.633e-05,0.00045278,0.00029938,-0.00027083,-0.00025101,-0.00020504,-8.067e-05,0.0,0.00045635,-0.0003892,0.00045559,0.00031623,-9.724e-05,-0.00017995,-0.00040886,0.00016513,0.00048546,-0.00066042,-4.156e-05,0.0,-0.00076675,0.00069266,2.198e-05,0.0,0.00063523,-0.00037716,-2.962e-05,0.0,0.00029473,-0.00083909,0.00069911],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201903_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201903_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201903_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201903_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.32295569,0.36068042,0.37853268,0.57305761,0.59720164,0.70326395,0.71651335,0.83193893],"y_thresholds":[0.0,0.0,0.52631579,0.52631579,0.55555556,0.55555556,0.71428571,0.71428571]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.03421053,0.11019825,0.1194911,0.99987],"y_thresholds":[0.35714286,0.35714286,0.5952381,0.5952381]},"uncertainty_calibration":{"u_q25":0.00864171,"u_q75":0.01876751},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.3428982,"max_abs_z":1.93898147,"top_shift_features":[{"feature":"gap_tail","abs_z":1.93898147},{"feature":"gap_sd","abs_z":1.39559812},{"feature":"rs_log","abs_z":1.39505893},{"feature":"range_ratio","abs_z":0.70215557},{"feature":"beta_proxy","abs_z":0.6038198}]},"performance_drift":{"mean_abs_z":0.3428982,"recent_median_net_bps":13.47810758,"recent_median_calmar":4.1089324}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48113208,"global_ev":-0.00014069,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":35,"win_rate_raw":0.54285714,"ev_raw":0.00106849,"win_rate_shrunk":0.49506999,"ev_shrunk":0.00013235,"ev_half_a":0.00294677,"ev_half_b":-0.00211013,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":105,"win_rate_raw":0.4,"ev_raw":-0.00057116,"win_rate_shrunk":0.44327044,"ev_shrunk":-0.00034158,"ev_half_a":-0.00064703,"ev_half_b":-0.00041271,"consistency":0.94141955,"prob_delta":-0.03564368,"ev_delta":-0.00032157},{"cluster":2,"n":32,"win_rate_raw":0.4375,"ev_raw":-0.00040704,"win_rate_shrunk":0.47194638,"ev_shrunk":-0.00019676,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":3,"n":55,"win_rate_raw":0.47272727,"ev_raw":-0.00062354,"win_rate_shrunk":0.47849057,"ev_shrunk":-0.00029244,"ev_half_a":-0.00116781,"ev_half_b":0.00059306,"consistency":0.13994589,"prob_delta":-0.00036967,"ev_delta":-4.093e-05},{"cluster":4,"n":73,"win_rate_raw":0.57534247,"ev_raw":0.00026105,"win_rate_shrunk":0.51676606,"ev_shrunk":1.126e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":18,"win_rate_raw":0.55555556,"ev_raw":0.00033879,"win_rate_shrunk":0.49083949,"ev_shrunk":-7.815e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}