{"fold_id":"spy_201904","symbol":"SPY","test_start_utc":"2019-04-01 00:00:00+00:00","test_end_utc":"2019-05-01 00:00:00+00:00","n_train":389,"n_test":15,"n_trades_test":8,"policy_score_test":42.47972737,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.0002198,"agg_ev_cut":-1.98e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.0002198,"agg_ev_cut":-1.98e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.0047186,"b_sl":0.00353895,"beta_proxy":0.66059154,"cost_rt":0.00060695,"dist_to_hi":-0.00253255,"ema_fast_slope":0.0003054,"entry_overnight":0.0,"gap_mu":0.00037722,"gap_sd":0.00343592,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00039084,"qqq_pullback_z":0.63806453,"qqq_range_ratio":0.00271754,"qqq_sigma":0.00249596,"qqq_trend_score":2.27566104,"qqq_u_atr":0.00324662,"qqq_vol_z":-0.26382082,"range_ratio":0.00213049,"regime_agree":1.0,"ret_spread":-0.00018919,"rs_log":0.54990598,"same_bar_ambiguous":0.0,"sigma":0.00182446,"sigma_prank":0.318,"slip_half":0.00017347,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.65680452,"trend_score":2.16110477,"truncated_horizon":0.0,"u_atr":0.0023593,"u_atr_prank":0.319,"vol_z":-0.25458171},"mu":[11.87915408,0.00554586,0.00415299,0.64595446,0.00066783,-0.0045524,0.00032041,0.06042296,0.00032641,0.00407873,5.36555891,6.96676737,0.06119539,0.58333408,0.0,0.00038425,0.52289693,0.00338241,0.00276857,2.35496893,0.00369662,-0.19654946,0.00248291,0.88217523,-1.38e-05,0.56231893,0.0,0.00206744,0.37737347,0.00020392,8e-05,6.78851964,8.16772799,2.35062369,0.0,0.00276012,0.37741257,-0.21231145],"sd":[0.47653762,0.00276933,0.00207837,0.13966339,0.00015902,0.00717872,0.00063539,0.23826881,0.00032993,0.00155803,4.50067715,3.89927348,0.01068912,1.06661463,1.0,0.00085439,1.07950154,0.00209153,0.00112368,1.83259912,0.00164265,0.8911627,0.00165699,0.32240052,0.00141378,0.06414124,1.0,0.00094938,0.29891709,7.951e-05,1.0,3.64148486,3.03475195,1.49748095,1.0,0.00138806,0.2835841,0.86893839],"beta":[0.47734139,-0.02070307,0.03592283,0.03533554,-0.03400556,-0.04098588,0.01370046,-0.05360142,0.02070307,0.02143959,0.01759724,0.01589439,-0.0921361,-0.00989352,0.02145445,0.0,0.05959336,-0.06499821,0.02901947,0.02045782,0.01766953,0.04211109,-0.02644541,-0.03863313,0.03044033,-0.02409592,0.04547211,0.0,-0.03383613,0.1269742,-0.04098588,0.0,0.12304674,-0.06074358,-0.00167674,0.0,0.034147,-0.06819047,0.04758766],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.0047186,"b_sl":0.00353895,"beta_proxy":0.66059154,"cost_rt":0.00060695,"dist_to_hi":-0.00253255,"ema_fast_slope":0.0003054,"entry_overnight":0.0,"gap_mu":0.00037722,"gap_sd":0.00343592,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00039084,"qqq_pullback_z":0.63806453,"qqq_range_ratio":0.00271754,"qqq_sigma":0.00249596,"qqq_trend_score":2.27566104,"qqq_u_atr":0.00324662,"qqq_vol_z":-0.26382082,"range_ratio":0.00213049,"regime_agree":1.0,"ret_spread":-0.00018919,"rs_log":0.54990598,"same_bar_ambiguous":0.0,"sigma":0.00182446,"sigma_prank":0.318,"slip_half":0.00017347,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.65680452,"trend_score":2.16110477,"truncated_horizon":0.0,"u_atr":0.0023593,"u_atr_prank":0.319,"vol_z":-0.25458171},"mu":[11.87915408,0.00554586,0.00415299,0.64595446,0.00066783,-0.0045524,0.00032041,0.06042296,0.00032641,0.00407873,5.36555891,6.96676737,0.06119539,0.58333408,0.0,0.00038425,0.52289693,0.00338241,0.00276857,2.35496893,0.00369662,-0.19654946,0.00248291,0.88217523,-1.38e-05,0.56231893,0.0,0.00206744,0.37737347,0.00020392,8e-05,6.78851964,8.16772799,2.35062369,0.0,0.00276012,0.37741257,-0.21231145],"sd":[0.47653762,0.00276933,0.00207837,0.13966339,0.00015902,0.00717872,0.00063539,0.23826881,0.00032993,0.00155803,4.50067715,3.89927348,0.01068912,1.06661463,1.0,0.00085439,1.07950154,0.00209153,0.00112368,1.83259912,0.00164265,0.8911627,0.00165699,0.32240052,0.00141378,0.06414124,1.0,0.00094938,0.29891709,7.951e-05,1.0,3.64148486,3.03475195,1.49748095,1.0,0.00138806,0.2835841,0.86893839],"beta":[-0.00016592,-2.262e-05,0.00036088,0.00035357,-0.00034784,7.18e-06,-0.00016322,-0.0004492,2.262e-05,0.00052332,0.0002842,-3.84e-06,-0.00032715,-0.00015043,0.0001072,0.0,0.00043118,-0.00047444,0.00043049,0.00034324,-0.00013985,-0.00020267,-0.00040249,0.00028413,0.00050991,-0.0006402,0.00032209,0.0,-0.00101229,0.00071659,7.18e-06,0.0,0.00074988,-0.00050708,-0.00010222,0.0,0.00033882,-0.00074384,0.00050539],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201904_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201904_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201904_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201904_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.22749837,0.22909485,0.32806756,0.35365766,0.36159609,0.41391385,0.61701775,0.6299792,0.70456735,0.71220419,0.76112503,0.76146122,0.84478486,0.85823855,0.86993011],"y_thresholds":[0.0,0.14285714,0.14285714,0.33333333,0.33333333,0.47368421,0.47368421,0.5,0.5,0.7,0.7,0.85714286,0.85714286,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.10476048,0.13305451,0.25894104,0.26049035,0.96875126],"y_thresholds":[0.38461538,0.38461538,0.4,0.4,0.6,0.6]},"uncertainty_calibration":{"u_q25":0.00984377,"u_q75":0.01740805},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":0.71987218,"policy_score":0.93525518,"brier":0.2743573,"rmse":0.00480751,"n_val":55},{"cfg_name":"tree_heavy","inner_split":2,"score":-2.21259504,"policy_score":-1.93291125,"brier":0.35366257,"rmse":0.00721843,"n_val":55},{"cfg_name":"tree_stable","inner_split":1,"score":0.10942798,"policy_score":0.32290115,"brier":0.2717262,"rmse":0.00483926,"n_val":55},{"cfg_name":"tree_stable","inner_split":2,"score":-3.17987224,"policy_score":-2.90068876,"brier":0.35278094,"rmse":0.00729889,"n_val":55},{"cfg_name":"blend_conservative","inner_split":1,"score":0.39967704,"policy_score":0.62963456,"brier":0.29380384,"rmse":0.00480232,"n_val":55},{"cfg_name":"blend_conservative","inner_split":2,"score":-2.37102272,"policy_score":-2.098658,"brier":0.34331091,"rmse":0.00744077,"n_val":55},{"selected_cfg":"tree_heavy","nested_score":-0.74636143}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.41317854,"max_abs_z":1.61695391,"top_shift_features":[{"feature":"rs_log","abs_z":1.61695391},{"feature":"gap_tail","abs_z":1.25222549},{"feature":"gap_sd","abs_z":1.17948666},{"feature":"sigma_prank","abs_z":0.92937998},{"feature":"u_atr_prank","abs_z":0.87447764}]},"performance_drift":{"mean_abs_z":0.41317854,"recent_median_net_bps":19.4204978,"recent_median_calmar":14.14104723}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.47734139,"global_ev":-0.00016592,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":18,"win_rate_raw":0.55555556,"ev_raw":0.00033879,"win_rate_shrunk":0.48754324,"ev_shrunk":-0.00010009,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":1,"n":48,"win_rate_raw":0.52083333,"ev_raw":0.00094738,"win_rate_shrunk":0.48976766,"ev_shrunk":0.00015217,"ev_half_a":0.00194087,"ev_half_b":-0.0004435,"consistency":0.10097638,"prob_delta":0.00125476,"ev_delta":1.537e-05},{"cluster":2,"n":97,"win_rate_raw":0.40206186,"ev_raw":-0.0007047,"win_rate_shrunk":0.44369109,"ev_shrunk":-0.00040676,"ev_half_a":-0.00043626,"ev_half_b":-0.00086313,"consistency":0.89328156,"prob_delta":-0.03005919,"ev_delta":-0.00036335},{"cluster":3,"n":61,"win_rate_raw":0.54098361,"ev_raw":0.00031398,"win_rate_shrunk":0.49878987,"ev_shrunk":-4.19e-06,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":70,"win_rate_raw":0.48571429,"ev_raw":-0.00048136,"win_rate_shrunk":0.48042614,"ev_shrunk":-0.00028214,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":5,"n":37,"win_rate_raw":0.45945946,"ev_raw":-0.00063765,"win_rate_shrunk":0.47312718,"ev_shrunk":-0.00027709,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}