{"fold_id":"spy_201905","symbol":"SPY","test_start_utc":"2019-05-01 00:00:00+00:00","test_end_utc":"2019-06-01 00:00:00+00:00","n_train":401,"n_test":6,"n_trades_test":3,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.0002198,"agg_ev_cut":-1.98e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.0002198,"agg_ev_cut":-1.98e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.0046978,"b_sl":0.00352335,"beta_proxy":0.65257342,"cost_rt":0.00060661,"dist_to_hi":-0.00259158,"ema_fast_slope":0.00030356,"entry_overnight":0.0,"gap_mu":0.00038246,"gap_sd":0.00344199,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64528577,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00037882,"qqq_pullback_z":0.62014574,"qqq_range_ratio":0.00276361,"qqq_sigma":0.00253004,"qqq_trend_score":2.2436347,"qqq_u_atr":0.00327545,"qqq_vol_z":-0.25541713,"range_ratio":0.00213049,"regime_agree":1.0,"ret_spread":-0.00017158,"rs_log":0.54845743,"same_bar_ambiguous":0.0,"sigma":0.00181883,"sigma_prank":0.318,"slip_half":0.0001733,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.65680452,"trend_score":2.04647205,"truncated_horizon":0.0,"u_atr":0.0023489,"u_atr_prank":0.324,"vol_z":-0.25358458},"mu":[11.88269795,0.00556707,0.00416909,0.64283354,0.00066884,-0.00471842,0.00031498,0.05865103,0.00032865,0.00407231,5.27272727,6.95894428,0.06111634,0.5720296,0.0,0.00037569,0.50597163,0.00342661,0.00279592,2.31387194,0.00373915,-0.18591587,0.0024939,0.8856305,-1.174e-05,0.55926609,0.0,0.00207782,0.37942117,0.00020442,8e-05,6.78005865,8.17821317,2.31732827,0.0,0.00277111,0.38007789,-0.20757686],"sd":[0.46994078,0.00279999,0.00210135,0.13913417,0.00016272,0.0073836,0.00063524,0.23497039,0.00032546,0.00153704,4.48772727,3.92279795,0.01071384,1.07488015,1.0,0.00085877,1.08421663,0.00210895,0.0011605,1.8247601,0.00167448,0.88963639,0.00167463,0.31825951,0.00144322,0.06558921,1.0,0.00097257,0.29809953,8.136e-05,1.0,3.66504628,3.01528908,1.49459166,1.0,0.00140335,0.28237656,0.86242477],"beta":[0.47507331,-0.02233783,0.03134193,0.03116858,-0.03859596,-0.04498416,0.0098721,-0.04521847,0.02233783,0.02354549,0.02546738,0.03189324,-0.08589718,-0.00827744,0.01857415,0.0,0.04051429,-0.05417019,0.01890513,0.01382601,0.01829916,0.04152982,-0.01740921,-0.01790929,0.02819594,-0.03706297,0.05997775,0.0,-0.03284906,0.12151266,-0.04498416,0.0,0.12969646,-0.05498783,-0.0020135,0.0,0.03080857,-0.06031161,0.03914909],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.0046978,"b_sl":0.00352335,"beta_proxy":0.65257342,"cost_rt":0.00060661,"dist_to_hi":-0.00259158,"ema_fast_slope":0.00030356,"entry_overnight":0.0,"gap_mu":0.00038246,"gap_sd":0.00344199,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64528577,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00037882,"qqq_pullback_z":0.62014574,"qqq_range_ratio":0.00276361,"qqq_sigma":0.00253004,"qqq_trend_score":2.2436347,"qqq_u_atr":0.00327545,"qqq_vol_z":-0.25541713,"range_ratio":0.00213049,"regime_agree":1.0,"ret_spread":-0.00017158,"rs_log":0.54845743,"same_bar_ambiguous":0.0,"sigma":0.00181883,"sigma_prank":0.318,"slip_half":0.0001733,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.65680452,"trend_score":2.04647205,"truncated_horizon":0.0,"u_atr":0.0023489,"u_atr_prank":0.324,"vol_z":-0.25358458},"mu":[11.88269795,0.00556707,0.00416909,0.64283354,0.00066884,-0.00471842,0.00031498,0.05865103,0.00032865,0.00407231,5.27272727,6.95894428,0.06111634,0.5720296,0.0,0.00037569,0.50597163,0.00342661,0.00279592,2.31387194,0.00373915,-0.18591587,0.0024939,0.8856305,-1.174e-05,0.55926609,0.0,0.00207782,0.37942117,0.00020442,8e-05,6.78005865,8.17821317,2.31732827,0.0,0.00277111,0.38007789,-0.20757686],"sd":[0.46994078,0.00279999,0.00210135,0.13913417,0.00016272,0.0073836,0.00063524,0.23497039,0.00032546,0.00153704,4.48772727,3.92279795,0.01071384,1.07488015,1.0,0.00085877,1.08421663,0.00210895,0.0011605,1.8247601,0.00167448,0.88963639,0.00167463,0.31825951,0.00144322,0.06558921,1.0,0.00097257,0.29809953,8.136e-05,1.0,3.66504628,3.01528908,1.49459166,1.0,0.00140335,0.28237656,0.86242477],"beta":[-0.00018991,-7.089e-05,0.00035977,0.00035454,-0.00040668,-0.00010063,-0.00019388,-0.00038619,7.089e-05,0.00057878,0.0003932,0.0002042,-0.00023454,-0.00012387,0.00016918,0.0,0.00014717,-0.00034167,0.00033463,0.00032898,-0.00010076,-0.00049058,-0.00030408,0.00056212,0.00042512,-0.00069912,0.00052565,0.0,-0.00101914,0.00083457,-0.00010063,0.0,0.00074794,-0.00033866,-0.00013303,0.0,0.00034396,-0.00076963,0.0004471],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201905_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201905_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201905_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201905_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.16215993,0.26790772,0.28321729,0.36450207,0.3747537,0.51317363,0.52056297,0.54818254,0.56718373,0.72429126,0.72919587,0.84128676,0.84295058,0.86335322],"y_thresholds":[0.25,0.25,0.33333333,0.33333333,0.46153846,0.46153846,0.5,0.5,0.63157895,0.63157895,0.90909091,0.90909091,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.43346592,0.4439466,0.51327853,0.52105263,0.675,0.68145686,0.88181818,0.9506501],"y_thresholds":[0.4,0.4,0.66666667,0.66666667,0.8,0.8,0.875,0.875,1.0]},"uncertainty_calibration":{"u_q25":0.00985711,"u_q75":0.01717125},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.57196422,"max_abs_z":1.58530873,"top_shift_features":[{"feature":"rs_log","abs_z":1.58530873},{"feature":"touch_delay_bars","abs_z":1.43623007},{"feature":"hold_bars","abs_z":1.38915222},{"feature":"cost_rt","abs_z":1.34106284},{"feature":"slip_half","abs_z":1.34106284}]},"performance_drift":{"mean_abs_z":0.57196422,"recent_median_net_bps":22.77553384,"recent_median_calmar":31.78091609}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.47507331,"global_ev":-0.00018991,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":45,"win_rate_raw":0.55555556,"ev_raw":0.0011538,"win_rate_shrunk":0.49702302,"ev_shrunk":0.00017655,"ev_half_a":0.0021145,"ev_half_b":-4.708e-05,"consistency":0.11490095,"prob_delta":0.00252204,"ev_delta":2.029e-05},{"cluster":1,"n":37,"win_rate_raw":0.43243243,"ev_raw":-0.00084844,"win_rate_shrunk":0.46502419,"ev_shrunk":-0.00034511,"ev_half_a":-0.00146952,"ev_half_b":-0.00051201,"consistency":0.70357525,"prob_delta":-0.00707032,"ev_delta":-0.00024281},{"cluster":2,"n":78,"win_rate_raw":0.47435897,"ev_raw":-5.857e-05,"win_rate_shrunk":0.47479191,"ev_shrunk":-0.00013817,"ev_half_a":-0.00153748,"ev_half_b":0.00072438,"consistency":0.10863367,"prob_delta":-3.057e-05,"ev_delta":-1.501e-05},{"cluster":3,"n":18,"win_rate_raw":0.55555556,"ev_raw":0.00033879,"win_rate_shrunk":0.485571,"ev_shrunk":-0.00012095,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":59,"win_rate_raw":0.49152542,"ev_raw":-0.00050768,"win_rate_shrunk":0.48049608,"ev_shrunk":-0.00029465,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":5,"n":104,"win_rate_raw":0.43269231,"ev_raw":-0.00054678,"win_rate_shrunk":0.45539642,"ev_shrunk":-0.0003556,"ev_half_a":-0.00018272,"ev_half_b":-0.00078371,"consistency":0.84975328,"prob_delta":-0.01672051,"ev_delta":-0.00030217}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}