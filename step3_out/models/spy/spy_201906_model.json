{"fold_id":"spy_201906","symbol":"SPY","test_start_utc":"2019-06-01 00:00:00+00:00","test_end_utc":"2019-07-01 00:00:00+00:00","n_train":412,"n_test":9,"n_trades_test":3,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00012827,"agg_ev_cut":0.00032827,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00012827,"agg_ev_cut":0.00032827,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00475361,"b_sl":0.00356521,"beta_proxy":0.66059154,"cost_rt":0.00061001,"dist_to_hi":-0.00270625,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.00037756,"gap_sd":0.00362553,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038598,"qqq_pullback_z":0.61922745,"qqq_range_ratio":0.00283142,"qqq_sigma":0.00254891,"qqq_trend_score":2.19079935,"qqq_u_atr":0.00334597,"qqq_vol_z":-0.25994489,"range_ratio":0.00216535,"regime_agree":1.0,"ret_spread":-0.00017157,"rs_log":0.54540043,"same_bar_ambiguous":0.0,"sigma":0.00183726,"sigma_prank":0.338,"slip_half":0.00017501,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.74265807,"trend_score":2.04509883,"truncated_horizon":0.0,"u_atr":0.00237681,"u_atr_prank":0.339,"vol_z":-0.25358458},"mu":[11.87464387,0.00573563,0.00429396,0.64433729,0.00067757,-0.00532556,0.00031751,0.06267806,0.00032756,0.00410071,5.4017094,6.94301994,0.06138368,0.56510968,0.0,0.00037537,0.49810878,0.00351602,0.0028938,2.2853502,0.00385082,-0.19009951,0.00255964,0.88603989,-4.47e-06,0.55709026,0.0,0.00214837,0.39053738,0.00020879,8e-05,6.76638177,8.28388259,2.30543295,0.0,0.0028523,0.38965687,-0.20216949],"sd":[0.48476602,0.00298267,0.00223367,0.13765901,0.00017485,0.00888325,0.00067267,0.24238301,0.00032143,0.00152211,4.51031075,3.91099713,0.01076426,1.07841088,1.0,0.00091546,1.08737621,0.00216745,0.00129808,1.81831466,0.00178703,0.88229868,0.00171311,0.31776281,0.0014465,0.06587557,1.0,0.00107182,0.29994639,8.743e-05,1.0,3.654932,3.05129631,1.48958869,1.0,0.00148573,0.2832391,0.85844251],"beta":[0.47293447,-0.01738482,0.01893567,0.02397379,-0.04524604,-0.03349614,-0.00065962,-0.01146384,0.01738482,0.02445306,0.02452427,0.03423635,-0.05812486,-0.01282771,0.00108315,0.0,0.06042395,-0.07082872,0.02456909,0.00524481,0.01071161,0.02370198,-0.01727255,-0.01703623,0.03235988,-0.04069723,0.06345051,0.0,-0.0441998,0.10873697,-0.03349614,0.0,0.10523346,-0.04289241,-0.00457188,0.0,0.03407086,-0.0585617,0.03775309],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00475361,"b_sl":0.00356521,"beta_proxy":0.66059154,"cost_rt":0.00061001,"dist_to_hi":-0.00270625,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.00037756,"gap_sd":0.00362553,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038598,"qqq_pullback_z":0.61922745,"qqq_range_ratio":0.00283142,"qqq_sigma":0.00254891,"qqq_trend_score":2.19079935,"qqq_u_atr":0.00334597,"qqq_vol_z":-0.25994489,"range_ratio":0.00216535,"regime_agree":1.0,"ret_spread":-0.00017157,"rs_log":0.54540043,"same_bar_ambiguous":0.0,"sigma":0.00183726,"sigma_prank":0.338,"slip_half":0.00017501,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.74265807,"trend_score":2.04509883,"truncated_horizon":0.0,"u_atr":0.00237681,"u_atr_prank":0.339,"vol_z":-0.25358458},"mu":[11.87464387,0.00573563,0.00429396,0.64433729,0.00067757,-0.00532556,0.00031751,0.06267806,0.00032756,0.00410071,5.4017094,6.94301994,0.06138368,0.56510968,0.0,0.00037537,0.49810878,0.00351602,0.0028938,2.2853502,0.00385082,-0.19009951,0.00255964,0.88603989,-4.47e-06,0.55709026,0.0,0.00214837,0.39053738,0.00020879,8e-05,6.76638177,8.28388259,2.30543295,0.0,0.0028523,0.38965687,-0.20216949],"sd":[0.48476602,0.00298267,0.00223367,0.13765901,0.00017485,0.00888325,0.00067267,0.24238301,0.00032143,0.00152211,4.51031075,3.91099713,0.01076426,1.07841088,1.0,0.00091546,1.08737621,0.00216745,0.00129808,1.81831466,0.00178703,0.88229868,0.00171311,0.31776281,0.0014465,0.06587557,1.0,0.00107182,0.29994639,8.743e-05,1.0,3.654932,3.05129631,1.48958869,1.0,0.00148573,0.2832391,0.85844251],"beta":[-0.00031838,7.071e-05,0.00012403,0.00023795,-0.00046662,0.00022626,-0.00040934,0.00053927,-7.071e-05,0.00078457,0.000368,0.00023588,-0.00015344,-0.00013488,-0.00032666,0.0,0.00050835,-0.00070052,0.00037204,6.783e-05,-0.00029281,-0.00091133,-0.0002325,0.00058952,0.00046686,-0.00069561,0.00074415,0.0,-0.00145172,0.00055146,0.00022626,0.0,0.00078988,-0.00029195,-0.00021016,0.0,0.00046646,-0.00072982,0.00026373],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201906_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201906_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201906_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201906_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.22743146,0.29851331,0.30882093,0.44337451,0.44811189,0.56401619,0.56940508,0.58064324,0.59061227,0.61197162,0.6450453,0.76215309,0.76255681,0.81664861],"y_thresholds":[0.25,0.25,0.33333333,0.33333333,0.56521739,0.56521739,0.6,0.6,0.66666667,0.66666667,0.78571429,0.78571429,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.08478261,0.54197771,0.54294834,0.55051985,0.55457588,0.71891389,0.72142857,0.96152175],"y_thresholds":[0.48717949,0.48717949,0.5,0.5,0.75,0.75,1.0,1.0]},"uncertainty_calibration":{"u_q25":0.01058959,"u_q75":0.01755237},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-1e+18,"policy_score":-1e+18,"brier":0.26219894,"rmse":0.00443001,"n_val":59},{"cfg_name":"tree_heavy","inner_split":2,"score":-0.91043506,"policy_score":-0.66266556,"brier":0.30983676,"rmse":0.00769597,"n_val":59},{"cfg_name":"tree_stable","inner_split":1,"score":1.82400678,"policy_score":2.04165223,"brier":0.27835847,"rmse":0.0044383,"n_val":59},{"cfg_name":"tree_stable","inner_split":2,"score":-0.65429242,"policy_score":-0.41211965,"brier":0.30265725,"rmse":0.00758992,"n_val":59},{"cfg_name":"blend_conservative","inner_split":1,"score":-3.44951555,"policy_score":-3.22982708,"brier":0.28113856,"rmse":0.00441727,"n_val":59},{"cfg_name":"blend_conservative","inner_split":2,"score":-0.63361821,"policy_score":-0.39799067,"brier":0.29433277,"rmse":0.00743898,"n_val":59},{"selected_cfg":"tree_stable","nested_score":0.58485718}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.37414926,"max_abs_z":1.23722779,"top_shift_features":[{"feature":"rs_log","abs_z":1.23722779},{"feature":"gap_mu","abs_z":1.22815464},{"feature":"qqq_sigma","abs_z":0.98059254},{"feature":"gap_sd","abs_z":0.75397512},{"feature":"sigma","abs_z":0.68219209}]},"performance_drift":{"mean_abs_z":0.37414926,"recent_median_net_bps":20.18817965,"recent_median_calmar":22.96098166}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.47293447,"global_ev":-0.00031838,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":39,"win_rate_raw":0.43589744,"ev_raw":-0.00087935,"win_rate_shrunk":0.46384992,"ev_shrunk":-0.00045597,"ev_half_a":-0.00137687,"ev_half_b":-0.00053326,"consistency":0.76936911,"prob_delta":-0.00698938,"ev_delta":-0.00035081},{"cluster":1,"n":79,"win_rate_raw":0.49367089,"ev_raw":9.509e-05,"win_rate_shrunk":0.48116652,"ev_shrunk":-0.00015423,"ev_half_a":-0.00113856,"ev_half_b":0.00063342,"consistency":0.13925113,"prob_delta":0.00114632,"ev_delta":-2.148e-05},{"cluster":2,"n":111,"win_rate_raw":0.44144144,"ev_raw":-0.00040596,"win_rate_shrunk":0.45780146,"ev_shrunk":-0.00036046,"ev_half_a":-8.357e-05,"ev_half_b":-0.00065159,"consistency":0.85799505,"prob_delta":-0.01298405,"ev_delta":-0.00030927},{"cluster":3,"n":46,"win_rate_raw":0.5,"ev_raw":-0.00023396,"win_rate_shrunk":0.48043456,"ev_shrunk":-0.00029498,"ev_half_a":0.00238295,"ev_half_b":-0.00191626,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":18,"win_rate_raw":0.55555556,"ev_raw":0.00033879,"win_rate_shrunk":0.48371114,"ev_shrunk":-0.00023266,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":5,"n":58,"win_rate_raw":0.48275862,"ev_raw":-0.00060762,"win_rate_shrunk":0.4761356,"ev_shrunk":-0.00041262,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}