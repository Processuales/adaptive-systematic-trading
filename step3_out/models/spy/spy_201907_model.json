{"fold_id":"spy_201907","symbol":"SPY","test_start_utc":"2019-07-01 00:00:00+00:00","test_end_utc":"2019-08-01 00:00:00+00:00","n_train":419,"n_test":12,"n_trades_test":5,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00012827,"agg_ev_cut":0.00032827,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00012827,"agg_ev_cut":0.00032827,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00478022,"b_sl":0.00358517,"beta_proxy":0.66179706,"cost_rt":0.00061167,"dist_to_hi":-0.00270625,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.00037534,"gap_sd":0.00383778,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64528577,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038598,"qqq_pullback_z":0.61244576,"qqq_range_ratio":0.00283909,"qqq_sigma":0.00256453,"qqq_trend_score":2.19710756,"qqq_u_atr":0.00339584,"qqq_vol_z":-0.26748097,"range_ratio":0.00219174,"regime_agree":1.0,"ret_spread":-0.00016707,"rs_log":0.5441328,"same_bar_ambiguous":0.0,"sigma":0.00184192,"sigma_prank":0.338,"slip_half":0.00017584,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.77139525,"trend_score":2.1098373,"truncated_horizon":0.0,"u_atr":0.00239011,"u_atr_prank":0.335,"vol_z":-0.25957329},"mu":[11.8767507,0.00581233,0.00435162,0.64705537,0.00068022,-0.0053207,0.00032204,0.06162465,0.0003262,0.00414004,5.57983193,6.95798319,0.0612764,0.56697474,0.0,0.00037879,0.49779187,0.00354761,0.00293557,2.28886369,0.00389225,-0.20476312,0.00257958,0.88795518,3.44e-06,0.55570882,0.0,0.00218202,0.38967681,0.00021011,8e-05,6.77871148,8.34953216,2.31472587,0.0,0.00289091,0.38743855,-0.21738192],"sd":[0.48094512,0.00303145,0.00227055,0.13805161,0.00017531,0.00889597,0.00067538,0.24047256,0.00031895,0.00153009,4.67515478,3.92234486,0.01075061,1.07568411,1.0,0.00091649,1.08224063,0.00217116,0.0013364,1.80420509,0.00180808,0.88651975,0.00170883,0.31542159,0.00146071,0.06616156,1.0,0.00110551,0.29927467,8.766e-05,1.0,3.66355287,3.07181927,1.48082151,1.0,0.00151069,0.2821483,0.86166262],"beta":[0.48179272,-0.0171039,0.02386911,0.02909533,-0.05013388,-0.03223167,0.02502465,-0.02121782,0.0171039,-0.0070148,0.023306,0.06356448,-0.05089886,-0.02810664,0.00244151,0.0,0.05295863,-0.0661191,0.03687476,0.02908511,0.00962513,-0.00418546,-0.02135872,-0.02702538,0.03156376,-0.03836581,0.05227439,0.0,-0.02836831,0.1002886,-0.03223167,0.0,0.0986179,-0.03411801,-8.224e-05,0.0,0.03956274,-0.05210656,0.03572829],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00478022,"b_sl":0.00358517,"beta_proxy":0.66179706,"cost_rt":0.00061167,"dist_to_hi":-0.00270625,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.00037534,"gap_sd":0.00383778,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64528577,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038598,"qqq_pullback_z":0.61244576,"qqq_range_ratio":0.00283909,"qqq_sigma":0.00256453,"qqq_trend_score":2.19710756,"qqq_u_atr":0.00339584,"qqq_vol_z":-0.26748097,"range_ratio":0.00219174,"regime_agree":1.0,"ret_spread":-0.00016707,"rs_log":0.5441328,"same_bar_ambiguous":0.0,"sigma":0.00184192,"sigma_prank":0.338,"slip_half":0.00017584,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.77139525,"trend_score":2.1098373,"truncated_horizon":0.0,"u_atr":0.00239011,"u_atr_prank":0.335,"vol_z":-0.25957329},"mu":[11.8767507,0.00581233,0.00435162,0.64705537,0.00068022,-0.0053207,0.00032204,0.06162465,0.0003262,0.00414004,5.57983193,6.95798319,0.0612764,0.56697474,0.0,0.00037879,0.49779187,0.00354761,0.00293557,2.28886369,0.00389225,-0.20476312,0.00257958,0.88795518,3.44e-06,0.55570882,0.0,0.00218202,0.38967681,0.00021011,8e-05,6.77871148,8.34953216,2.31472587,0.0,0.00289091,0.38743855,-0.21738192],"sd":[0.48094512,0.00303145,0.00227055,0.13805161,0.00017531,0.00889597,0.00067538,0.24047256,0.00031895,0.00153009,4.67515478,3.92234486,0.01075061,1.07568411,1.0,0.00091649,1.08224063,0.00217116,0.0013364,1.80420509,0.00180808,0.88651975,0.00170883,0.31542159,0.00146071,0.06616156,1.0,0.00110551,0.29927467,8.766e-05,1.0,3.66355287,3.07181927,1.48082151,1.0,0.00151069,0.2821483,0.86166262],"beta":[-0.00021799,7.196e-05,0.00022685,0.00034767,-0.00055249,0.00019959,-0.00011036,0.00041877,-7.196e-05,0.00036656,0.00036586,0.00060554,-0.00014348,-0.00033779,-0.0002896,0.0,0.00036647,-0.00063,0.00055962,0.00026371,-0.00025732,-0.00121202,-0.00023828,0.00035185,0.00044653,-0.00066783,0.00060022,0.0,-0.00112095,0.0004852,0.00019959,0.0,0.00077794,-0.00028107,-0.00015276,0.0,0.00058987,-0.00067629,0.00024451],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201907_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201907_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201907_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201907_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.26343458,0.45510149,0.47286154,0.51316456,0.53222581,0.6408264,0.64856415,0.79929534,0.80453922,0.82893551,0.83016564,0.85361094],"y_thresholds":[0.28571429,0.28571429,0.33333333,0.33333333,0.5,0.5,0.63636364,0.63636364,0.8,0.8,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.28835752,0.30193757,0.5928915,0.62389648,0.65812108,0.66723792],"y_thresholds":[0.41666667,0.41666667,0.5862069,0.5862069,0.75,0.75,1.0]},"uncertainty_calibration":{"u_q25":0.00971888,"u_q75":0.01565804},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.27522879,"max_abs_z":1.41479868,"top_shift_features":[{"feature":"rs_log","abs_z":1.41479868},{"feature":"spread_half","abs_z":1.0},{"feature":"gap_tail","abs_z":0.71563357},{"feature":"vol_z","abs_z":0.41214799},{"feature":"ret_spread","abs_z":0.3628358}]},"performance_drift":{"mean_abs_z":0.27522879,"recent_median_net_bps":22.77553384,"recent_median_calmar":31.59984995}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48179272,"global_ev":-0.00021799,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":112,"win_rate_raw":0.45535714,"ev_raw":-0.00022596,"win_rate_shrunk":0.46903072,"ev_shrunk":-0.00022184,"ev_half_a":-0.00033222,"ev_half_b":-0.00015721,"consistency":0.95624787,"prob_delta":-0.01220364,"ev_delta":-0.00021213},{"cluster":1,"n":59,"win_rate_raw":0.52542373,"ev_raw":0.00031151,"win_rate_shrunk":0.49617389,"ev_shrunk":-4.346e-05,"ev_half_a":0.00145882,"ev_half_b":-0.00053209,"consistency":0.12556827,"prob_delta":0.00180582,"ev_delta":-5.46e-06},{"cluster":2,"n":39,"win_rate_raw":0.43589744,"ev_raw":-0.00087935,"win_rate_shrunk":0.47053538,"ev_shrunk":-0.00038021,"ev_half_a":-0.00137687,"ev_half_b":-0.00053326,"consistency":0.76936911,"prob_delta":-0.00866104,"ev_delta":-0.00029252},{"cluster":3,"n":53,"win_rate_raw":0.49056604,"ev_raw":-0.00061774,"win_rate_shrunk":0.4844805,"ev_shrunk":-0.00034045,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":76,"win_rate_raw":0.48684211,"ev_raw":-0.00013099,"win_rate_shrunk":0.48375064,"ev_shrunk":-0.00018425,"ev_half_a":-0.00015582,"ev_half_b":-0.00011651,"consistency":0.9901719,"prob_delta":0.00193868,"ev_delta":-0.00018244},{"cluster":5,"n":18,"win_rate_raw":0.55555556,"ev_raw":0.00033879,"win_rate_shrunk":0.49141396,"ev_shrunk":-0.00014536,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}