{"fold_id":"spy_201909","symbol":"SPY","test_start_utc":"2019-09-01 00:00:00+00:00","test_end_utc":"2019-10-01 00:00:00+00:00","n_train":435,"n_test":11,"n_trades_test":3,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00012827,"agg_ev_cut":0.00032827,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00012827,"agg_ev_cut":0.00032827,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00490038,"b_sl":0.00367528,"beta_proxy":0.66879402,"cost_rt":0.00061472,"dist_to_hi":-0.0027424,"ema_fast_slope":0.00031357,"entry_overnight":0.0,"gap_mu":0.00036851,"gap_sd":0.00434258,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64265023,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038841,"qqq_pullback_z":0.6158366,"qqq_range_ratio":0.00292493,"qqq_sigma":0.00260265,"qqq_trend_score":2.18991891,"qqq_u_atr":0.00350909,"qqq_vol_z":-0.29493656,"range_ratio":0.00222966,"regime_agree":1.0,"ret_spread":-0.00015815,"rs_log":0.54234536,"same_bar_ambiguous":0.0,"sigma":0.00186792,"sigma_prank":0.318,"slip_half":0.00017736,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.93221739,"trend_score":2.07475494,"truncated_horizon":0.0,"u_atr":0.00245019,"u_atr_prank":0.32,"vol_z":-0.2897208},"mu":[11.87567568,0.00591156,0.00442592,0.65177095,0.00068319,-0.00541058,0.0003177,0.06216216,0.00032334,0.00422703,5.94594595,6.93513514,0.06092074,0.55694207,0.0,0.00037484,0.48752014,0.00361396,0.00298509,2.27309924,0.00395005,-0.22131733,0.00263259,0.88918919,-1.841e-05,0.55294114,0.0,0.00221843,0.3790233,0.0002116,8e-05,6.76216216,8.45465902,2.32063283,0.0,0.00294028,0.37786638,-0.22654317],"sd":[0.48289969,0.00303573,0.00227407,0.13778974,0.00017334,0.00885379,0.00069415,0.24144985,0.00031368,0.00155211,4.97695199,3.91409209,0.01077452,1.08271209,1.0,0.0009488,1.08993236,0.00218992,0.00134428,1.79372332,0.0018085,0.88238981,0.00172586,0.31389771,0.00150855,0.06658547,1.0,0.00110622,0.2988666,8.667e-05,1.0,3.66321018,3.08872278,1.47996584,1.0,0.00151345,0.28175392,0.85553855],"beta":[0.48648649,-0.01682763,0.02313975,0.02825009,-0.05110966,-0.02980032,0.02037448,-0.0397881,0.01682763,-0.00613223,0.02602835,0.07215889,-0.05239448,-0.03046408,0.00984988,0.0,0.04878999,-0.06158814,0.02969558,0.03308678,0.00994374,-0.00117702,-0.02253127,-0.03094049,0.02867006,-0.03940563,0.0556034,0.0,-0.02824263,0.10141243,-0.02980032,0.0,0.10413168,-0.03008362,-0.0056456,0.0,0.03848119,-0.0586845,0.04327126],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00490038,"b_sl":0.00367528,"beta_proxy":0.66879402,"cost_rt":0.00061472,"dist_to_hi":-0.0027424,"ema_fast_slope":0.00031357,"entry_overnight":0.0,"gap_mu":0.00036851,"gap_sd":0.00434258,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64265023,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038841,"qqq_pullback_z":0.6158366,"qqq_range_ratio":0.00292493,"qqq_sigma":0.00260265,"qqq_trend_score":2.18991891,"qqq_u_atr":0.00350909,"qqq_vol_z":-0.29493656,"range_ratio":0.00222966,"regime_agree":1.0,"ret_spread":-0.00015815,"rs_log":0.54234536,"same_bar_ambiguous":0.0,"sigma":0.00186792,"sigma_prank":0.318,"slip_half":0.00017736,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.93221739,"trend_score":2.07475494,"truncated_horizon":0.0,"u_atr":0.00245019,"u_atr_prank":0.32,"vol_z":-0.2897208},"mu":[11.87567568,0.00591156,0.00442592,0.65177095,0.00068319,-0.00541058,0.0003177,0.06216216,0.00032334,0.00422703,5.94594595,6.93513514,0.06092074,0.55694207,0.0,0.00037484,0.48752014,0.00361396,0.00298509,2.27309924,0.00395005,-0.22131733,0.00263259,0.88918919,-1.841e-05,0.55294114,0.0,0.00221843,0.3790233,0.0002116,8e-05,6.76216216,8.45465902,2.32063283,0.0,0.00294028,0.37786638,-0.22654317],"sd":[0.48289969,0.00303573,0.00227407,0.13778974,0.00017334,0.00885379,0.00069415,0.24144985,0.00031368,0.00155211,4.97695199,3.91409209,0.01077452,1.08271209,1.0,0.0009488,1.08993236,0.00218992,0.00134428,1.79372332,0.0018085,0.88238981,0.00172586,0.31389771,0.00150855,0.06658547,1.0,0.00110622,0.2988666,8.667e-05,1.0,3.66321018,3.08872278,1.47996584,1.0,0.00151345,0.28175392,0.85553855],"beta":[-0.00014962,8.883e-05,0.00020248,0.00032695,-0.00056604,0.00022362,-0.00018022,0.00015571,-8.883e-05,0.00036309,0.00039926,0.00070832,-0.00015529,-0.0003849,-0.00016513,0.0,0.00020928,-0.00050943,0.0004559,0.00037093,-0.00023234,-0.00114388,-0.00027434,0.00034879,0.00039174,-0.00064625,0.00065611,0.0,-0.00115161,0.00049417,0.00022362,0.0,0.00086565,-0.00023637,-0.00024728,0.0,0.00057638,-0.00075076,0.00034195],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201909_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201909_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201909_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201909_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.22961181,0.35602629,0.36644184,0.38655008,0.39701876,0.54838311,0.56241887,0.68408399,0.68769883,0.82033835,0.83516621],"y_thresholds":[0.22222222,0.22222222,0.25,0.25,0.4,0.4,0.55,0.55,0.5625,0.5625,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.065,0.25664378,0.26297196,0.71111111,0.81556935],"y_thresholds":[0.4,0.4,0.48717949,0.48717949,1.0]},"uncertainty_calibration":{"u_q25":0.00912057,"u_q75":0.01320204},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.22525686,"max_abs_z":1.28452281,"top_shift_features":[{"feature":"rs_log","abs_z":1.28452281},{"feature":"gap_sd","abs_z":0.75761676},{"feature":"qqq_trend_score","abs_z":0.40012554},{"feature":"tp_to_cost","abs_z":0.39840216},{"feature":"qqq_sigma","abs_z":0.36584566}]},"performance_drift":{"mean_abs_z":0.22525686,"recent_median_net_bps":16.83314361,"recent_median_calmar":22.87044859}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48648649,"global_ev":-0.00014962,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":54,"win_rate_raw":0.5,"ev_raw":0.00058739,"win_rate_shrunk":0.49068034,"ev_shrunk":7.911e-05,"ev_half_a":0.00272292,"ev_half_b":-0.00188982,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":55,"win_rate_raw":0.52727273,"ev_raw":-0.00022848,"win_rate_shrunk":0.49930502,"ev_shrunk":-0.00017441,"ev_half_a":-0.00084906,"ev_half_b":0.00025196,"consistency":0.18118647,"prob_delta":0.00232254,"ev_delta":-3.16e-05},{"cluster":2,"n":67,"win_rate_raw":0.56716418,"ev_raw":0.0004185,"win_rate_shrunk":0.5153924,"ev_shrunk":5.393e-05,"ev_half_a":-0.00126632,"ev_half_b":0.00103742,"consistency":0.10601606,"prob_delta":0.00306449,"ev_delta":5.72e-06},{"cluster":3,"n":107,"win_rate_raw":0.42990654,"ev_raw":-0.00051539,"win_rate_shrunk":0.45981664,"ev_shrunk":-0.00032203,"ev_half_a":-0.00023425,"ev_half_b":-0.0007812,"consistency":0.8632608,"prob_delta":-0.02302303,"ev_delta":-0.000278},{"cluster":4,"n":65,"win_rate_raw":0.41538462,"ev_raw":-0.00103218,"win_rate_shrunk":0.46150475,"ev_shrunk":-0.00045971,"ev_half_a":-0.00160594,"ev_half_b":0.00058784,"consistency":0.11288869,"prob_delta":-0.00282016,"ev_delta":-5.19e-05},{"cluster":5,"n":22,"win_rate_raw":0.59090909,"ev_raw":0.00089487,"win_rate_shrunk":0.50266464,"ev_shrunk":1.22e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}