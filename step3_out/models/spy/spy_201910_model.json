{"fold_id":"spy_201910","symbol":"SPY","test_start_utc":"2019-10-01 00:00:00+00:00","test_end_utc":"2019-11-01 00:00:00+00:00","n_train":448,"n_test":11,"n_trades_test":9,"policy_score_test":20.1843759,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00141876,"agg_ev_cut":-0.00121876,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00141876,"agg_ev_cut":-0.00121876,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00494844,"b_sl":0.00371133,"beta_proxy":0.67115531,"cost_rt":0.00061738,"dist_to_hi":-0.0027424,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.00036028,"gap_sd":0.00441128,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64001468,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038382,"qqq_pullback_z":0.60451571,"qqq_range_ratio":0.00297681,"qqq_sigma":0.00263498,"qqq_trend_score":2.18624715,"qqq_u_atr":0.00355182,"qqq_vol_z":-0.29066887,"range_ratio":0.0022364,"regime_agree":1.0,"ret_spread":-0.00011375,"rs_log":0.54082006,"same_bar_ambiguous":0.0,"sigma":0.00190701,"sigma_prank":0.292,"slip_half":0.00017869,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.99162629,"trend_score":2.11002429,"truncated_horizon":0.0,"u_atr":0.00247422,"u_atr_prank":0.308,"vol_z":-0.28094728},"mu":[11.87926509,0.00593271,0.004442,0.6531589,0.00068299,-0.0053826,0.0003146,0.06036745,0.0003207,0.00429066,6.23622047,6.94750656,0.06055295,0.54724606,0.0,0.00036814,0.47572191,0.00364634,0.00298652,2.26475173,0.00395581,-0.21925629,0.00266244,0.89238845,-4.57e-06,0.55071907,0.0,0.00222834,0.36958168,0.0002115,8e-05,6.77427822,8.49321995,2.32462357,0.0,0.0029513,0.36972851,-0.22616418],"sd":[0.47633276,0.0029987,0.0022464,0.13604487,0.00017095,0.00875391,0.00069327,0.23816638,0.00030947,0.00157136,5.18546833,3.90401574,0.0108498,1.0842772,1.0,0.00094288,1.08806924,0.00222354,0.00132665,1.77261081,0.00178434,0.88328099,0.00176391,0.30988918,0.00150497,0.06686442,1.0,0.00109348,0.29917073,8.547e-05,1.0,3.65241369,3.05689256,1.46740836,1.0,0.00149512,0.28170474,0.85299825],"beta":[0.48818898,-0.01681933,0.03200186,0.03866217,-0.0470235,-0.0306961,0.02102258,-0.033747,0.01681933,-0.00275742,0.02793296,0.07389677,-0.07920338,-0.03097817,0.0191262,0.0,0.03731816,-0.06537152,0.0325119,0.03356421,0.01320221,0.00461522,-0.03615241,-0.0579784,0.03098233,-0.04522527,0.0587443,0.0,-0.04327299,0.09971413,-0.0306961,0.0,0.12824526,-0.04063403,-0.01338264,0.0,0.051994,-0.05096411,0.04849291],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00494844,"b_sl":0.00371133,"beta_proxy":0.67115531,"cost_rt":0.00061738,"dist_to_hi":-0.0027424,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.00036028,"gap_sd":0.00441128,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64001468,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038382,"qqq_pullback_z":0.60451571,"qqq_range_ratio":0.00297681,"qqq_sigma":0.00263498,"qqq_trend_score":2.18624715,"qqq_u_atr":0.00355182,"qqq_vol_z":-0.29066887,"range_ratio":0.0022364,"regime_agree":1.0,"ret_spread":-0.00011375,"rs_log":0.54082006,"same_bar_ambiguous":0.0,"sigma":0.00190701,"sigma_prank":0.292,"slip_half":0.00017869,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.99162629,"trend_score":2.11002429,"truncated_horizon":0.0,"u_atr":0.00247422,"u_atr_prank":0.308,"vol_z":-0.28094728},"mu":[11.87926509,0.00593271,0.004442,0.6531589,0.00068299,-0.0053826,0.0003146,0.06036745,0.0003207,0.00429066,6.23622047,6.94750656,0.06055295,0.54724606,0.0,0.00036814,0.47572191,0.00364634,0.00298652,2.26475173,0.00395581,-0.21925629,0.00266244,0.89238845,-4.57e-06,0.55071907,0.0,0.00222834,0.36958168,0.0002115,8e-05,6.77427822,8.49321995,2.32462357,0.0,0.0029513,0.36972851,-0.22616418],"sd":[0.47633276,0.0029987,0.0022464,0.13604487,0.00017095,0.00875391,0.00069327,0.23816638,0.00030947,0.00157136,5.18546833,3.90401574,0.0108498,1.0842772,1.0,0.00094288,1.08806924,0.00222354,0.00132665,1.77261081,0.00178434,0.88328099,0.00176391,0.30988918,0.00150497,0.06686442,1.0,0.00109348,0.29917073,8.547e-05,1.0,3.65241369,3.05689256,1.46740836,1.0,0.00149512,0.28170474,0.85299825],"beta":[-0.00010053,9.322e-05,0.00028528,0.0004399,-0.00054673,0.00024311,-0.00018482,0.00024078,-9.322e-05,0.00038817,0.00043601,0.00073508,-0.0003021,-0.00038355,-0.00011901,0.0,7.927e-05,-0.00052406,0.00050365,0.00045832,-0.00023224,-0.00127258,-0.00042291,0.00013939,0.00041878,-0.00071236,0.00066828,0.0,-0.00141261,0.0004705,0.00024311,0.0,0.00099634,-0.00026479,-0.00031523,0.0,0.00074972,-0.00067419,0.0003902],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201910_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201910_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201910_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201910_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.15717669,0.17158132,0.30328756,0.31505808,0.40935357,0.40941132,0.43612664,0.44176932,0.47365719,0.48936779,0.86230328,0.88223298],"y_thresholds":[0.0,0.14285714,0.14285714,0.28571429,0.28571429,0.33333333,0.33333333,0.5,0.5,0.53846154,0.53846154,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.34200603,0.34503167,0.75026264,0.81428571,0.87582229],"y_thresholds":[0.42424242,0.42424242,0.4516129,0.4516129,0.5,1.0]},"uncertainty_calibration":{"u_q25":0.0088521,"u_q75":0.01335132},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-0.2977768,"policy_score":-0.07134169,"brier":0.28529742,"rmse":0.00623103,"n_val":64},{"cfg_name":"tree_heavy","inner_split":2,"score":-0.4602459,"policy_score":-0.1969576,"brier":0.33066577,"rmse":0.00764449,"n_val":64},{"cfg_name":"tree_stable","inner_split":1,"score":-1.58868357,"policy_score":-1.35964912,"brier":0.28886542,"rmse":0.00619269,"n_val":64},{"cfg_name":"tree_stable","inner_split":2,"score":-0.94710102,"policy_score":-0.68109248,"brier":0.33452816,"rmse":0.00755621,"n_val":64},{"cfg_name":"blend_conservative","inner_split":1,"score":-1.41227506,"policy_score":-1.19351652,"brier":0.27508716,"rmse":0.00622158,"n_val":64},{"cfg_name":"blend_conservative","inner_split":2,"score":-0.9382381,"policy_score":-0.70378637,"brier":0.29246094,"rmse":0.00755301,"n_val":64},{"selected_cfg":"tree_heavy","nested_score":-0.37901135}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.19440778,"max_abs_z":1.34890233,"top_shift_features":[{"feature":"rs_log","abs_z":1.34890233},{"feature":"beta_proxy","abs_z":0.90412859},{"feature":"gap_sd","abs_z":0.73447375},{"feature":"regime_agree","abs_z":0.32163376},{"feature":"dist_to_hi","abs_z":0.29621635}]},"performance_drift":{"mean_abs_z":0.19440778,"recent_median_net_bps":22.77553384,"recent_median_calmar":31.59984995}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48818898,"global_ev":-0.00010053,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":28,"win_rate_raw":0.60714286,"ev_raw":0.00205383,"win_rate_shrunk":0.51069376,"ev_shrunk":0.00030705,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":100,"win_rate_raw":0.5,"ev_raw":-7.203e-05,"win_rate_shrunk":0.49355762,"ev_shrunk":-8.758e-05,"ev_half_a":-0.00113244,"ev_half_b":0.00045026,"consistency":0.15108155,"prob_delta":0.0008111,"ev_delta":-1.323e-05},{"cluster":2,"n":70,"win_rate_raw":0.47142857,"ev_raw":-0.00057989,"win_rate_shrunk":0.48201409,"ev_shrunk":-0.00027714,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":3,"n":104,"win_rate_raw":0.43269231,"ev_raw":-0.00033231,"win_rate_shrunk":0.46242267,"ev_shrunk":-0.00020814,"ev_half_a":-0.00028452,"ev_half_b":-0.00036218,"consistency":0.98058579,"prob_delta":-0.02526608,"ev_delta":-0.0002041},{"cluster":4,"n":57,"win_rate_raw":0.49122807,"ev_raw":-0.00058142,"win_rate_shrunk":0.48916767,"ev_shrunk":-0.00025539,"ev_half_a":-0.00112922,"ev_half_b":-8.84e-05,"consistency":0.73979331,"prob_delta":0.00072403,"ev_delta":-0.00018894},{"cluster":5,"n":22,"win_rate_raw":0.59090909,"ev_raw":0.00089487,"win_rate_shrunk":0.50410336,"ev_shrunk":5.368e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}