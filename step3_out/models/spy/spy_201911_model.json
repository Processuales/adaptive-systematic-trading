{"fold_id":"spy_201911","symbol":"SPY","test_start_utc":"2019-11-01 00:00:00+00:00","test_end_utc":"2019-12-01 00:00:00+00:00","n_train":452,"n_test":15,"n_trades_test":2,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00141876,"agg_ev_cut":-0.00121876,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00141876,"agg_ev_cut":-0.00121876,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00502456,"b_sl":0.00376842,"beta_proxy":0.67186417,"cost_rt":0.00061809,"dist_to_hi":-0.0027424,"ema_fast_slope":0.00032135,"entry_overnight":0.0,"gap_mu":0.00035965,"gap_sd":0.0044182,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64001468,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038598,"qqq_pullback_z":0.61244576,"qqq_range_ratio":0.00297681,"qqq_sigma":0.00265504,"qqq_trend_score":2.18903847,"qqq_u_atr":0.00355122,"qqq_vol_z":-0.29066887,"range_ratio":0.0022364,"regime_agree":1.0,"ret_spread":-0.00015711,"rs_log":0.5396126,"same_bar_ambiguous":0.0,"sigma":0.00191673,"sigma_prank":0.285,"slip_half":0.00017904,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.99589369,"trend_score":2.16110477,"truncated_horizon":0.0,"u_atr":0.0025018,"u_atr_prank":0.303,"vol_z":-0.28094728},"mu":[11.88051948,0.00592726,0.00443799,0.65399994,0.00068267,-0.00534669,0.00031921,0.05974026,0.00032033,0.00431331,6.33766234,6.94545455,0.06045629,0.55005055,0.0,0.00037611,0.48096255,0.0036385,0.00298785,2.2740779,0.00395104,-0.21955483,0.00265667,0.89350649,-9.64e-06,0.5497848,0.0,0.00222932,0.36663797,0.00021134,8e-05,6.77402597,8.49096338,2.32651121,0.0,0.00294873,0.36628457,-0.23137799],"sd":[0.47400996,0.00298416,0.00223549,0.13558663,0.00017011,0.00871911,0.00069255,0.23700498,0.00030788,0.00157851,5.252607,3.89333581,0.01083668,1.07974846,1.0,0.00094311,1.08456683,0.0022152,0.00132025,1.76829041,0.00177615,0.88184481,0.00175726,0.30846821,0.00149871,0.06713144,1.0,0.00108832,0.29895914,8.506e-05,1.0,3.64365318,3.04160747,1.46326212,1.0,0.00148784,0.28212869,0.8519021],"beta":[0.48831169,-0.01638265,0.03229237,0.03906272,-0.04767159,-0.03107689,0.01959903,-0.03712377,0.01638265,-0.0018672,0.02767489,0.07398354,-0.08312734,-0.03034488,0.01808379,0.0,0.04295181,-0.06329941,0.03065293,0.03455053,0.01044703,0.00222222,-0.03268518,-0.05466285,0.03118289,-0.04271651,0.05926253,0.0,-0.04425717,0.09859439,-0.03107689,0.0,0.13463728,-0.04029917,-0.0132241,0.0,0.05261523,-0.05247656,0.05001694],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00502456,"b_sl":0.00376842,"beta_proxy":0.67186417,"cost_rt":0.00061809,"dist_to_hi":-0.0027424,"ema_fast_slope":0.00032135,"entry_overnight":0.0,"gap_mu":0.00035965,"gap_sd":0.0044182,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64001468,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00038598,"qqq_pullback_z":0.61244576,"qqq_range_ratio":0.00297681,"qqq_sigma":0.00265504,"qqq_trend_score":2.18903847,"qqq_u_atr":0.00355122,"qqq_vol_z":-0.29066887,"range_ratio":0.0022364,"regime_agree":1.0,"ret_spread":-0.00015711,"rs_log":0.5396126,"same_bar_ambiguous":0.0,"sigma":0.00191673,"sigma_prank":0.285,"slip_half":0.00017904,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.99589369,"trend_score":2.16110477,"truncated_horizon":0.0,"u_atr":0.0025018,"u_atr_prank":0.303,"vol_z":-0.28094728},"mu":[11.88051948,0.00592726,0.00443799,0.65399994,0.00068267,-0.00534669,0.00031921,0.05974026,0.00032033,0.00431331,6.33766234,6.94545455,0.06045629,0.55005055,0.0,0.00037611,0.48096255,0.0036385,0.00298785,2.2740779,0.00395104,-0.21955483,0.00265667,0.89350649,-9.64e-06,0.5497848,0.0,0.00222932,0.36663797,0.00021134,8e-05,6.77402597,8.49096338,2.32651121,0.0,0.00294873,0.36628457,-0.23137799],"sd":[0.47400996,0.00298416,0.00223549,0.13558663,0.00017011,0.00871911,0.00069255,0.23700498,0.00030788,0.00157851,5.252607,3.89333581,0.01083668,1.07974846,1.0,0.00094311,1.08456683,0.0022152,0.00132025,1.76829041,0.00177615,0.88184481,0.00175726,0.30846821,0.00149871,0.06713144,1.0,0.00108832,0.29895914,8.506e-05,1.0,3.64365318,3.04160747,1.46326212,1.0,0.00148784,0.28212869,0.8519021],"beta":[-9.161e-05,9.572e-05,0.0002852,0.00044136,-0.00055375,0.00023934,-0.00019673,0.00022908,-9.572e-05,0.00039068,0.00043883,0.00074203,-0.00032278,-0.00037862,-0.00012762,0.0,0.00011512,-0.00051032,0.00049551,0.00046454,-0.00025235,-0.0012952,-0.00039406,0.00015605,0.00042181,-0.00069704,0.00067067,0.0,-0.00141698,0.00046403,0.00023934,0.0,0.0010308,-0.00025721,-0.00031813,0.0,0.00075427,-0.00068609,0.00039886],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201911_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201911_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201911_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_201911_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.14944936,0.23123798,0.24575899,0.46598559,0.47273401,0.47341906,0.47409848,0.84168836,0.85211385,0.87060224],"y_thresholds":[0.14285714,0.14285714,0.1875,0.1875,0.5,0.5,0.56410256,0.56410256,0.66666667,0.66666667]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.08333333,0.1439137,0.15758717,0.75625,0.81428571],"y_thresholds":[0.41176471,0.41176471,0.4375,0.4375,0.5]},"uncertainty_calibration":{"u_q25":0.00863527,"u_q75":0.01321144},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.40941866,"max_abs_z":2.15940413,"top_shift_features":[{"feature":"gap_mu","abs_z":2.15940413},{"feature":"rs_log","abs_z":1.44449874},{"feature":"intraday_tail_frac","abs_z":1.07351816},{"feature":"sigma_prank","abs_z":0.86324253},{"feature":"beta_proxy","abs_z":0.81776622}]},"performance_drift":{"mean_abs_z":0.40941866,"recent_median_net_bps":15.10786873,"recent_median_calmar":19.36410032}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48831169,"global_ev":-9.161e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":22,"win_rate_raw":0.59090909,"ev_raw":0.00089487,"win_rate_shrunk":0.50420706,"ev_shrunk":6.123e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":67,"win_rate_raw":0.50746269,"ev_raw":-1.17e-06,"win_rate_shrunk":0.49517328,"ev_shrunk":-5.92e-05,"ev_half_a":-0.00122445,"ev_half_b":0.002501,"consistency":0.01715969,"prob_delta":0.00011774,"ev_delta":-1.02e-06},{"cluster":2,"n":115,"win_rate_raw":0.39130435,"ev_raw":-0.00095907,"win_rate_shrunk":0.44084001,"ev_shrunk":-0.00051611,"ev_half_a":-0.00087902,"ev_half_b":-0.00101643,"consistency":0.96564814,"prob_delta":-0.04584094,"ev_delta":-0.00049838},{"cluster":3,"n":80,"win_rate_raw":0.525,"ev_raw":0.00018587,"win_rate_shrunk":0.50298701,"ev_shrunk":1.938e-05,"ev_half_a":-0.00082073,"ev_half_b":0.00059204,"consistency":0.16170187,"prob_delta":0.00237303,"ev_delta":3.13e-06},{"cluster":4,"n":33,"win_rate_raw":0.48484848,"ev_raw":-0.00044254,"win_rate_shrunk":0.48756472,"ev_shrunk":-0.0001673,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":5,"n":68,"win_rate_raw":0.55882353,"ev_raw":0.00081104,"win_rate_shrunk":0.51381597,"ev_shrunk":0.00023488,"ev_half_a":8.456e-05,"ev_half_b":0.00337792,"consistency":0.17666123,"prob_delta":0.00450562,"ev_delta":4.149e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}