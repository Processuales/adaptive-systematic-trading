{"fold_id":"spy_202001","symbol":"SPY","test_start_utc":"2020-01-01 00:00:00+00:00","test_end_utc":"2020-02-01 00:00:00+00:00","n_train":483,"n_test":12,"n_trades_test":7,"policy_score_test":256.44920761,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.98,"aggressive_size":1.12,"ev_cut":-0.00065558,"agg_ev_cut":-0.00045558,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.98,"aggressive_size":1.12,"ev_cut":-0.00065558,"agg_ev_cut":-0.00045558,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00504161,"b_sl":0.00378121,"beta_proxy":0.68460474,"cost_rt":0.00061738,"dist_to_hi":-0.00270625,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.00035653,"gap_sd":0.00462404,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63255285,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00039084,"qqq_pullback_z":0.61922745,"qqq_range_ratio":0.00294517,"qqq_sigma":0.00265504,"qqq_trend_score":2.26172081,"qqq_u_atr":0.00355122,"qqq_vol_z":-0.28352861,"range_ratio":0.00224018,"regime_agree":1.0,"ret_spread":-0.00015918,"rs_log":0.53700762,"same_bar_ambiguous":0.0,"sigma":0.00191673,"sigma_prank":0.277,"slip_half":0.00017869,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.00753634,"trend_score":2.18634922,"truncated_horizon":0.0,"u_atr":0.00251819,"u_atr_prank":0.292,"vol_z":-0.28980979},"mu":[11.87347932,0.0059089,0.00442357,0.65917225,0.00068177,-0.00525138,0.00031406,0.06326034,0.00032123,0.00443735,6.7810219,6.87591241,0.06067074,0.54594174,0.0,0.00038096,0.49612067,0.00362103,0.00296787,2.30010594,0.00393269,-0.21161161,0.0026569,0.90024331,-2.311e-05,0.54291357,0.0,0.00221385,0.35455382,0.00021089,8e-05,6.7080292,8.49628217,2.33068137,0.0,0.00293823,0.35743202,-0.22406028],"sd":[0.48686125,0.00291652,0.0021844,0.13290204,0.00017234,0.00857859,0.00069015,0.24343063,0.00029903,0.00159748,5.38500486,3.93520251,0.01063177,1.08236552,1.0,0.00093176,1.0842186,0.002188,0.00129661,1.74760536,0.0017325,0.89931064,0.00174817,0.29967531,0.00146242,0.07015965,1.0,0.00107139,0.298183,8.617e-05,0.0,3.69024607,2.97673871,1.44302647,1.0,0.00145341,0.27964496,0.86221425],"beta":[0.49148418,-0.0198991,0.03849926,0.04273797,-0.04953493,-0.02456283,0.01411682,-0.0383605,0.0198991,-0.0001417,0.04625925,0.07569826,-0.07367972,-0.01852992,0.0316099,0.0,0.04462372,-0.08877324,0.02553559,0.01619702,0.01349053,-0.01050698,-0.04082662,-0.06042084,0.03123946,-0.04834365,0.04762535,0.0,-0.04582038,0.10627724,-0.02456283,0.0,0.13306784,-0.03930322,-0.02277156,0.0,0.05121043,-0.05693508,0.05515925],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00504161,"b_sl":0.00378121,"beta_proxy":0.68460474,"cost_rt":0.00061738,"dist_to_hi":-0.00270625,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.00035653,"gap_sd":0.00462404,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63255285,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00039084,"qqq_pullback_z":0.61922745,"qqq_range_ratio":0.00294517,"qqq_sigma":0.00265504,"qqq_trend_score":2.26172081,"qqq_u_atr":0.00355122,"qqq_vol_z":-0.28352861,"range_ratio":0.00224018,"regime_agree":1.0,"ret_spread":-0.00015918,"rs_log":0.53700762,"same_bar_ambiguous":0.0,"sigma":0.00191673,"sigma_prank":0.277,"slip_half":0.00017869,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.00753634,"trend_score":2.18634922,"truncated_horizon":0.0,"u_atr":0.00251819,"u_atr_prank":0.292,"vol_z":-0.28980979},"mu":[11.87347932,0.0059089,0.00442357,0.65917225,0.00068177,-0.00525138,0.00031406,0.06326034,0.00032123,0.00443735,6.7810219,6.87591241,0.06067074,0.54594174,0.0,0.00038096,0.49612067,0.00362103,0.00296787,2.30010594,0.00393269,-0.21161161,0.0026569,0.90024331,-2.311e-05,0.54291357,0.0,0.00221385,0.35455382,0.00021089,8e-05,6.7080292,8.49628217,2.33068137,0.0,0.00293823,0.35743202,-0.22406028],"sd":[0.48686125,0.00291652,0.0021844,0.13290204,0.00017234,0.00857859,0.00069015,0.24343063,0.00029903,0.00159748,5.38500486,3.93520251,0.01063177,1.08236552,1.0,0.00093176,1.0842186,0.002188,0.00129661,1.74760536,0.0017325,0.89931064,0.00174817,0.29967531,0.00146242,0.07015965,1.0,0.00107139,0.298183,8.617e-05,0.0,3.69024607,2.97673871,1.44302647,1.0,0.00145341,0.27964496,0.86221425],"beta":[-3.279e-05,5.754e-05,0.00032933,0.00045953,-0.00060378,0.00034647,-0.00025215,0.00012826,-5.754e-05,0.00037855,0.00063134,0.00078884,-0.00029039,-0.00025301,2.169e-05,0.0,0.00018436,-0.00073644,0.00040354,0.00032686,-0.00020559,-0.00142678,-0.00039655,0.00011437,0.0004182,-0.00073835,0.00057092,0.0,-0.00143096,0.00056316,0.00034647,0.0,0.00106021,-0.00018491,-0.00041171,0.0,0.00072044,-0.00076528,0.00041689],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202001_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202001_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202001_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202001_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.16815,0.22933643,0.24274284,0.25821937,0.26272183,0.27796927,0.29805435,0.30788469,0.32375388,0.86662288],"y_thresholds":[0.125,0.125,0.25,0.25,0.33333333,0.33333333,0.5,0.5,0.52727273,0.52727273]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.03545455,0.8375],"y_thresholds":[0.45833333,0.45833333]},"uncertainty_calibration":{"u_q25":0.00859277,"u_q75":0.01314428},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.32183104,"max_abs_z":1.7191363,"top_shift_features":[{"feature":"rs_log","abs_z":1.7191363},{"feature":"intraday_tail_frac","abs_z":1.36639521},{"feature":"spread_half","abs_z":1.0},{"feature":"gap_mu","abs_z":0.98335226},{"feature":"u_atr_prank","abs_z":0.72823688}]},"performance_drift":{"mean_abs_z":0.32183104,"recent_median_net_bps":17.28999877,"recent_median_calmar":8.21517333}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49148418,"global_ev":-3.279e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":67,"win_rate_raw":0.50746269,"ev_raw":-0.00015792,"win_rate_shrunk":0.4972091,"ev_shrunk":-7.762e-05,"ev_half_a":-0.0006391,"ev_half_b":0.00025642,"consistency":0.19402956,"prob_delta":0.0011108,"ev_delta":-1.506e-05},{"cluster":1,"n":59,"win_rate_raw":0.54237288,"ev_raw":0.00075515,"win_rate_shrunk":0.50825755,"ev_shrunk":0.00022692,"ev_half_a":0.00197019,"ev_half_b":-0.00101678,"consistency":0.06331432,"prob_delta":0.00106199,"ev_delta":1.437e-05},{"cluster":2,"n":138,"win_rate_raw":0.41304348,"ev_raw":-0.00046842,"win_rate_shrunk":0.44952753,"ev_shrunk":-0.0002658,"ev_half_a":-0.00069491,"ev_half_b":-0.0002284,"consistency":0.88337181,"prob_delta":-0.03706333,"ev_delta":-0.0002348},{"cluster":3,"n":84,"win_rate_raw":0.54761905,"ev_raw":4.717e-05,"win_rate_shrunk":0.51459854,"ev_shrunk":1.4e-07,"ev_half_a":-0.00051325,"ev_half_b":0.00044747,"consistency":0.18995464,"prob_delta":0.00439068,"ev_delta":3e-08},{"cluster":4,"n":23,"win_rate_raw":0.65217391,"ev_raw":0.00166439,"win_rate_shrunk":0.51732939,"ev_shrunk":0.00024019,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":40,"win_rate_raw":0.45,"ev_raw":-0.00062627,"win_rate_shrunk":0.48111314,"ev_shrunk":-0.00018116,"ev_half_a":-0.00107503,"ev_half_b":-0.00013028,"consistency":0.76381303,"prob_delta":-0.00792154,"ev_delta":-0.00013837}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}