{"fold_id":"spy_202002","symbol":"SPY","test_start_utc":"2020-02-01 00:00:00+00:00","test_end_utc":"2020-03-01 00:00:00+00:00","n_train":495,"n_test":9,"n_trades_test":7,"policy_score_test":1.83491487,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00199236,"agg_ev_cut":-0.00179236,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00199236,"agg_ev_cut":-0.00179236,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00506049,"b_sl":0.00379536,"beta_proxy":0.68882227,"cost_rt":0.00062052,"dist_to_hi":-0.0027663,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.0003548,"gap_sd":0.00471716,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63165176,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00039502,"qqq_pullback_z":0.61244576,"qqq_range_ratio":0.00298011,"qqq_sigma":0.00269663,"qqq_trend_score":2.25121964,"qqq_u_atr":0.00356261,"qqq_vol_z":-0.28640118,"range_ratio":0.00227305,"regime_agree":1.0,"ret_spread":-0.00015711,"rs_log":0.53555972,"same_bar_ambiguous":0.0,"sigma":0.00194289,"sigma_prank":0.284,"slip_half":0.00018026,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.04497638,"trend_score":2.20473864,"truncated_horizon":0.0,"u_atr":0.00252984,"u_atr_prank":0.302,"vol_z":-0.30803132},"mu":[11.87648456,0.00589195,0.00441104,0.66052974,0.00068385,-0.00531428,0.00032042,0.06175772,0.00031227,0.00447028,6.73871734,6.89311164,0.06064293,0.55056904,0.0,0.00039069,0.50010525,0.00362252,0.00300416,2.29314358,0.00393157,-0.22170692,0.00264677,0.90023753,-3.828e-05,0.5404044,0.0,0.0022347,0.36092309,0.00021192,8e-05,6.72684086,8.44970065,2.32998421,0.0,0.00293014,0.36288494,-0.23076884],"sd":[0.48142997,0.00267856,0.0020057,0.13162014,0.00017263,0.00858698,0.00069603,0.24071498,0.00030119,0.00159082,5.3342569,3.94865804,0.0106992,1.08491111,1.0,0.00094744,1.08829687,0.00217313,0.00130692,1.74068221,0.00161767,0.90806138,0.00170645,0.29968303,0.00149618,0.07070146,1.0,0.00107121,0.2980969,8.632e-05,1.0,3.70772664,2.4949344,1.43563676,1.0,0.00133403,0.27927144,0.86440883],"beta":[0.48693587,-0.02233652,0.02506608,0.02881257,-0.04506893,-0.03478352,0.01175005,-0.02677998,0.02233652,0.00303801,0.04501148,0.08911828,-0.06932448,-0.01326009,0.01642003,0.0,0.04206428,-0.07523227,0.03651101,0.01397561,0.0069367,-0.01012739,-0.0476999,-0.05206707,0.02467256,-0.04575927,0.06312104,0.0,-0.00454011,0.08877664,-0.03478352,0.0,0.13392745,-0.05191984,-0.01901023,0.0,0.0363091,-0.04082304,0.06233464],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00506049,"b_sl":0.00379536,"beta_proxy":0.68882227,"cost_rt":0.00062052,"dist_to_hi":-0.0027663,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.0003548,"gap_sd":0.00471716,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63165176,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00039502,"qqq_pullback_z":0.61244576,"qqq_range_ratio":0.00298011,"qqq_sigma":0.00269663,"qqq_trend_score":2.25121964,"qqq_u_atr":0.00356261,"qqq_vol_z":-0.28640118,"range_ratio":0.00227305,"regime_agree":1.0,"ret_spread":-0.00015711,"rs_log":0.53555972,"same_bar_ambiguous":0.0,"sigma":0.00194289,"sigma_prank":0.284,"slip_half":0.00018026,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.04497638,"trend_score":2.20473864,"truncated_horizon":0.0,"u_atr":0.00252984,"u_atr_prank":0.302,"vol_z":-0.30803132},"mu":[11.87648456,0.00589195,0.00441104,0.66052974,0.00068385,-0.00531428,0.00032042,0.06175772,0.00031227,0.00447028,6.73871734,6.89311164,0.06064293,0.55056904,0.0,0.00039069,0.50010525,0.00362252,0.00300416,2.29314358,0.00393157,-0.22170692,0.00264677,0.90023753,-3.828e-05,0.5404044,0.0,0.0022347,0.36092309,0.00021192,8e-05,6.72684086,8.44970065,2.32998421,0.0,0.00293014,0.36288494,-0.23076884],"sd":[0.48142997,0.00267856,0.0020057,0.13162014,0.00017263,0.00858698,0.00069603,0.24071498,0.00030119,0.00159082,5.3342569,3.94865804,0.0106992,1.08491111,1.0,0.00094744,1.08829687,0.00217313,0.00130692,1.74068221,0.00161767,0.90806138,0.00170645,0.29968303,0.00149618,0.07070146,1.0,0.00107121,0.2980969,8.632e-05,1.0,3.70772664,2.4949344,1.43563676,1.0,0.00133403,0.27927144,0.86440883],"beta":[-3.591e-05,-3.292e-05,0.00010217,0.00022114,-0.00049079,7.664e-05,-0.00022418,0.00013788,3.292e-05,0.00024649,0.00062353,0.00072267,-0.00030557,-0.00029843,-0.00012231,0.0,0.00027413,-0.00064909,0.00061173,0.00057838,-0.00022065,-0.00142487,-0.00062299,0.00018139,0.00021715,-0.00064406,0.00045241,0.0,-0.0005982,0.00034211,7.664e-05,0.0,0.00124597,-0.00040114,-0.00028601,0.0,0.00045982,-0.00042611,0.00057844],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202002_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202002_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202002_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202002_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.20911935,0.25122385,0.25230892,0.32315979,0.32966786,0.37997283,0.38281442,0.38976276,0.39931953,0.83185887],"y_thresholds":[0.0,0.0,0.33333333,0.33333333,0.4,0.4,0.5,0.5,0.59615385,0.59615385]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.125,0.22964902,0.23917202,0.25194626,0.2786257,0.99835451],"y_thresholds":[0.0,0.45,0.45,0.5,0.5,0.54901961,0.54901961]},"uncertainty_calibration":{"u_q25":0.0085632,"u_q75":0.01237071},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-1.00471966,"policy_score":-0.74710399,"brier":0.32388789,"rmse":0.00734988,"n_val":71},{"cfg_name":"tree_heavy","inner_split":2,"score":-0.7755206,"policy_score":-0.56642406,"brier":0.25776113,"rmse":0.00788784,"n_val":71},{"cfg_name":"tree_stable","inner_split":1,"score":-1.17854301,"policy_score":-0.93599787,"brier":0.30429197,"rmse":0.00716308,"n_val":71},{"cfg_name":"tree_stable","inner_split":2,"score":-0.5361639,"policy_score":-0.32584865,"brier":0.25962498,"rmse":0.00779826,"n_val":71},{"cfg_name":"blend_conservative","inner_split":1,"score":-1.20464643,"policy_score":-0.95821434,"brier":0.30922221,"rmse":0.00725771,"n_val":71},{"cfg_name":"blend_conservative","inner_split":2,"score":-0.63196727,"policy_score":-0.4284721,"brier":0.25067595,"rmse":0.00774411,"n_val":71},{"selected_cfg":"tree_stable","nested_score":-0.85735346}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.41818465,"max_abs_z":2.06107023,"top_shift_features":[{"feature":"rs_log","abs_z":2.06107023},{"feature":"gap_mu","abs_z":1.86316174},{"feature":"intraday_tail_frac","abs_z":1.6483144},{"feature":"sigma_prank","abs_z":1.48231249},{"feature":"u_atr_prank","abs_z":1.47361371}]},"performance_drift":{"mean_abs_z":0.41818465,"recent_median_net_bps":17.28999877,"recent_median_calmar":8.21517333}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48693587,"global_ev":-3.591e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":96,"win_rate_raw":0.51041667,"ev_raw":-6.593e-05,"win_rate_shrunk":0.49737178,"ev_shrunk":-4.925e-05,"ev_half_a":-0.00065607,"ev_half_b":0.00069282,"consistency":0.16569431,"prob_delta":0.00172917,"ev_delta":-8.16e-06},{"cluster":1,"n":40,"win_rate_raw":0.45,"ev_raw":-0.00062627,"win_rate_shrunk":0.4777019,"ev_shrunk":-0.0001835,"ev_half_a":-0.00107503,"ev_half_b":-0.00013028,"consistency":0.76381303,"prob_delta":-0.00705302,"ev_delta":-0.00014016},{"cluster":2,"n":70,"win_rate_raw":0.5,"ev_raw":-4.48e-06,"win_rate_shrunk":0.49174897,"ev_shrunk":-2.433e-05,"ev_half_a":-0.00065633,"ev_half_b":0.00040483,"consistency":0.18367753,"prob_delta":0.00088406,"ev_delta":-4.47e-06},{"cluster":3,"n":60,"win_rate_raw":0.53333333,"ev_raw":0.00069268,"win_rate_shrunk":0.50240169,"ev_shrunk":0.00020695,"ev_half_a":0.00197019,"ev_half_b":-0.00109583,"consistency":0.05837404,"prob_delta":0.0009028,"ev_delta":1.208e-05},{"cluster":4,"n":21,"win_rate_raw":0.61904762,"ev_raw":0.00103017,"win_rate_shrunk":0.50661209,"ev_shrunk":0.00012287,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":134,"win_rate_raw":0.43283582,"ev_raw":-0.00034791,"win_rate_shrunk":0.4583949,"ev_shrunk":-0.00020051,"ev_half_a":-0.00059699,"ev_half_b":-0.00013977,"consistency":0.88569524,"prob_delta":-0.0252786,"ev_delta":-0.00017759}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}