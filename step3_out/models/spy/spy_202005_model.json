{"fold_id":"spy_202005","symbol":"SPY","test_start_utc":"2020-05-01 00:00:00+00:00","test_end_utc":"2020-06-01 00:00:00+00:00","n_train":480,"n_test":12,"n_trades_test":12,"policy_score_test":-5.00670907,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00199236,"agg_ev_cut":-0.00179236,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00199236,"agg_ev_cut":-0.00179236,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00493757,"b_sl":0.00370318,"beta_proxy":0.66902476,"cost_rt":0.00061445,"dist_to_hi":-0.0027424,"ema_fast_slope":0.00031357,"entry_overnight":0.0,"gap_mu":0.00035524,"gap_sd":0.00467643,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64739486,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040006,"qqq_pullback_z":0.62569709,"qqq_range_ratio":0.00283812,"qqq_sigma":0.00265408,"qqq_trend_score":2.18991891,"qqq_u_atr":0.0034719,"qqq_vol_z":-0.30693762,"range_ratio":0.00219423,"regime_agree":1.0,"ret_spread":-8.954e-05,"rs_log":0.52456411,"same_bar_ambiguous":0.0,"sigma":0.00187778,"sigma_prank":0.326,"slip_half":0.00017723,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.93265294,"trend_score":2.17276005,"truncated_horizon":0.0,"u_atr":0.00246879,"u_atr_prank":0.327,"vol_z":-0.31094791},"mu":[11.87745098,0.00564705,0.00422744,0.65166444,0.00067691,-0.00529365,0.00031579,0.06127451,0.00031599,0.00430464,7.15441176,6.97058824,0.06045343,0.55494009,0.0,0.00039361,0.51326192,0.00344415,0.00294963,2.29019114,0.00380822,-0.22425742,0.00251168,0.89705882,-3.784e-05,0.52562932,0.0,0.00215979,0.37975713,0.00020846,8e-05,6.79901961,8.21576227,2.30956993,0.0,0.00280782,0.38013096,-0.23082297],"sd":[0.47966632,0.00244355,0.00182819,0.13075441,0.00017232,0.00870473,0.00066796,0.23983316,0.00029565,0.00139949,5.12043007,3.96048096,0.01060558,1.08249038,1.0,0.0009256,1.08074338,0.00200089,0.00127306,1.75658264,0.00151687,0.90582402,0.00153736,0.30388203,0.00142879,0.06856727,1.0,0.00101715,0.30013194,8.616e-05,1.0,3.71586411,2.26860371,1.44007492,1.0,0.00121414,0.28076733,0.86526306],"beta":[0.48039216,-0.01731432,0.02061064,0.02163806,-0.03583749,-0.03893951,0.03048862,-0.01841074,0.01731432,-0.00167736,0.0276024,0.10609431,-0.02074657,-0.01545707,-0.02030836,0.0,0.06059502,-0.07641559,-0.01069001,0.01880143,0.00031169,0.02331276,-0.05657583,-0.0703487,0.02469763,-0.03667591,0.06250514,0.0,0.02743724,0.05508258,-0.03893951,0.0,0.09864222,-0.056189,5.713e-05,0.0,0.02368247,-0.00042778,0.09373526],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00493757,"b_sl":0.00370318,"beta_proxy":0.66902476,"cost_rt":0.00061445,"dist_to_hi":-0.0027424,"ema_fast_slope":0.00031357,"entry_overnight":0.0,"gap_mu":0.00035524,"gap_sd":0.00467643,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64739486,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040006,"qqq_pullback_z":0.62569709,"qqq_range_ratio":0.00283812,"qqq_sigma":0.00265408,"qqq_trend_score":2.18991891,"qqq_u_atr":0.0034719,"qqq_vol_z":-0.30693762,"range_ratio":0.00219423,"regime_agree":1.0,"ret_spread":-8.954e-05,"rs_log":0.52456411,"same_bar_ambiguous":0.0,"sigma":0.00187778,"sigma_prank":0.326,"slip_half":0.00017723,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.93265294,"trend_score":2.17276005,"truncated_horizon":0.0,"u_atr":0.00246879,"u_atr_prank":0.327,"vol_z":-0.31094791},"mu":[11.87745098,0.00564705,0.00422744,0.65166444,0.00067691,-0.00529365,0.00031579,0.06127451,0.00031599,0.00430464,7.15441176,6.97058824,0.06045343,0.55494009,0.0,0.00039361,0.51326192,0.00344415,0.00294963,2.29019114,0.00380822,-0.22425742,0.00251168,0.89705882,-3.784e-05,0.52562932,0.0,0.00215979,0.37975713,0.00020846,8e-05,6.79901961,8.21576227,2.30956993,0.0,0.00280782,0.38013096,-0.23082297],"sd":[0.47966632,0.00244355,0.00182819,0.13075441,0.00017232,0.00870473,0.00066796,0.23983316,0.00029565,0.00139949,5.12043007,3.96048096,0.01060558,1.08249038,1.0,0.0009256,1.08074338,0.00200089,0.00127306,1.75658264,0.00151687,0.90582402,0.00153736,0.30388203,0.00142879,0.06856727,1.0,0.00101715,0.30013194,8.616e-05,1.0,3.71586411,2.26860371,1.44007492,1.0,0.00121414,0.28076733,0.86526306],"beta":[-0.00018097,2.156e-05,-0.00010412,-1.356e-05,-0.00041859,8.444e-05,-5.722e-05,0.00047009,-2.156e-05,-0.00020523,0.00018275,0.00135375,3.982e-05,-0.00040159,-0.00060425,0.0,0.00035084,-0.00070157,7.673e-05,0.00088156,-0.0001829,-0.00129622,-0.00082955,-0.00037138,0.00011645,-0.00047241,0.00026921,0.0,-4.41e-05,-0.00013845,8.444e-05,0.0,0.00112694,-0.00036262,-0.00011802,0.0,0.00016871,0.00040492,0.00093865],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202005_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202005_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202005_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202005_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.22094968,0.23497825,0.24234681,0.25906312,0.26711157,0.4256505,0.42797157,0.6677875,0.68877102,0.75138555,0.75606162],"y_thresholds":[0.0,0.0,0.2,0.2,0.51851852,0.51851852,0.61290323,0.61290323,0.66666667,0.66666667,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.02407407,0.10585742,0.14677419,0.20196407,0.20344811,0.37407407,0.38191295,0.96242234],"y_thresholds":[0.33333333,0.33333333,0.41176471,0.41176471,0.59375,0.59375,0.6,0.6]},"uncertainty_calibration":{"u_q25":0.00829232,"u_q75":0.01390297},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":1.02472057,"max_abs_z":6.14505403,"top_shift_features":[{"feature":"gap_sd","abs_z":6.14505403},{"feature":"gap_mu","abs_z":3.54051963},{"feature":"rs_log","abs_z":3.00226562},{"feature":"gap_tail","abs_z":2.28145947},{"feature":"qqq_range_ratio","abs_z":1.84551686}]},"performance_drift":{"mean_abs_z":1.02472057,"recent_median_net_bps":17.28999877,"recent_median_calmar":10.23188537}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48039216,"global_ev":-0.00018097,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":38,"win_rate_raw":0.42105263,"ev_raw":-0.00100247,"win_rate_shrunk":0.46612063,"ev_shrunk":-0.00037855,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":1,"n":114,"win_rate_raw":0.44736842,"ev_raw":-0.00012019,"win_rate_shrunk":0.46430367,"ev_shrunk":-0.00015136,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":2,"n":67,"win_rate_raw":0.47761194,"ev_raw":-0.00031247,"win_rate_shrunk":0.47939604,"ev_shrunk":-0.00022809,"ev_half_a":-0.0013669,"ev_half_b":-3.395e-05,"consistency":0.66676205,"prob_delta":-0.00066418,"ev_delta":-0.00015208},{"cluster":3,"n":20,"win_rate_raw":0.6,"ev_raw":0.00079003,"win_rate_shrunk":0.49747899,"ev_shrunk":-4.226e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":83,"win_rate_raw":0.54216867,"ev_raw":7.1e-07,"win_rate_shrunk":0.50565054,"ev_shrunk":-0.00010669,"ev_half_a":-0.0002989,"ev_half_b":0.00088528,"consistency":0.17598832,"prob_delta":0.00444518,"ev_delta":-1.878e-05},{"cluster":5,"n":86,"win_rate_raw":0.46511628,"ev_raw":-0.00019726,"win_rate_shrunk":0.47401485,"ev_shrunk":-0.00018777,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}