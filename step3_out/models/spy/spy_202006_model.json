{"fold_id":"spy_202006","symbol":"SPY","test_start_utc":"2020-06-01 00:00:00+00:00","test_end_utc":"2020-07-01 00:00:00+00:00","n_train":491,"n_test":6,"n_trades_test":3,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":0.00061072,"agg_ev_cut":0.00081072,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":0.00061072,"agg_ev_cut":0.00081072,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00494824,"b_sl":0.00371118,"beta_proxy":0.6713214,"cost_rt":0.00061432,"dist_to_hi":-0.00270339,"ema_fast_slope":0.00031357,"entry_overnight":0.0,"gap_mu":0.00035572,"gap_sd":0.00473616,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64739486,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040006,"qqq_pullback_z":0.62569709,"qqq_range_ratio":0.0028642,"qqq_sigma":0.00264423,"qqq_trend_score":2.23499422,"qqq_u_atr":0.0034719,"qqq_vol_z":-0.31170804,"range_ratio":0.00220849,"regime_agree":1.0,"ret_spread":-9.589e-05,"rs_log":0.5199536,"same_bar_ambiguous":0.0,"sigma":0.00188729,"sigma_prank":0.325,"slip_half":0.00017716,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.9530501,"trend_score":2.19002008,"truncated_horizon":0.0,"u_atr":0.00247412,"u_atr_prank":0.329,"vol_z":-0.33099294},"mu":[11.88038278,0.00564776,0.00422815,0.65619469,0.0006765,-0.00515061,0.00032291,0.05980861,0.0003241,0.00433256,7.19856459,6.98803828,0.06021531,0.56190802,0.0,0.00040695,0.52727778,0.00344036,0.00294534,2.31251631,0.0038037,-0.23640614,0.00250477,0.90430622,-4.456e-05,0.52133987,0.0,0.00216553,0.37897608,0.00020825,8e-05,6.81578947,8.22155919,2.32056343,0.0,0.00280855,0.3788134,-0.23637501],"sd":[0.47426382,0.00242814,0.00181671,0.13105693,0.0001709,0.00859299,0.00066906,0.23713191,0.00028905,0.00139416,5.01350309,3.9569877,0.01036195,1.07747416,1.0,0.00091833,1.07182727,0.00198339,0.00126311,1.7207038,0.00150001,0.90585414,0.00152648,0.29417084,0.00141741,0.06826045,1.0,0.00101618,0.29865806,8.545e-05,1.0,3.71174774,2.24799913,1.42184919,1.0,0.00120657,0.27919465,0.86537772],"beta":[0.48564593,-0.01500384,0.01833808,0.01922551,-0.02797695,-0.0245502,0.01616815,-0.01882651,0.01500384,0.01227286,0.03866227,0.08031575,-0.0209058,-0.00125795,-0.01002426,0.0,0.05612014,-0.07979173,-0.01911719,0.00656909,-0.01428805,0.03311812,-0.04960685,-0.05959006,0.02674542,-0.04230164,0.06194563,0.0,-0.02117217,0.0537588,-0.0245502,0.0,0.08954939,-0.02111705,0.0058042,0.0,0.02099084,-0.01923792,0.08376712],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00494824,"b_sl":0.00371118,"beta_proxy":0.6713214,"cost_rt":0.00061432,"dist_to_hi":-0.00270339,"ema_fast_slope":0.00031357,"entry_overnight":0.0,"gap_mu":0.00035572,"gap_sd":0.00473616,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64739486,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040006,"qqq_pullback_z":0.62569709,"qqq_range_ratio":0.0028642,"qqq_sigma":0.00264423,"qqq_trend_score":2.23499422,"qqq_u_atr":0.0034719,"qqq_vol_z":-0.31170804,"range_ratio":0.00220849,"regime_agree":1.0,"ret_spread":-9.589e-05,"rs_log":0.5199536,"same_bar_ambiguous":0.0,"sigma":0.00188729,"sigma_prank":0.325,"slip_half":0.00017716,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.9530501,"trend_score":2.19002008,"truncated_horizon":0.0,"u_atr":0.00247412,"u_atr_prank":0.329,"vol_z":-0.33099294},"mu":[11.88038278,0.00564776,0.00422815,0.65619469,0.0006765,-0.00515061,0.00032291,0.05980861,0.0003241,0.00433256,7.19856459,6.98803828,0.06021531,0.56190802,0.0,0.00040695,0.52727778,0.00344036,0.00294534,2.31251631,0.0038037,-0.23640614,0.00250477,0.90430622,-4.456e-05,0.52133987,0.0,0.00216553,0.37897608,0.00020825,8e-05,6.81578947,8.22155919,2.32056343,0.0,0.00280855,0.3788134,-0.23637501],"sd":[0.47426382,0.00242814,0.00181671,0.13105693,0.0001709,0.00859299,0.00066906,0.23713191,0.00028905,0.00139416,5.01350309,3.9569877,0.01036195,1.07747416,1.0,0.00091833,1.07182727,0.00198339,0.00126311,1.7207038,0.00150001,0.90585414,0.00152648,0.29417084,0.00141741,0.06826045,1.0,0.00101618,0.29865806,8.545e-05,1.0,3.71174774,2.24799913,1.42184919,1.0,0.00120657,0.27919465,0.86537772],"beta":[-0.00010819,4.084e-05,-6.04e-05,1.538e-05,-0.00031876,0.00015234,-0.00013023,0.00037933,-4.084e-05,-3.447e-05,0.00028906,0.00105107,2.548e-05,-0.0002621,-0.00051945,0.0,0.00046228,-0.00072642,-1.268e-05,0.00057827,-0.00028707,-0.00110126,-0.00080643,-0.00032154,0.00013372,-0.00049358,0.00019876,0.0,-0.0002689,-0.00014487,0.00015234,0.0,0.00106377,-0.00016026,-7.161e-05,0.0,0.00016787,0.0002333,0.00095959],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202006_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202006_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202006_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202006_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.27465977,0.28057547,0.30860794,0.54924038,0.5506279,0.60350897,0.62063119,0.63103824,0.63267472,0.72176056,0.74056637,0.78923876],"y_thresholds":[0.0,0.0,0.43589744,0.43589744,0.5,0.5,0.66666667,0.66666667,0.81818182,0.81818182,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.12442441,0.15609709,0.34743367,0.35,0.43333333,0.43418254,0.55786238,0.64987,0.96810517],"y_thresholds":[0.14285714,0.14285714,0.5,0.5,0.61290323,0.61290323,0.66666667,0.66666667,0.81818182,0.81818182]},"uncertainty_calibration":{"u_q25":0.00921658,"u_q75":0.01987409},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-2.4647691,"policy_score":-2.24057033,"brier":0.28169958,"rmse":0.00646204,"n_val":70},{"cfg_name":"tree_heavy","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.25659914,"rmse":0.00786898,"n_val":70},{"cfg_name":"tree_stable","inner_split":1,"score":-1.33828885,"policy_score":-1.11591696,"brier":0.27883647,"rmse":0.00662227,"n_val":70},{"cfg_name":"tree_stable","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.25264424,"rmse":0.00775801,"n_val":70},{"cfg_name":"blend_conservative","inner_split":1,"score":-1.46145756,"policy_score":-1.23695034,"brier":0.28149623,"rmse":0.00669252,"n_val":70},{"cfg_name":"blend_conservative","inner_split":2,"score":-2.42307875,"policy_score":-2.18362712,"brier":0.29818534,"rmse":0.00790631,"n_val":70},{"selected_cfg":"blend_conservative","nested_score":-1.94226816}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.79270579,"max_abs_z":4.23192514,"top_shift_features":[{"feature":"gap_sd","abs_z":4.23192514},{"feature":"rs_log","abs_z":2.66717753},{"feature":"gap_mu","abs_z":2.20610572},{"feature":"gap_tail","abs_z":1.92489101},{"feature":"tp_to_cost","abs_z":1.71809591}]},"performance_drift":{"mean_abs_z":0.79270579,"recent_median_net_bps":5.77600117,"recent_median_calmar":1.09967042}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48564593,"global_ev":-0.00010819,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":81,"win_rate_raw":0.54320988,"ev_raw":6.127e-05,"win_rate_shrunk":0.50884334,"ev_shrunk":-3.99e-05,"ev_half_a":-3.182e-05,"ev_half_b":0.00047084,"consistency":0.21858407,"prob_delta":0.00507058,"ev_delta":-8.72e-06},{"cluster":1,"n":93,"win_rate_raw":0.46236559,"ev_raw":-0.00031301,"win_rate_shrunk":0.47548128,"ev_shrunk":-0.00019762,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":2,"n":124,"win_rate_raw":0.4516129,"ev_raw":-9.606e-05,"win_rate_shrunk":0.46835046,"ev_shrunk":-0.00010203,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":3,"n":63,"win_rate_raw":0.49206349,"ev_raw":5.759e-05,"win_rate_shrunk":0.48785526,"ev_shrunk":-5.112e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":37,"win_rate_raw":0.45945946,"ev_raw":-0.00077283,"win_rate_shrunk":0.4794746,"ev_shrunk":-0.00026483,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":5,"n":20,"win_rate_raw":0.6,"ev_raw":0.00079003,"win_rate_shrunk":0.50198223,"ev_shrunk":2.013e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}