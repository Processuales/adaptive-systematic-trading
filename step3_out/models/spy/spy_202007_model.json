{"fold_id":"spy_202007","symbol":"SPY","test_start_utc":"2020-07-01 00:00:00+00:00","test_end_utc":"2020-08-01 00:00:00+00:00","n_train":490,"n_test":14,"n_trades_test":6,"policy_score_test":1.03504693,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":0.00061072,"agg_ev_cut":0.00081072,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":0.00061072,"agg_ev_cut":0.00081072,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00491781,"b_sl":0.00368836,"beta_proxy":0.67399294,"cost_rt":0.00061234,"dist_to_hi":-0.00270054,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.0003601,"gap_sd":0.00472447,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040445,"qqq_pullback_z":0.63806453,"qqq_range_ratio":0.00289732,"qqq_sigma":0.00260329,"qqq_trend_score":2.26172081,"qqq_u_atr":0.0034317,"qqq_vol_z":-0.31378355,"range_ratio":0.00221357,"regime_agree":1.0,"ret_spread":-0.00015711,"rs_log":0.5140359,"same_bar_ambiguous":0.0,"sigma":0.00184752,"sigma_prank":0.318,"slip_half":0.00017617,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.92987728,"trend_score":2.20473864,"truncated_horizon":0.0,"u_atr":0.00245891,"u_atr_prank":0.326,"vol_z":-0.28335428},"mu":[11.88009592,0.00563158,0.004216,0.65860064,0.00067539,-0.00513935,0.00032067,0.05995204,0.00035247,0.00432064,7.32374101,7.0,0.05973621,0.56283962,0.0,0.00040623,0.53372919,0.00345312,0.00293225,2.32030821,0.00379807,-0.2346493,0.00251604,0.90647482,-5.161e-05,0.51623451,0.0,0.00215345,0.37452758,0.0002077,8e-05,6.82494005,8.21040302,2.33331285,0.0,0.00280042,0.37829257,-0.22465688],"sd":[0.47479592,0.00243284,0.00182019,0.13238226,0.00017144,0.00860665,0.00066649,0.23739796,0.00028951,0.0013891,4.90321066,3.97654997,0.01037903,1.08363701,1.0,0.00091355,1.07567189,0.00199263,0.00126782,1.70741861,0.00150336,0.90638055,0.00153558,0.291167,0.00141743,0.06659675,1.0,0.00101849,0.29970772,8.572e-05,1.0,3.72888801,2.24876127,1.42078466,1.0,0.00120882,0.27977127,0.86683709],"beta":[0.48441247,-0.01563184,0.02055279,0.02142996,-0.00994883,-0.02944681,0.01410798,-0.0236934,0.01563184,0.02480522,0.03692671,0.07620935,-0.01532416,-0.00836297,-0.00657747,0.0,0.06476164,-0.09353655,-0.02538907,0.00757211,-0.02747112,0.02950839,-0.04778619,-0.05932207,0.02289669,-0.04423848,0.05100906,0.0,-0.01114456,0.02743745,-0.02944681,0.0,0.09136903,-0.04351641,0.01397682,0.0,0.02317248,0.01169735,0.07940848],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00491781,"b_sl":0.00368836,"beta_proxy":0.67399294,"cost_rt":0.00061234,"dist_to_hi":-0.00270054,"ema_fast_slope":0.00030579,"entry_overnight":0.0,"gap_mu":0.0003601,"gap_sd":0.00472447,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040445,"qqq_pullback_z":0.63806453,"qqq_range_ratio":0.00289732,"qqq_sigma":0.00260329,"qqq_trend_score":2.26172081,"qqq_u_atr":0.0034317,"qqq_vol_z":-0.31378355,"range_ratio":0.00221357,"regime_agree":1.0,"ret_spread":-0.00015711,"rs_log":0.5140359,"same_bar_ambiguous":0.0,"sigma":0.00184752,"sigma_prank":0.318,"slip_half":0.00017617,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.92987728,"trend_score":2.20473864,"truncated_horizon":0.0,"u_atr":0.00245891,"u_atr_prank":0.326,"vol_z":-0.28335428},"mu":[11.88009592,0.00563158,0.004216,0.65860064,0.00067539,-0.00513935,0.00032067,0.05995204,0.00035247,0.00432064,7.32374101,7.0,0.05973621,0.56283962,0.0,0.00040623,0.53372919,0.00345312,0.00293225,2.32030821,0.00379807,-0.2346493,0.00251604,0.90647482,-5.161e-05,0.51623451,0.0,0.00215345,0.37452758,0.0002077,8e-05,6.82494005,8.21040302,2.33331285,0.0,0.00280042,0.37829257,-0.22465688],"sd":[0.47479592,0.00243284,0.00182019,0.13238226,0.00017144,0.00860665,0.00066649,0.23739796,0.00028951,0.0013891,4.90321066,3.97654997,0.01037903,1.08363701,1.0,0.00091355,1.07567189,0.00199263,0.00126782,1.70741861,0.00150336,0.90638055,0.00153558,0.291167,0.00141743,0.06659675,1.0,0.00101849,0.29970772,8.572e-05,1.0,3.72888801,2.24876127,1.42078466,1.0,0.00120882,0.27977127,0.86683709],"beta":[-9.987e-05,3.267e-05,-4.906e-05,2.892e-05,-0.00010512,8.801e-05,-0.00017531,0.00037506,-3.267e-05,0.00010646,0.00025286,0.00104722,9.288e-05,-0.00038699,-0.0005123,0.0,0.00046636,-0.00078418,-0.00016028,0.00063895,-0.00040888,-0.00108882,-0.00079266,-0.00028424,8.87e-05,-0.00052155,4.079e-05,0.0,-0.00019548,-0.00037303,8.801e-05,0.0,0.00105699,-0.00044815,2.192e-05,0.0,0.00018582,0.00057538,0.00091577],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202007_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202007_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202007_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202007_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.29786376,0.30870887,0.31538414,0.6006854,0.60246927,0.69909674,0.70206708,0.7662463],"y_thresholds":[0.0,0.0,0.46153846,0.46153846,0.72727273,0.72727273,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.05,0.05234093,0.05327945,0.12476221,0.16115297,0.39565442,0.4,0.62294508,0.99987],"y_thresholds":[0.15384615,0.15384615,0.33333333,0.33333333,0.57692308,0.57692308,0.64285714,0.78571429,0.78571429]},"uncertainty_calibration":{"u_q25":0.00890301,"u_q75":0.01973972},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.75156043,"max_abs_z":3.7257282,"top_shift_features":[{"feature":"gap_sd","abs_z":3.7257282},{"feature":"rs_log","abs_z":3.15002912},{"feature":"gap_tail","abs_z":1.57243508},{"feature":"gap_mu","abs_z":1.53867263},{"feature":"qqq_range_ratio","abs_z":1.50608695}]},"performance_drift":{"mean_abs_z":0.75156043,"recent_median_net_bps":13.03844213,"recent_median_calmar":1.09967042}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48441247,"global_ev":-9.987e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":35,"win_rate_raw":0.48571429,"ev_raw":-0.00048576,"win_rate_shrunk":0.48470643,"ev_shrunk":-0.000187,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":1,"n":76,"win_rate_raw":0.42105263,"ev_raw":-0.00071543,"win_rate_shrunk":0.45984437,"ev_shrunk":-0.00033855,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":2,"n":86,"win_rate_raw":0.55813953,"ev_raw":0.00014093,"win_rate_shrunk":0.51519173,"ev_shrunk":6.6e-07,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":125,"win_rate_raw":0.472,"ev_raw":0.00017507,"win_rate_shrunk":0.47807958,"ev_shrunk":4.041e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":4,"n":36,"win_rate_raw":0.5,"ev_raw":0.0001269,"win_rate_shrunk":0.48800959,"ev_shrunk":-4.754e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":5,"n":59,"win_rate_raw":0.47457627,"ev_raw":-0.00014988,"win_rate_shrunk":0.48117037,"ev_shrunk":-0.00011635,"ev_half_a":-0.00189529,"ev_half_b":0.00039314,"consistency":0.10697335,"prob_delta":-0.00034682,"ev_delta":-1.245e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}