{"fold_id":"spy_202008","symbol":"SPY","test_start_utc":"2020-08-01 00:00:00+00:00","test_end_utc":"2020-09-01 00:00:00+00:00","n_train":490,"n_test":15,"n_trades_test":4,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00245427,"agg_ev_cut":0.00265427,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00245427,"agg_ev_cut":0.00265427,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00489725,"b_sl":0.00367294,"beta_proxy":0.67399294,"cost_rt":0.0006107,"dist_to_hi":-0.00270054,"ema_fast_slope":0.0003054,"entry_overnight":0.0,"gap_mu":0.00037045,"gap_sd":0.00466702,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00039502,"qqq_pullback_z":0.62020356,"qqq_range_ratio":0.00286797,"qqq_sigma":0.00259395,"qqq_trend_score":2.2436347,"qqq_u_atr":0.00340786,"qqq_vol_z":-0.30857364,"range_ratio":0.00219673,"regime_agree":1.0,"ret_spread":-0.00016175,"rs_log":0.49352081,"same_bar_ambiguous":0.0,"sigma":0.00184316,"sigma_prank":0.314,"slip_half":0.00017535,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.86332607,"trend_score":2.18634922,"truncated_horizon":0.0,"u_atr":0.00244863,"u_atr_prank":0.326,"vol_z":-0.28042494},"mu":[11.88009592,0.00559488,0.00418845,0.65537678,0.00067235,-0.00509628,0.00031057,0.05995204,0.00038858,0.00428099,7.42925659,6.95683453,0.05941247,0.56018479,0.0,0.00039442,0.52886744,0.00345529,0.00291329,2.2970375,0.00378135,-0.22713233,0.00250953,0.90647482,-5.848e-05,0.50954783,0.0,0.00213266,0.36924221,0.00020618,8e-05,6.78657074,8.18579936,2.32336517,0.0,0.00278202,0.3757458,-0.21036729],"sd":[0.47479592,0.0024378,0.00182376,0.12947106,0.00016899,0.00859684,0.00066061,0.23739796,0.0002692,0.00135718,4.8250354,3.96060426,0.01028736,1.0950094,1.0,0.00091519,1.08765989,0.00202747,0.00126431,1.69973322,0.0015105,0.92118568,0.00155509,0.291167,0.00142086,0.06361589,1.0,0.0010087,0.2951183,8.449e-05,1.0,3.71593393,2.26232677,1.41843381,1.0,0.00121102,0.27935782,0.87257162],"beta":[0.48201439,-0.02169143,0.02662066,0.03132706,-0.01270985,-0.0240669,0.02188908,-0.04454268,0.02169143,0.02811202,0.01197602,0.07963057,-0.0485337,-0.01683817,0.00639791,0.0,0.07905731,-0.08623994,-0.01912845,-0.00273583,-0.04978579,0.01042941,-0.05775128,-0.0469436,0.02125809,-0.03907048,0.02693134,0.0,-0.00396795,-0.04574006,-0.0240669,0.0,0.13133639,-0.07031699,0.00295234,0.0,0.04076772,0.072978,0.06432134],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00489725,"b_sl":0.00367294,"beta_proxy":0.67399294,"cost_rt":0.0006107,"dist_to_hi":-0.00270054,"ema_fast_slope":0.0003054,"entry_overnight":0.0,"gap_mu":0.00037045,"gap_sd":0.00466702,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00039502,"qqq_pullback_z":0.62020356,"qqq_range_ratio":0.00286797,"qqq_sigma":0.00259395,"qqq_trend_score":2.2436347,"qqq_u_atr":0.00340786,"qqq_vol_z":-0.30857364,"range_ratio":0.00219673,"regime_agree":1.0,"ret_spread":-0.00016175,"rs_log":0.49352081,"same_bar_ambiguous":0.0,"sigma":0.00184316,"sigma_prank":0.314,"slip_half":0.00017535,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.86332607,"trend_score":2.18634922,"truncated_horizon":0.0,"u_atr":0.00244863,"u_atr_prank":0.326,"vol_z":-0.28042494},"mu":[11.88009592,0.00559488,0.00418845,0.65537678,0.00067235,-0.00509628,0.00031057,0.05995204,0.00038858,0.00428099,7.42925659,6.95683453,0.05941247,0.56018479,0.0,0.00039442,0.52886744,0.00345529,0.00291329,2.2970375,0.00378135,-0.22713233,0.00250953,0.90647482,-5.848e-05,0.50954783,0.0,0.00213266,0.36924221,0.00020618,8e-05,6.78657074,8.18579936,2.32336517,0.0,0.00278202,0.3757458,-0.21036729],"sd":[0.47479592,0.0024378,0.00182376,0.12947106,0.00016899,0.00859684,0.00066061,0.23739796,0.0002692,0.00135718,4.8250354,3.96060426,0.01028736,1.0950094,1.0,0.00091519,1.08765989,0.00202747,0.00126431,1.69973322,0.0015105,0.92118568,0.00155509,0.291167,0.00142086,0.06361589,1.0,0.0010087,0.2951183,8.449e-05,1.0,3.71593393,2.26232677,1.41843381,1.0,0.00121102,0.27935782,0.87257162],"beta":[-8.121e-05,1.388e-05,-2.965e-05,0.00010431,-0.00014331,0.00020869,-0.00019586,0.00029508,-1.388e-05,0.00011265,-3.775e-05,0.00109608,1.399e-05,-0.00044104,-0.00043668,0.0,0.00051315,-0.00060185,-0.00022773,0.00058887,-0.00065968,-0.00147531,-0.00092861,-0.00015328,-6.108e-05,-0.00048302,-0.00021093,0.0,-0.00023002,-0.00111034,0.00020869,0.0,0.00116256,-0.00046899,-5.872e-05,0.0,0.00037385,0.00117014,0.00082219],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202008_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202008_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202008_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202008_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.16947956,0.18052942,0.21029266,0.30427583,0.30765857,0.62578858,0.63055356,0.65720747,0.6572697,0.66890834,0.69875068,0.85694043],"y_thresholds":[0.0,0.0,0.33333333,0.33333333,0.51428571,0.51428571,0.6,0.6,0.75,0.75,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.01857143,0.02848861,0.22517191,0.23784342,0.325,0.34590634,0.56666667,0.64987,0.99987],"y_thresholds":[0.30769231,0.33333333,0.33333333,0.55555556,0.55555556,0.65,0.65,0.8125,0.8125]},"uncertainty_calibration":{"u_q25":0.01137959,"u_q75":0.02040439},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-0.10014596,"policy_score":0.12046046,"brier":0.27357975,"rmse":0.0077108,"n_val":70},{"cfg_name":"tree_heavy","inner_split":2,"score":21.88706426,"policy_score":22.10359075,"brier":0.26937774,"rmse":0.0072466,"n_val":70},{"cfg_name":"tree_stable","inner_split":1,"score":-0.33589718,"policy_score":-0.11846845,"brier":0.26893858,"rmse":0.0078624,"n_val":70},{"cfg_name":"tree_stable","inner_split":2,"score":-4.40985055,"policy_score":-4.1905954,"brier":0.27247349,"rmse":0.00745001,"n_val":70},{"cfg_name":"blend_conservative","inner_split":1,"score":-0.31579209,"policy_score":-0.1026909,"brier":0.26339735,"rmse":0.00777659,"n_val":70},{"cfg_name":"blend_conservative","inner_split":2,"score":17.31822092,"policy_score":17.53449094,"brier":0.2680366,"rmse":0.00762129,"n_val":70},{"selected_cfg":"tree_heavy","nested_score":10.89345915}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.51005738,"max_abs_z":3.06078993,"top_shift_features":[{"feature":"gap_sd","abs_z":3.06078993},{"feature":"rs_log","abs_z":2.94590825},{"feature":"sigma_prank","abs_z":0.9634243},{"feature":"u_atr_prank","abs_z":0.84818876},{"feature":"beta_proxy","abs_z":0.84552598}]},"performance_drift":{"mean_abs_z":0.51005738,"recent_median_net_bps":15.50124266,"recent_median_calmar":1.09967042}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48201439,"global_ev":-8.121e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":64,"win_rate_raw":0.484375,"ev_raw":-0.00022607,"win_rate_shrunk":0.48283547,"ev_shrunk":-0.00013159,"ev_half_a":8.528e-05,"ev_half_b":-0.00032985,"consistency":0.22405387,"prob_delta":0.00018397,"ev_delta":-2.948e-05},{"cluster":1,"n":87,"win_rate_raw":0.52873563,"ev_raw":-0.00011328,"win_rate_shrunk":0.50165085,"ev_shrunk":-9.469e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":2,"n":143,"win_rate_raw":0.46153846,"ev_raw":0.00010086,"win_rate_shrunk":0.47088109,"ev_shrunk":1.779e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":3,"n":20,"win_rate_raw":0.65,"ev_raw":0.00117097,"win_rate_shrunk":0.50601233,"ev_shrunk":9.768e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":35,"win_rate_raw":0.48571429,"ev_raw":-7.999e-05,"win_rate_shrunk":0.48284985,"ev_shrunk":-8.093e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":5,"n":68,"win_rate_raw":0.41176471,"ev_raw":-0.00065561,"win_rate_shrunk":0.45660493,"ev_shrunk":-0.00028897,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}