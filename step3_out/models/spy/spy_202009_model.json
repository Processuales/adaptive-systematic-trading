{"fold_id":"spy_202009","symbol":"SPY","test_start_utc":"2020-09-01 00:00:00+00:00","test_end_utc":"2020-10-01 00:00:00+00:00","n_train":489,"n_test":6,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00245427,"agg_ev_cut":0.00265427,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00245427,"agg_ev_cut":0.00265427,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00492103,"b_sl":0.00369077,"beta_proxy":0.67456833,"cost_rt":0.00061216,"dist_to_hi":-0.00265038,"ema_fast_slope":0.0003001,"entry_overnight":0.0,"gap_mu":0.00038862,"gap_sd":0.00461076,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65858283,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040157,"qqq_pullback_z":0.64369204,"qqq_range_ratio":0.00292493,"qqq_sigma":0.00263005,"qqq_trend_score":2.23499422,"qqq_u_atr":0.0034719,"qqq_vol_z":-0.29980607,"range_ratio":0.00222203,"regime_agree":1.0,"ret_spread":-0.00015757,"rs_log":0.48388355,"same_bar_ambiguous":0.0,"sigma":0.00186561,"sigma_prank":0.325,"slip_half":0.00017608,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.9127549,"trend_score":2.24133918,"truncated_horizon":0.0,"u_atr":0.00245683,"u_atr_prank":0.34,"vol_z":-0.27820589},"mu":[11.88942308,0.00560823,0.00419876,0.65444247,0.00067166,-0.00510631,0.00031264,0.05528846,0.00041851,0.00425392,7.54086538,7.0,0.0599399,0.56768779,0.0,0.00039683,0.53434899,0.00347503,0.00292604,2.32092374,0.00380194,-0.20570486,0.00251406,0.90625,-6.647e-05,0.50285106,0.0,0.00213924,0.37708654,0.00020583,8e-05,6.83173077,8.20477715,2.36574967,0.0,0.0027893,0.38333654,-0.2012551],"sd":[0.45708488,0.00244463,0.00182851,0.12865161,0.00016887,0.00860794,0.00065989,0.22854244,0.00024202,0.00134352,4.74628025,3.9571017,0.01026962,1.09560267,1.0,0.0009171,1.09548578,0.00201726,0.00126182,1.73465227,0.00150589,0.92420305,0.0015547,0.2914806,0.00143006,0.06221752,1.0,0.00100883,0.29369292,8.443e-05,1.0,3.71594186,2.26190429,1.4291361,1.0,0.00121365,0.28003733,0.87333448],"beta":[0.49038462,-0.02926875,0.02682395,0.03872152,-0.01186844,-0.03419649,0.02057055,-0.04092383,0.02926875,0.01842225,0.01096906,0.07654589,-0.05529382,-0.02929745,0.00364369,0.0,0.06840983,-0.08041644,-0.01855759,-0.0202477,-0.04194851,0.03323475,-0.06280829,-0.06253318,0.01813431,-0.03845391,0.00728904,0.0,0.01029904,-0.04659979,-0.03419649,0.0,0.14971516,-0.11095516,0.00557128,0.0,0.06264593,0.0747718,0.07924406],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00492103,"b_sl":0.00369077,"beta_proxy":0.67456833,"cost_rt":0.00061216,"dist_to_hi":-0.00265038,"ema_fast_slope":0.0003001,"entry_overnight":0.0,"gap_mu":0.00038862,"gap_sd":0.00461076,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65858283,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040157,"qqq_pullback_z":0.64369204,"qqq_range_ratio":0.00292493,"qqq_sigma":0.00263005,"qqq_trend_score":2.23499422,"qqq_u_atr":0.0034719,"qqq_vol_z":-0.29980607,"range_ratio":0.00222203,"regime_agree":1.0,"ret_spread":-0.00015757,"rs_log":0.48388355,"same_bar_ambiguous":0.0,"sigma":0.00186561,"sigma_prank":0.325,"slip_half":0.00017608,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.9127549,"trend_score":2.24133918,"truncated_horizon":0.0,"u_atr":0.00245683,"u_atr_prank":0.34,"vol_z":-0.27820589},"mu":[11.88942308,0.00560823,0.00419876,0.65444247,0.00067166,-0.00510631,0.00031264,0.05528846,0.00041851,0.00425392,7.54086538,7.0,0.0599399,0.56768779,0.0,0.00039683,0.53434899,0.00347503,0.00292604,2.32092374,0.00380194,-0.20570486,0.00251406,0.90625,-6.647e-05,0.50285106,0.0,0.00213924,0.37708654,0.00020583,8e-05,6.83173077,8.20477715,2.36574967,0.0,0.0027893,0.38333654,-0.2012551],"sd":[0.45708488,0.00244463,0.00182851,0.12865161,0.00016887,0.00860794,0.00065989,0.22854244,0.00024202,0.00134352,4.74628025,3.9571017,0.01026962,1.09560267,1.0,0.0009171,1.09548578,0.00201726,0.00126182,1.73465227,0.00150589,0.92420305,0.0015547,0.2914806,0.00143006,0.06221752,1.0,0.00100883,0.29369292,8.443e-05,1.0,3.71594186,2.26190429,1.4291361,1.0,0.00121365,0.28003733,0.87333448],"beta":[1.129e-05,-4.523e-05,-1.512e-05,0.00015106,-9.629e-05,0.00015704,-0.00018514,0.00029692,4.523e-05,5.943e-05,1.511e-05,0.00103157,-5.512e-05,-0.00048773,-0.00041446,0.0,0.00046065,-0.0006031,-0.00021664,0.00054141,-0.00055266,-0.0013136,-0.00099255,-0.00028457,-8.083e-05,-0.00048892,-0.00030066,0.0,-0.00026389,-0.00111788,0.00015704,0.0,0.0012931,-0.00067313,-9.58e-05,0.0,0.00048564,0.00120608,0.0009609],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202009_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202009_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202009_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202009_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.2079793,0.24049079,0.2465716,0.30182777,0.31114158,0.33194548,0.33474363,0.47361555,0.49449802,0.52913575,0.54209931,0.73235746,0.75363551,0.79118393,0.79201352,0.85484494],"y_thresholds":[0.0,0.0,0.27272727,0.27272727,0.4,0.4,0.42105263,0.42105263,0.66666667,0.66666667,0.68421053,0.68421053,0.75,0.75,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.10263158,0.13231041,0.13352444,0.21061627,0.21666667,0.29891511,0.32061436,0.33655839,0.34270979,0.73788078,0.79245808,0.90377392,0.98671812,0.99987],"y_thresholds":[0.125,0.125,0.42857143,0.42857143,0.46666667,0.46666667,0.5,0.5,0.625,0.625,0.66666667,0.66666667,0.75,0.75]},"uncertainty_calibration":{"u_q25":0.01304329,"u_q75":0.01948757},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.79241073,"max_abs_z":2.79444736,"top_shift_features":[{"feature":"rs_log","abs_z":2.79444736},{"feature":"gap_mu","abs_z":2.32300456},{"feature":"qqq_range_ratio","abs_z":2.30625189},{"feature":"intraday_tail_frac","abs_z":1.92024023},{"feature":"qqq_u_atr","abs_z":1.66178647}]},"performance_drift":{"mean_abs_z":0.79241073,"recent_median_net_bps":22.60098836,"recent_median_calmar":14.71866906}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49038462,"global_ev":1.129e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":36,"win_rate_raw":0.5,"ev_raw":5.569e-05,"win_rate_shrunk":0.49260355,"ev_shrunk":2.154e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":131,"win_rate_raw":0.48854962,"ev_raw":0.00034712,"win_rate_shrunk":0.48942691,"ev_shrunk":0.00018657,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":2,"n":81,"win_rate_raw":0.58024691,"ev_raw":0.0003695,"win_rate_shrunk":0.52659778,"ev_shrunk":0.00015564,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":43,"win_rate_raw":0.48837209,"ev_raw":-0.00024785,"win_rate_shrunk":0.4898537,"ev_shrunk":-5.707e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":4,"n":56,"win_rate_raw":0.5,"ev_raw":0.00025548,"win_rate_shrunk":0.49344406,"ev_shrunk":8.899e-05,"ev_half_a":-0.00023322,"ev_half_b":0.0005487,"consistency":0.20113018,"prob_delta":0.00061535,"ev_delta":1.79e-05},{"cluster":5,"n":69,"win_rate_raw":0.37681159,"ev_raw":-0.00110664,"win_rate_shrunk":0.44892145,"ev_shrunk":-0.00039684,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}