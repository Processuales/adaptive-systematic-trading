{"fold_id":"spy_202010","symbol":"SPY","test_start_utc":"2020-10-01 00:00:00+00:00","test_end_utc":"2020-11-01 00:00:00+00:00","n_train":494,"n_test":11,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00332162,"agg_ev_cut":0.00352162,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.65,"aggressive_size":1.12,"ev_cut":0.00332162,"agg_ev_cut":0.00352162,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00495195,"b_sl":0.00371396,"beta_proxy":0.67896056,"cost_rt":0.00061216,"dist_to_hi":-0.00261257,"ema_fast_slope":0.0003001,"entry_overnight":0.0,"gap_mu":0.00039585,"gap_sd":0.00461076,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65970564,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040617,"qqq_pullback_z":0.66113514,"qqq_range_ratio":0.00292075,"qqq_sigma":0.00263516,"qqq_trend_score":2.27968414,"qqq_u_atr":0.00347798,"qqq_vol_z":-0.2956014,"range_ratio":0.00222203,"regime_agree":1.0,"ret_spread":-0.00016441,"rs_log":0.48088908,"same_bar_ambiguous":0.0,"sigma":0.00186561,"sigma_prank":0.335,"slip_half":0.00017608,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.9127549,"trend_score":2.24945936,"truncated_horizon":0.0,"u_atr":0.00247412,"u_atr_prank":0.347,"vol_z":-0.27820589},"mu":[11.89047619,0.00562078,0.00420825,0.65522513,0.0006743,-0.00509102,0.00031639,0.0547619,0.00043232,0.00425493,7.56190476,6.97619048,0.06033333,0.57171793,0.0,0.00040547,0.54499693,0.00347462,0.00293696,2.35260988,0.00381161,-0.20080368,0.00251318,0.90714286,-7.684e-05,0.49946415,0.0,0.00215011,0.38180476,0.00020715,8e-05,6.80952381,8.19934329,2.38407735,0.0,0.00279572,0.38852381,-0.20065438],"sd":[0.45502984,0.00243943,0.00182468,0.12825885,0.00017262,0.00857747,0.00066129,0.22751492,0.00023509,0.00133667,4.69837623,3.97245333,0.0106238,1.09637678,1.0,0.00091614,1.08923455,0.00200855,0.00126096,1.72883962,0.00150038,0.92288137,0.00154998,0.29023214,0.00142376,0.06288902,1.0,0.001015,0.29596636,8.631e-05,1.0,3.73361879,2.25252957,1.42313059,1.0,0.00121119,0.2817554,0.87419759],"beta":[0.49761905,-0.02206501,0.02131039,0.02821032,-0.01017485,-0.01512549,0.01823872,-0.0333615,0.02206501,0.01182045,0.01245219,0.06515789,-0.01650388,-0.01906388,0.00786944,0.0,0.06044792,-0.08401905,-0.02264219,-0.02856569,-0.0402887,0.02956526,-0.05567515,-0.06762407,0.02154709,-0.03913467,0.00413485,0.0,0.01261198,-0.05407495,-0.01512549,0.0,0.11114958,-0.08028958,0.00108939,0.0,0.04207785,0.06894631,0.07864396],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00495195,"b_sl":0.00371396,"beta_proxy":0.67896056,"cost_rt":0.00061216,"dist_to_hi":-0.00261257,"ema_fast_slope":0.0003001,"entry_overnight":0.0,"gap_mu":0.00039585,"gap_sd":0.00461076,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65970564,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040617,"qqq_pullback_z":0.66113514,"qqq_range_ratio":0.00292075,"qqq_sigma":0.00263516,"qqq_trend_score":2.27968414,"qqq_u_atr":0.00347798,"qqq_vol_z":-0.2956014,"range_ratio":0.00222203,"regime_agree":1.0,"ret_spread":-0.00016441,"rs_log":0.48088908,"same_bar_ambiguous":0.0,"sigma":0.00186561,"sigma_prank":0.335,"slip_half":0.00017608,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":7.9127549,"trend_score":2.24945936,"truncated_horizon":0.0,"u_atr":0.00247412,"u_atr_prank":0.347,"vol_z":-0.27820589},"mu":[11.89047619,0.00562078,0.00420825,0.65522513,0.0006743,-0.00509102,0.00031639,0.0547619,0.00043232,0.00425493,7.56190476,6.97619048,0.06033333,0.57171793,0.0,0.00040547,0.54499693,0.00347462,0.00293696,2.35260988,0.00381161,-0.20080368,0.00251318,0.90714286,-7.684e-05,0.49946415,0.0,0.00215011,0.38180476,0.00020715,8e-05,6.80952381,8.19934329,2.38407735,0.0,0.00279572,0.38852381,-0.20065438],"sd":[0.45502984,0.00243943,0.00182468,0.12825885,0.00017262,0.00857747,0.00066129,0.22751492,0.00023509,0.00133667,4.69837623,3.97245333,0.0106238,1.09637678,1.0,0.00091614,1.08923455,0.00200855,0.00126096,1.72883962,0.00150038,0.92288137,0.00154998,0.29023214,0.00142376,0.06288902,1.0,0.001015,0.29596636,8.631e-05,1.0,3.73361879,2.25252957,1.42313059,1.0,0.00121119,0.2817554,0.87419759],"beta":[7.345e-05,-1.295e-05,-1.877e-05,9.217e-05,-4.913e-05,0.00022691,-0.00018495,0.00022695,1.295e-05,2.12e-06,8.99e-05,0.00091529,0.00012488,-0.00040829,-0.00028964,0.0,0.00058637,-0.00082102,-0.00031577,0.00029481,-0.0004974,-0.00104713,-0.00091738,-0.00030372,-4.233e-05,-0.00048443,-0.00027579,0.0,-0.00019042,-0.00106546,0.00022691,0.0,0.00105154,-0.00055578,-0.00015464,0.0,0.00031551,0.0010949,0.00093904],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202010_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202010_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202010_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202010_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.29565032,0.39668082,0.40209914,0.50104368,0.50451418,0.58976431,0.61133585,0.63047069,0.63201737,0.73976712,0.74188401,0.83959433],"y_thresholds":[0.33333333,0.33333333,0.35294118,0.35294118,0.35714286,0.35714286,0.5,0.5,0.63157895,0.63157895,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.03173276,0.10531128,0.17105263,0.21899293,0.21999579,0.29215587,0.29326793,0.38168893,0.39441468,0.56666667,0.64987,0.99987],"y_thresholds":[0.0,0.0,0.3,0.3,0.4,0.4,0.42857143,0.42857143,0.625,0.625,1.0,1.0]},"uncertainty_calibration":{"u_q25":0.01429488,"u_q75":0.02025306},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-1.02927655,"policy_score":-0.81781342,"brier":0.26038801,"rmse":0.00808606,"n_val":71},{"cfg_name":"tree_heavy","inner_split":2,"score":2.83847658,"policy_score":3.04767299,"brier":0.26216247,"rmse":0.00628728,"n_val":71},{"cfg_name":"tree_stable","inner_split":1,"score":-0.13794509,"policy_score":0.08008615,"brier":0.26907966,"rmse":0.00811075,"n_val":71},{"cfg_name":"tree_stable","inner_split":2,"score":0.00593032,"policy_score":0.21569932,"brier":0.26284976,"rmse":0.00631584,"n_val":71},{"cfg_name":"blend_conservative","inner_split":1,"score":3.73306495,"policy_score":3.94400798,"brier":0.25976168,"rmse":0.00806088,"n_val":71},{"cfg_name":"blend_conservative","inner_split":2,"score":-0.42060202,"policy_score":-0.19943056,"brier":0.27829199,"rmse":0.00622623,"n_val":71},{"selected_cfg":"blend_conservative","nested_score":1.65623147}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.63205509,"max_abs_z":3.4663471,"top_shift_features":[{"feature":"intraday_tail_frac","abs_z":3.4663471},{"feature":"gap_mu","abs_z":2.68734606},{"feature":"rs_log","abs_z":2.56575432},{"feature":"tp_to_cost","abs_z":1.6232393},{"feature":"gap_tail","abs_z":1.59157664}]},"performance_drift":{"mean_abs_z":0.63205509,"recent_median_net_bps":15.72393594,"recent_median_calmar":7.90916974}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49761905,"global_ev":7.345e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":22,"win_rate_raw":0.77272727,"ev_raw":0.002513,"win_rate_shrunk":0.54024145,"ev_shrunk":0.00045141,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":122,"win_rate_raw":0.46721311,"ev_raw":0.00015959,"win_rate_shrunk":0.48229044,"ev_shrunk":0.00011688,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":2,"n":47,"win_rate_raw":0.4893617,"ev_raw":-0.0003864,"win_rate_shrunk":0.49529512,"ev_shrunk":-5.597e-05,"ev_half_a":-0.00085713,"ev_half_b":-0.00020642,"consistency":0.83732306,"prob_delta":-0.00194587,"ev_delta":-4.687e-05},{"cluster":3,"n":33,"win_rate_raw":0.48484848,"ev_raw":-0.00012224,"win_rate_shrunk":0.49486461,"ev_shrunk":3.124e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":4,"n":64,"win_rate_raw":0.46875,"ev_raw":-0.00026117,"win_rate_shrunk":0.48757764,"ev_shrunk":-4.294e-05,"ev_half_a":-0.00116348,"ev_half_b":0.00031724,"consistency":0.15745524,"prob_delta":-0.00158107,"ev_delta":-6.76e-06},{"cluster":5,"n":132,"win_rate_raw":0.5,"ev_raw":-3.787e-05,"win_rate_shrunk":0.49886621,"ev_shrunk":1.514e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}