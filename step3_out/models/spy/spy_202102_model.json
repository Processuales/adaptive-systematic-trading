{"fold_id":"spy_202102","symbol":"SPY","test_start_utc":"2021-02-01 00:00:00+00:00","test_end_utc":"2021-03-01 00:00:00+00:00","n_train":501,"n_test":9,"n_trades_test":4,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-0.00424725,"agg_ev_cut":-0.00404725,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-0.00424725,"agg_ev_cut":-0.00404725,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00521709,"b_sl":0.00391282,"beta_proxy":0.70561286,"cost_rt":0.00062393,"dist_to_hi":-0.00278335,"ema_fast_slope":0.00033214,"entry_overnight":0.0,"gap_mu":0.00039231,"gap_sd":0.00465666,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64739486,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040807,"qqq_pullback_z":0.62020356,"qqq_range_ratio":0.00318023,"qqq_sigma":0.00277532,"qqq_trend_score":2.29726283,"qqq_u_atr":0.00372816,"qqq_vol_z":-0.30963253,"range_ratio":0.00234277,"regime_agree":1.0,"ret_spread":-3.873e-05,"rs_log":0.47116654,"same_bar_ambiguous":0.0,"sigma":0.00197195,"sigma_prank":0.356,"slip_half":0.00018197,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.18412056,"trend_score":2.26254102,"truncated_horizon":0.0,"u_atr":0.00259076,"u_atr_prank":0.362,"vol_z":-0.34109446},"mu":[11.89671362,0.00673428,0.00504333,0.68430549,0.00071887,-0.00660428,0.00036378,0.05164319,0.00028921,0.00570077,8.95305164,7.02112676,0.06062207,0.54834092,0.0,0.000443,0.5317921,0.00386884,0.00334451,2.40145636,0.00430421,-0.22564891,0.00293035,0.92723005,1.691e-05,0.46824719,0.0,0.00264602,0.38781221,0.00022944,8e-05,6.85446009,8.78830646,2.36839016,0.0,0.00335237,0.39286854,-0.23468278],"sd":[0.44261122,0.00491999,0.00368799,0.14634605,0.00024472,0.01438565,0.00100942,0.22130561,0.00061209,0.00489578,5.32402232,3.95598134,0.01047691,1.11901009,1.0,0.00110764,1.10497006,0.00251359,0.00202243,1.67371019,0.00234372,0.93188098,0.0022802,0.25975852,0.00149984,0.07875036,1.0,0.00214735,0.29214438,0.00012236,0.0,3.71804903,2.89501265,1.38330792,1.0,0.00245671,0.27772937,0.87726434],"beta":[0.50469484,-0.03677472,0.05580689,0.06014745,-0.04242532,-0.00502705,0.06015434,-0.03244669,0.03677472,0.00870888,-0.00365908,0.05980942,-0.0099329,-0.00624618,0.01335986,0.0,0.00693261,-0.03810896,-0.03405188,-0.05849827,-0.037111,-0.00853543,-0.05241147,-0.05336157,0.049686,-0.03797034,0.00659195,0.0,-0.00533739,-0.09709148,-0.00502705,0.0,0.11048514,-0.02093097,-0.03861297,0.0,0.06882272,0.09239867,0.04139296],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00521709,"b_sl":0.00391282,"beta_proxy":0.70561286,"cost_rt":0.00062393,"dist_to_hi":-0.00278335,"ema_fast_slope":0.00033214,"entry_overnight":0.0,"gap_mu":0.00039231,"gap_sd":0.00465666,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64739486,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040807,"qqq_pullback_z":0.62020356,"qqq_range_ratio":0.00318023,"qqq_sigma":0.00277532,"qqq_trend_score":2.29726283,"qqq_u_atr":0.00372816,"qqq_vol_z":-0.30963253,"range_ratio":0.00234277,"regime_agree":1.0,"ret_spread":-3.873e-05,"rs_log":0.47116654,"same_bar_ambiguous":0.0,"sigma":0.00197195,"sigma_prank":0.356,"slip_half":0.00018197,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.18412056,"trend_score":2.26254102,"truncated_horizon":0.0,"u_atr":0.00259076,"u_atr_prank":0.362,"vol_z":-0.34109446},"mu":[11.89671362,0.00673428,0.00504333,0.68430549,0.00071887,-0.00660428,0.00036378,0.05164319,0.00028921,0.00570077,8.95305164,7.02112676,0.06062207,0.54834092,0.0,0.000443,0.5317921,0.00386884,0.00334451,2.40145636,0.00430421,-0.22564891,0.00293035,0.92723005,1.691e-05,0.46824719,0.0,0.00264602,0.38781221,0.00022944,8e-05,6.85446009,8.78830646,2.36839016,0.0,0.00335237,0.39286854,-0.23468278],"sd":[0.44261122,0.00491999,0.00368799,0.14634605,0.00024472,0.01438565,0.00100942,0.22130561,0.00061209,0.00489578,5.32402232,3.95598134,0.01047691,1.11901009,1.0,0.00110764,1.10497006,0.00251359,0.00202243,1.67371019,0.00234372,0.93188098,0.0022802,0.25975852,0.00149984,0.07875036,1.0,0.00214735,0.29214438,0.00012236,0.0,3.71804903,2.89501265,1.38330792,1.0,0.00245671,0.27772937,0.87726434],"beta":[0.00024189,-0.00015625,0.00078652,0.00086687,-2.014e-05,0.00031138,0.00191048,-0.00083959,0.00015625,-0.00061233,-0.00124474,0.0008457,3.59e-06,-0.00032189,0.0003153,0.0,-8.975e-05,-0.00046448,-0.00049021,0.00031919,-0.00078603,-0.00153005,-0.00113129,-0.00026157,0.00045371,-0.00069958,-0.00025254,0.0,0.00021635,-0.00166769,0.00031138,0.0,0.00124145,-0.00063927,-0.00059159,0.0,0.00102753,0.00156124,0.00060017],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202102_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202102_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202102_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202102_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.22852182,0.2303324,0.32628479,0.33248735,0.45461458,0.46818112,0.51856487,0.5236862,0.53916211,0.54396822,0.69171313,0.70147654,0.78676717,0.84568834],"y_thresholds":[0.0,0.15384615,0.15384615,0.4,0.4,0.41666667,0.41666667,0.57142857,0.57142857,0.6875,0.6875,0.9,0.9,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.09285714,0.12400376,0.13,0.8,0.87],"y_thresholds":[0.42857143,0.42857143,0.484375,0.484375,1.0]},"uncertainty_calibration":{"u_q25":0.01565345,"u_q75":0.02656563},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":6.79112117,"policy_score":7.02529623,"brier":0.29422797,"rmse":0.00675204,"n_val":72},{"cfg_name":"tree_heavy","inner_split":2,"score":-0.07503501,"policy_score":0.17697996,"brier":0.31900023,"rmse":0.0063824,"n_val":72},{"cfg_name":"tree_stable","inner_split":1,"score":5.66032945,"policy_score":5.90565463,"brier":0.31054642,"rmse":0.00620768,"n_val":72},{"cfg_name":"tree_stable","inner_split":2,"score":0.39227303,"policy_score":0.62880761,"brier":0.29859066,"rmse":0.00629579,"n_val":72},{"cfg_name":"blend_conservative","inner_split":1,"score":8.13831213,"policy_score":8.39628809,"brier":0.32671867,"rmse":0.00646848,"n_val":72},{"cfg_name":"blend_conservative","inner_split":2,"score":1.41230301,"policy_score":1.64600692,"brier":0.2949163,"rmse":0.00625834,"n_val":72},{"selected_cfg":"blend_conservative","nested_score":4.77530757}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.25416813,"max_abs_z":2.19546522,"top_shift_features":[{"feature":"rs_log","abs_z":2.19546522},{"feature":"gap_mu","abs_z":1.64344111},{"feature":"gap_tail","abs_z":1.16560959},{"feature":"intraday_tail_frac","abs_z":0.98264468},{"feature":"u_atr_prank","abs_z":0.34607673}]},"performance_drift":{"mean_abs_z":0.25416813,"recent_median_net_bps":7.20995795,"recent_median_calmar":-1.18983978}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.50469484,"global_ev":0.00024189,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":37,"win_rate_raw":0.48648649,"ev_raw":0.00087086,"win_rate_shrunk":0.5004037,"ev_shrunk":0.00039012,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":1,"n":153,"win_rate_raw":0.44444444,"ev_raw":-0.00042133,"win_rate_shrunk":0.47092813,"ev_shrunk":-0.0001298,"ev_half_a":-0.00054028,"ev_half_b":-0.00028394,"consistency":0.93591405,"prob_delta":-0.03160273,"ev_delta":-0.00012148},{"cluster":2,"n":109,"win_rate_raw":0.5412844,"ev_raw":0.00066698,"win_rate_shrunk":0.52211083,"ev_shrunk":0.00044423,"ev_half_a":0.00110198,"ev_half_b":0.00015368,"consistency":0.76292467,"prob_delta":0.01328709,"ev_delta":0.00033891},{"cluster":3,"n":78,"win_rate_raw":0.52564103,"ev_raw":0.00022633,"win_rate_shrunk":0.51294637,"ev_shrunk":0.00023576,"ev_half_a":-0.0005316,"ev_half_b":0.000812,"consistency":0.16602508,"prob_delta":0.00136996,"ev_delta":3.914e-05},{"cluster":4,"n":19,"win_rate_raw":0.84210526,"ev_raw":0.00278757,"win_rate_shrunk":0.55081569,"ev_shrunk":0.00058986,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":30,"win_rate_raw":0.43333333,"ev_raw":-0.0002677,"win_rate_shrunk":0.49042254,"ev_shrunk":0.00013998,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}