{"fold_id":"spy_202103","symbol":"SPY","test_start_utc":"2021-03-01 00:00:00+00:00","test_end_utc":"2021-04-01 00:00:00+00:00","n_train":499,"n_test":9,"n_trades_test":5,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-0.00424725,"agg_ev_cut":-0.00404725,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-0.00424725,"agg_ev_cut":-0.00404725,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00532511,"b_sl":0.00399383,"beta_proxy":0.71536147,"cost_rt":0.00062911,"dist_to_hi":-0.00296262,"ema_fast_slope":0.00030911,"entry_overnight":0.0,"gap_mu":0.00038912,"gap_sd":0.00469081,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63108942,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040756,"qqq_pullback_z":0.57509356,"qqq_range_ratio":0.00327352,"qqq_sigma":0.00286303,"qqq_trend_score":2.28873875,"qqq_u_atr":0.0038203,"qqq_vol_z":-0.30910309,"range_ratio":0.00237562,"regime_agree":1.0,"ret_spread":-3.299e-05,"rs_log":0.46328455,"same_bar_ambiguous":0.0,"sigma":0.00201841,"sigma_prank":0.356,"slip_half":0.00018455,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.28506942,"trend_score":2.25287805,"truncated_horizon":0.0,"u_atr":0.00263154,"u_atr_prank":0.36,"vol_z":-0.36743947},"mu":[11.90588235,0.00692355,0.00518525,0.6909238,0.00072534,-0.00675309,0.00035803,0.04705882,0.00026289,0.00619648,9.35294118,7.00941176,0.06089412,0.52526597,0.0,0.00043427,0.5049972,0.0040231,0.00344979,2.3509415,0.00444717,-0.22226779,0.0030241,0.92470588,4.695e-05,0.4576478,0.0,0.00272399,0.38644235,0.00023267,8e-05,6.84235294,8.94498875,2.32662616,0.0,0.00344695,0.39151529,-0.25407256],"sd":[0.42352941,0.00497707,0.00373029,0.15032277,0.00024593,0.01440691,0.00101899,0.21176471,0.00063098,0.00553367,5.33778073,3.95443529,0.010251,1.11055131,1.0,0.0011382,1.09982358,0.00268531,0.00204124,1.62604688,0.00240714,0.94198537,0.00233696,0.26386533,0.00155296,0.08632478,1.0,0.00216234,0.29087997,0.00012297,1.0,3.71529039,2.94818593,1.31952505,1.0,0.00248427,0.27870673,0.87848813],"beta":[0.49882353,-0.02507806,0.05214923,0.05723301,-0.04054394,-0.01688776,0.06206264,-0.02499145,0.02507806,0.01201478,-0.0176892,0.08138597,0.00543273,-0.00501244,0.01439162,0.0,-0.01363397,-0.03164175,-0.03634194,-0.05190554,-0.03911031,0.03116073,-0.06001709,-0.0331223,0.04809411,-0.04222267,-0.02693064,0.0,-0.02633633,-0.08977056,-0.01688776,0.0,0.09838053,-0.0553141,-0.04185871,0.0,0.0674006,0.10793836,0.03713238],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00532511,"b_sl":0.00399383,"beta_proxy":0.71536147,"cost_rt":0.00062911,"dist_to_hi":-0.00296262,"ema_fast_slope":0.00030911,"entry_overnight":0.0,"gap_mu":0.00038912,"gap_sd":0.00469081,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63108942,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00040756,"qqq_pullback_z":0.57509356,"qqq_range_ratio":0.00327352,"qqq_sigma":0.00286303,"qqq_trend_score":2.28873875,"qqq_u_atr":0.0038203,"qqq_vol_z":-0.30910309,"range_ratio":0.00237562,"regime_agree":1.0,"ret_spread":-3.299e-05,"rs_log":0.46328455,"same_bar_ambiguous":0.0,"sigma":0.00201841,"sigma_prank":0.356,"slip_half":0.00018455,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.28506942,"trend_score":2.25287805,"truncated_horizon":0.0,"u_atr":0.00263154,"u_atr_prank":0.36,"vol_z":-0.36743947},"mu":[11.90588235,0.00692355,0.00518525,0.6909238,0.00072534,-0.00675309,0.00035803,0.04705882,0.00026289,0.00619648,9.35294118,7.00941176,0.06089412,0.52526597,0.0,0.00043427,0.5049972,0.0040231,0.00344979,2.3509415,0.00444717,-0.22226779,0.0030241,0.92470588,4.695e-05,0.4576478,0.0,0.00272399,0.38644235,0.00023267,8e-05,6.84235294,8.94498875,2.32662616,0.0,0.00344695,0.39151529,-0.25407256],"sd":[0.42352941,0.00497707,0.00373029,0.15032277,0.00024593,0.01440691,0.00101899,0.21176471,0.00063098,0.00553367,5.33778073,3.95443529,0.010251,1.11055131,1.0,0.0011382,1.09982358,0.00268531,0.00204124,1.62604688,0.00240714,0.94198537,0.00233696,0.26386533,0.00155296,0.08632478,1.0,0.00216234,0.29087997,0.00012297,1.0,3.71529039,2.94818593,1.31952505,1.0,0.00248427,0.27870673,0.87848813],"beta":[0.00024426,4.008e-05,0.00057744,0.00071268,2.828e-05,9.888e-05,0.0019105,-0.00060609,-4.008e-05,-0.00029342,-0.00086323,0.00097385,0.00010677,-0.00033471,0.00040569,0.0,-0.00073239,-0.00031344,-0.00018826,0.00048824,-0.00067018,-0.00059257,-0.00117149,-0.00020845,0.00042724,-0.00085059,-0.00043181,0.0,-4.463e-05,-0.00145282,9.888e-05,0.0,0.00117468,-0.00119187,-0.00074449,0.0,0.00098343,0.00167585,0.00050596],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202103_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202103_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202103_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202103_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.24444271,0.33547205,0.33751719,0.3969123,0.41346209,0.51674768,0.55092399,0.59517157,0.60039552,0.69292732,0.70103443,0.76007224,0.85304475],"y_thresholds":[0.14285714,0.14285714,0.4,0.4,0.52631579,0.52631579,0.6,0.6,0.73333333,0.73333333,0.8,0.8,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.03421053,0.48,0.4870021,0.55834637,0.55977501,0.61402217,0.64987,0.81428571],"y_thresholds":[0.44897959,0.44897959,0.5,0.5,0.6,0.6,0.625,0.625]},"uncertainty_calibration":{"u_q25":0.01277942,"u_q75":0.02169593},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.50594396,"max_abs_z":1.59395986,"top_shift_features":[{"feature":"rs_log","abs_z":1.59395986},{"feature":"qqq_sigma","abs_z":1.55676573},{"feature":"gap_mu","abs_z":1.54960268},{"feature":"qqq_u_atr","abs_z":1.44398658},{"feature":"gap_tail","abs_z":1.17113619}]},"performance_drift":{"mean_abs_z":0.50594396,"recent_median_net_bps":15.56964974,"recent_median_calmar":-1.18983978}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49882353,"global_ev":0.00024426,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":193,"win_rate_raw":0.48186528,"ev_raw":4.522e-05,"win_rate_shrunk":0.48836685,"ev_shrunk":0.00012153,"ev_half_a":-0.00044507,"ev_half_b":0.00051075,"consistency":0.19026089,"prob_delta":-0.0019895,"ev_delta":2.312e-05},{"cluster":1,"n":39,"win_rate_raw":0.51282051,"ev_raw":0.00090832,"win_rate_shrunk":0.50225675,"ev_shrunk":0.00040715,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":2,"n":28,"win_rate_raw":0.42857143,"ev_raw":-0.00033089,"win_rate_shrunk":0.48553259,"ev_shrunk":0.00013545,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":3,"n":9,"win_rate_raw":0.44444444,"ev_raw":0.00202671,"win_rate_shrunk":0.49502964,"ev_shrunk":0.00036862,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":4,"n":138,"win_rate_raw":0.5,"ev_raw":3.071e-05,"win_rate_shrunk":0.4994528,"ev_shrunk":0.00013004,"ev_half_a":7.482e-05,"ev_half_b":-3.389e-05,"consistency":0.24320566,"prob_delta":0.00015304,"ev_delta":3.163e-05},{"cluster":5,"n":18,"win_rate_raw":0.77777778,"ev_raw":0.00258035,"win_rate_shrunk":0.53520887,"ev_shrunk":0.00054897,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}