{"fold_id":"spy_202104","symbol":"SPY","test_start_utc":"2021-04-01 00:00:00+00:00","test_end_utc":"2021-05-01 00:00:00+00:00","n_train":496,"n_test":15,"n_trades_test":7,"policy_score_test":3.69895418,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00120974,"agg_ev_cut":0.00140974,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00120974,"agg_ev_cut":0.00140974,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00554849,"b_sl":0.00415596,"beta_proxy":0.70723993,"cost_rt":0.00063709,"dist_to_hi":-0.00293164,"ema_fast_slope":0.00034286,"entry_overnight":0.0,"gap_mu":0.0003877,"gap_sd":0.00475182,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65377628,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00042372,"qqq_pullback_z":0.60776048,"qqq_range_ratio":0.00335755,"qqq_sigma":0.00293547,"qqq_trend_score":2.28998237,"qqq_u_atr":0.00392462,"qqq_vol_z":-0.30424272,"range_ratio":0.00239332,"regime_agree":1.0,"ret_spread":-5.199e-05,"rs_log":0.4598035,"same_bar_ambiguous":0.0,"sigma":0.00204547,"sigma_prank":0.352,"slip_half":0.00018855,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.39686809,"trend_score":2.24696182,"truncated_horizon":0.0,"u_atr":0.00275046,"u_atr_prank":0.346,"vol_z":-0.37801989},"mu":[11.90047393,0.00702238,0.00525873,0.68697342,0.00072881,-0.00671021,0.00037059,0.04976303,0.00024246,0.00657526,9.62559242,7.03080569,0.06090047,0.53864814,0.0,0.00044394,0.50739281,0.0041089,0.0035248,2.33197304,0.00454399,-0.21570483,0.00305341,0.91943128,3.443e-05,0.44933891,0.0,0.0027587,0.37825592,0.0002344,8e-05,6.86018957,9.03270734,2.3242076,0.0,0.00349507,0.38417536,-0.26187913],"sd":[0.43490998,0.00498948,0.00373927,0.14941169,0.00024573,0.01446787,0.00102507,0.21745499,0.00064569,0.00593926,5.27599491,3.98117595,0.01032159,1.10355327,1.0,0.00116245,1.0932774,0.00268976,0.00203479,1.6371792,0.00241446,0.9291554,0.00234052,0.27217164,0.00162901,0.08984893,1.0,0.00216521,0.28999884,0.00012287,1.0,3.74062847,2.96191406,1.32050971,1.0,0.00248989,0.28024217,0.86888433],"beta":[0.50473934,-0.02563098,0.05457328,0.05903861,-0.02024719,-0.01391613,0.06071981,-0.01728608,0.02563098,0.01387597,-0.00081861,0.07055588,-0.00593233,-0.0012209,0.01770116,0.0,-0.03243187,-0.02115218,-0.02815201,-0.06645005,-0.03348984,0.02251597,-0.06114792,-0.04137445,0.04662631,-0.0450363,0.00058942,0.0,-0.01833265,-0.08451754,-0.01391613,0.0,0.11221566,-0.05263051,-0.04400026,0.0,0.06796689,0.10650147,0.03803404],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00554849,"b_sl":0.00415596,"beta_proxy":0.70723993,"cost_rt":0.00063709,"dist_to_hi":-0.00293164,"ema_fast_slope":0.00034286,"entry_overnight":0.0,"gap_mu":0.0003877,"gap_sd":0.00475182,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65377628,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00042372,"qqq_pullback_z":0.60776048,"qqq_range_ratio":0.00335755,"qqq_sigma":0.00293547,"qqq_trend_score":2.28998237,"qqq_u_atr":0.00392462,"qqq_vol_z":-0.30424272,"range_ratio":0.00239332,"regime_agree":1.0,"ret_spread":-5.199e-05,"rs_log":0.4598035,"same_bar_ambiguous":0.0,"sigma":0.00204547,"sigma_prank":0.352,"slip_half":0.00018855,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.39686809,"trend_score":2.24696182,"truncated_horizon":0.0,"u_atr":0.00275046,"u_atr_prank":0.346,"vol_z":-0.37801989},"mu":[11.90047393,0.00702238,0.00525873,0.68697342,0.00072881,-0.00671021,0.00037059,0.04976303,0.00024246,0.00657526,9.62559242,7.03080569,0.06090047,0.53864814,0.0,0.00044394,0.50739281,0.0041089,0.0035248,2.33197304,0.00454399,-0.21570483,0.00305341,0.91943128,3.443e-05,0.44933891,0.0,0.0027587,0.37825592,0.0002344,8e-05,6.86018957,9.03270734,2.3242076,0.0,0.00349507,0.38417536,-0.26187913],"sd":[0.43490998,0.00498948,0.00373927,0.14941169,0.00024573,0.01446787,0.00102507,0.21745499,0.00064569,0.00593926,5.27599491,3.98117595,0.01032159,1.10355327,1.0,0.00116245,1.0932774,0.00268976,0.00203479,1.6371792,0.00241446,0.9291554,0.00234052,0.27217164,0.00162901,0.08984893,1.0,0.00216521,0.28999884,0.00012287,1.0,3.74062847,2.96191406,1.32050971,1.0,0.00248989,0.28024217,0.86888433],"beta":[0.00025585,3.377e-05,0.0006456,0.00077334,0.00020138,0.00011338,0.00194744,-0.00063435,-3.377e-05,-0.00029277,-0.00090415,0.00095255,6.898e-05,-0.00030845,0.0003823,0.0,-0.00078936,-0.00022484,-0.00020431,0.00020875,-0.00064525,-0.0005089,-0.00107323,-0.00033488,0.00050967,-0.00084704,-0.00025269,0.0,7.918e-05,-0.00135479,0.00011338,0.0,0.0012923,-0.00124581,-0.00076699,0.0,0.00102906,0.00168526,0.00044383],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202104_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202104_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202104_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202104_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.22411913,0.37039527,0.37621477,0.39478619,0.39556647,0.57441459,0.57472669,0.58101172,0.59439165,0.74844191,0.75723992,0.81540014],"y_thresholds":[0.22727273,0.22727273,0.33333333,0.33333333,0.42857143,0.42857143,0.5,0.5,0.7826087,0.7826087,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.35514552,0.3673913,0.50571361,0.51488706,0.70454545,0.7173913,0.88759311,0.99987],"y_thresholds":[0.35,0.35,0.47826087,0.47826087,0.5,0.5,0.83333333,1.0,1.0]},"uncertainty_calibration":{"u_q25":0.01208518,"u_q75":0.01879227},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":1.67986518,"policy_score":1.88525772,"brier":0.25668856,"rmse":0.00643806,"n_val":71},{"cfg_name":"tree_heavy","inner_split":2,"score":1.12435874,"policy_score":1.35810601,"brier":0.29626196,"rmse":0.0057754,"n_val":71},{"cfg_name":"tree_stable","inner_split":1,"score":0.64973658,"policy_score":0.89697539,"brier":0.31275707,"rmse":0.0063355,"n_val":71},{"cfg_name":"tree_stable","inner_split":2,"score":-0.89446203,"policy_score":-0.65001776,"brier":0.31172912,"rmse":0.00532371,"n_val":71},{"cfg_name":"blend_conservative","inner_split":1,"score":1.68645683,"policy_score":1.88644714,"brier":0.24994411,"rmse":0.00626611,"n_val":71},{"cfg_name":"blend_conservative","inner_split":2,"score":1.16656513,"policy_score":1.40548169,"brier":0.30420137,"rmse":0.00538277,"n_val":71},{"selected_cfg":"blend_conservative","nested_score":1.42651098}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.39549874,"max_abs_z":1.64510131,"top_shift_features":[{"feature":"rs_log","abs_z":1.64510131},{"feature":"gap_mu","abs_z":1.28199575},{"feature":"gap_tail","abs_z":1.23507317},{"feature":"beta_proxy","abs_z":1.1686582},{"feature":"spread_half","abs_z":1.0}]},"performance_drift":{"mean_abs_z":0.39549874,"recent_median_net_bps":32.44331953,"recent_median_calmar":-1.18983978}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.50473934,"global_ev":0.00025585,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":66,"win_rate_raw":0.53030303,"ev_raw":0.00026304,"win_rate_shrunk":0.51381032,"ev_shrunk":0.0002584,"ev_half_a":-0.00201157,"ev_half_b":0.0022777,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":108,"win_rate_raw":0.55555556,"ev_raw":0.00082321,"win_rate_shrunk":0.52881018,"ev_shrunk":0.0005246,"ev_half_a":0.00122389,"ev_half_b":0.00014205,"consistency":0.72954093,"prob_delta":0.01756066,"ev_delta":0.00038271},{"cluster":2,"n":161,"win_rate_raw":0.47204969,"ev_raw":-0.0002534,"win_rate_shrunk":0.48600968,"ev_shrunk":-3.593e-05,"ev_half_a":-0.00052279,"ev_half_b":4.047e-05,"consistency":0.21479622,"prob_delta":-0.00402306,"ev_delta":-7.72e-06},{"cluster":3,"n":47,"win_rate_raw":0.5106383,"ev_raw":0.00058478,"win_rate_shrunk":0.50639952,"ev_shrunk":0.00034842,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":9,"win_rate_raw":0.44444444,"ev_raw":0.00202671,"win_rate_shrunk":0.50053272,"ev_shrunk":0.0003794,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":5,"n":31,"win_rate_raw":0.4516129,"ev_raw":-0.00010408,"win_rate_shrunk":0.49383259,"ev_shrunk":0.00018196,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}