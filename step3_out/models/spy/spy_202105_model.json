{"fold_id":"spy_202105","symbol":"SPY","test_start_utc":"2021-05-01 00:00:00+00:00","test_end_utc":"2021-06-01 00:00:00+00:00","n_train":502,"n_test":6,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00120974,"agg_ev_cut":0.00140974,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00120974,"agg_ev_cut":0.00140974,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00559547,"b_sl":0.0041817,"beta_proxy":0.70213206,"cost_rt":0.00063794,"dist_to_hi":-0.0027424,"ema_fast_slope":0.00035851,"entry_overnight":0.0,"gap_mu":0.00038728,"gap_sd":0.00476935,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.66029421,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00043692,"qqq_pullback_z":0.62569709,"qqq_range_ratio":0.0033852,"qqq_sigma":0.00300637,"qqq_trend_score":2.35864031,"qqq_u_atr":0.00395829,"qqq_vol_z":-0.30394705,"range_ratio":0.00241621,"regime_agree":1.0,"ret_spread":-6.085e-05,"rs_log":0.4558356,"same_bar_ambiguous":0.0,"sigma":0.00209109,"sigma_prank":0.324,"slip_half":0.00018897,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.45204888,"trend_score":2.27126501,"truncated_horizon":0.0,"u_atr":0.00277625,"u_atr_prank":0.328,"vol_z":-0.36858417},"mu":[11.8969555,0.00703524,0.00526809,0.68101509,0.00072908,-0.00649887,0.00038046,0.05152225,0.00024184,0.00695757,9.67915691,7.04215457,0.06083138,0.56135749,0.0,0.00046111,0.52902451,0.00416751,0.00355362,2.37248787,0.0045942,-0.21366889,0.00306019,0.92037471,2.968e-05,0.44165367,0.0,0.00275827,0.36839813,0.00023454,8e-05,6.87119438,9.05896922,2.37730509,0.0,0.00350095,0.37517564,-0.25986704],"sd":[0.44212083,0.00495787,0.00371561,0.1495084,0.00024446,0.01440822,0.0010233,0.22106041,0.00064748,0.00628787,5.22851229,3.99215895,0.01030903,1.11792754,1.0,0.00116568,1.10593068,0.00270003,0.00201627,1.65864724,0.00239977,0.93535614,0.00232879,0.27071222,0.00164338,0.09689458,1.0,0.00215182,0.29062807,0.00012223,1.0,3.75225637,2.95418031,1.3433855,1.0,0.00247421,0.27987634,0.87493166],"beta":[0.51288056,-0.02687131,0.05609715,0.06120397,-0.03732604,-0.01385221,0.05753506,-0.01506827,0.02687131,0.06149911,0.06660493,0.04884309,-0.00081996,-0.00375685,0.01848922,0.0,-0.04084933,0.00022403,-0.01037651,-0.06132948,-0.02396509,0.02633098,-0.05502528,-0.0545695,0.04535287,-0.04323874,0.01013156,0.0,-0.0177845,-0.07396082,-0.01385221,0.0,0.10141309,-0.04311303,-0.04567451,0.0,0.07141585,0.08950266,0.04176097],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00559547,"b_sl":0.0041817,"beta_proxy":0.70213206,"cost_rt":0.00063794,"dist_to_hi":-0.0027424,"ema_fast_slope":0.00035851,"entry_overnight":0.0,"gap_mu":0.00038728,"gap_sd":0.00476935,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.66029421,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00043692,"qqq_pullback_z":0.62569709,"qqq_range_ratio":0.0033852,"qqq_sigma":0.00300637,"qqq_trend_score":2.35864031,"qqq_u_atr":0.00395829,"qqq_vol_z":-0.30394705,"range_ratio":0.00241621,"regime_agree":1.0,"ret_spread":-6.085e-05,"rs_log":0.4558356,"same_bar_ambiguous":0.0,"sigma":0.00209109,"sigma_prank":0.324,"slip_half":0.00018897,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.45204888,"trend_score":2.27126501,"truncated_horizon":0.0,"u_atr":0.00277625,"u_atr_prank":0.328,"vol_z":-0.36858417},"mu":[11.8969555,0.00703524,0.00526809,0.68101509,0.00072908,-0.00649887,0.00038046,0.05152225,0.00024184,0.00695757,9.67915691,7.04215457,0.06083138,0.56135749,0.0,0.00046111,0.52902451,0.00416751,0.00355362,2.37248787,0.0045942,-0.21366889,0.00306019,0.92037471,2.968e-05,0.44165367,0.0,0.00275827,0.36839813,0.00023454,8e-05,6.87119438,9.05896922,2.37730509,0.0,0.00350095,0.37517564,-0.25986704],"sd":[0.44212083,0.00495787,0.00371561,0.1495084,0.00024446,0.01440822,0.0010233,0.22106041,0.00064748,0.00628787,5.22851229,3.99215895,0.01030903,1.11792754,1.0,0.00116568,1.10593068,0.00270003,0.00201627,1.65864724,0.00239977,0.93535614,0.00232879,0.27071222,0.00164338,0.09689458,1.0,0.00215182,0.29062807,0.00012223,1.0,3.75225637,2.95418031,1.3433855,1.0,0.00247421,0.27987634,0.87493166],"beta":[0.00029515,-2.002e-05,0.00071078,0.0008476,-0.00020518,0.00016441,0.00198611,-0.00066588,2.002e-05,0.0004653,-0.00018332,0.00062227,4.052e-05,-0.0003257,0.00030192,0.0,-0.00079994,0.00011137,5.9e-05,0.00029423,-0.00046892,-0.00043316,-0.00104823,-0.00054325,0.00045459,-0.00073675,-0.00034397,0.0,5.397e-05,-0.00123766,0.00016441,0.0,0.00120128,-0.00098815,-0.00072763,0.0,0.00112146,0.0013596,0.00060154],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202105_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202105_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202105_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202105_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.29318802,0.37558617,0.38308576,0.48192521,0.49788822,0.51820219,0.53673984,0.71088666,0.7165067,0.76554141,0.77301269,0.80604506,0.829418],"y_thresholds":[0.0,0.0,0.35714286,0.35714286,0.4,0.4,0.48148148,0.48148148,0.7,0.7,0.9,0.9,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.02407407,0.71958648,0.76397438,0.85595151,0.87,0.98707355],"y_thresholds":[0.43548387,0.43548387,0.75,0.75,0.77777778,0.77777778]},"uncertainty_calibration":{"u_q25":0.01252927,"u_q75":0.01985836},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.31730499,"max_abs_z":1.33766003,"top_shift_features":[{"feature":"rs_log","abs_z":1.33766003},{"feature":"gap_tail","abs_z":1.26988729},{"feature":"spread_half","abs_z":1.0},{"feature":"regime_agree","abs_z":0.93667974},{"feature":"qqq_trend_score","abs_z":0.82006221}]},"performance_drift":{"mean_abs_z":0.31730499,"recent_median_net_bps":19.03806956,"recent_median_calmar":0.91986443}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.51288056,"global_ev":0.00029515,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":188,"win_rate_raw":0.48404255,"ev_raw":8.16e-06,"win_rate_shrunk":0.49527814,"ev_shrunk":0.00011997,"ev_half_a":-0.00043164,"ev_half_b":0.00045741,"consistency":0.19443425,"prob_delta":-0.00342251,"ev_delta":2.333e-05},{"cluster":1,"n":127,"win_rate_raw":0.51968504,"ev_raw":0.00013597,"win_rate_shrunk":0.51637922,"ev_shrunk":0.00021331,"ev_half_a":0.00015931,"ev_half_b":9.624e-05,"consistency":0.98423037,"prob_delta":0.00344349,"ev_delta":0.00020994},{"cluster":2,"n":20,"win_rate_raw":0.8,"ev_raw":0.0030809,"win_rate_shrunk":0.55389762,"ev_shrunk":0.00069312,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":43,"win_rate_raw":0.53488372,"ev_raw":-0.00018648,"win_rate_shrunk":0.51868508,"ev_shrunk":0.0001681,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":21,"win_rate_raw":0.52380952,"ev_raw":0.00299498,"win_rate_shrunk":0.51450828,"ev_shrunk":0.00069726,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":28,"win_rate_raw":0.42857143,"ev_raw":-0.00033089,"win_rate_shrunk":0.49693019,"ev_shrunk":0.00017671,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}