{"fold_id":"spy_202106","symbol":"SPY","test_start_utc":"2021-06-01 00:00:00+00:00","test_end_utc":"2021-07-01 00:00:00+00:00","n_train":499,"n_test":10,"n_trades_test":5,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00075267,"agg_ev_cut":0.00095267,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00075267,"agg_ev_cut":0.00095267,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00575888,"b_sl":0.00431916,"beta_proxy":0.68902567,"cost_rt":0.00064115,"dist_to_hi":-0.00291382,"ema_fast_slope":0.00037809,"entry_overnight":0.0,"gap_mu":0.0003999,"gap_sd":0.00487165,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.68314894,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.000459,"qqq_pullback_z":0.61395311,"qqq_range_ratio":0.00350347,"qqq_sigma":0.00313014,"qqq_trend_score":2.28560118,"qqq_u_atr":0.00406294,"qqq_vol_z":-0.31170804,"range_ratio":0.00249646,"regime_agree":1.0,"ret_spread":-5.268e-05,"rs_log":0.45282346,"same_bar_ambiguous":0.0,"sigma":0.00213601,"sigma_prank":0.34,"slip_half":0.00019057,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.67759023,"trend_score":2.27126501,"truncated_horizon":0.0,"u_atr":0.00286937,"u_atr_prank":0.34,"vol_z":-0.38604774},"mu":[11.90588235,0.00723186,0.00541601,0.67513184,0.00073247,-0.00685537,0.00038085,0.04705882,0.0002747,0.00717568,9.61647059,6.95529412,0.06185882,0.55342379,0.0,0.00044833,0.50972614,0.00431748,0.00364742,2.32521212,0.00474529,-0.21897859,0.00315049,0.92,4.882e-05,0.43246906,0.0,0.00282357,0.37157647,0.00023624,8e-05,6.79058824,9.26034878,2.38377483,0.0,0.00360015,0.38237176,-0.26317017],"sd":[0.42352941,0.00501531,0.00375877,0.14824094,0.00024294,0.01458954,0.00104963,0.21176471,0.00069054,0.00631219,5.34998289,3.9770372,0.01123351,1.12882482,1.0,0.0012241,1.12253413,0.00295193,0.00202392,1.64335773,0.00246133,0.95526026,0.00243173,0.2712932,0.00171681,0.10237308,1.0,0.00215698,0.28637034,0.00012147,1.0,3.74051344,3.05039202,1.3414158,1.0,0.00250307,0.2821077,0.89323545],"beta":[0.51294118,-0.0288586,0.07235643,0.08181035,-0.00911473,-0.01807199,0.05936852,-0.02076866,0.0288586,0.06522809,0.10708654,0.04199013,-0.008197,-0.00286333,0.01844555,0.0,-0.04854015,0.0228188,0.034447,-0.06410553,-0.01750505,-0.01218298,-0.06812261,-0.08653299,0.03937372,-0.0325247,0.05901635,0.0,-0.03638202,-0.06996385,-0.01807199,0.0,0.11908467,-0.07383531,-0.05100432,0.0,0.1007257,0.09078322,0.04515396],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00575888,"b_sl":0.00431916,"beta_proxy":0.68902567,"cost_rt":0.00064115,"dist_to_hi":-0.00291382,"ema_fast_slope":0.00037809,"entry_overnight":0.0,"gap_mu":0.0003999,"gap_sd":0.00487165,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.68314894,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.000459,"qqq_pullback_z":0.61395311,"qqq_range_ratio":0.00350347,"qqq_sigma":0.00313014,"qqq_trend_score":2.28560118,"qqq_u_atr":0.00406294,"qqq_vol_z":-0.31170804,"range_ratio":0.00249646,"regime_agree":1.0,"ret_spread":-5.268e-05,"rs_log":0.45282346,"same_bar_ambiguous":0.0,"sigma":0.00213601,"sigma_prank":0.34,"slip_half":0.00019057,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.67759023,"trend_score":2.27126501,"truncated_horizon":0.0,"u_atr":0.00286937,"u_atr_prank":0.34,"vol_z":-0.38604774},"mu":[11.90588235,0.00723186,0.00541601,0.67513184,0.00073247,-0.00685537,0.00038085,0.04705882,0.0002747,0.00717568,9.61647059,6.95529412,0.06185882,0.55342379,0.0,0.00044833,0.50972614,0.00431748,0.00364742,2.32521212,0.00474529,-0.21897859,0.00315049,0.92,4.882e-05,0.43246906,0.0,0.00282357,0.37157647,0.00023624,8e-05,6.79058824,9.26034878,2.38377483,0.0,0.00360015,0.38237176,-0.26317017],"sd":[0.42352941,0.00501531,0.00375877,0.14824094,0.00024294,0.01458954,0.00104963,0.21176471,0.00069054,0.00631219,5.34998289,3.9770372,0.01123351,1.12882482,1.0,0.0012241,1.12253413,0.00295193,0.00202392,1.64335773,0.00246133,0.95526026,0.00243173,0.2712932,0.00171681,0.10237308,1.0,0.00215698,0.28637034,0.00012147,1.0,3.74051344,3.05039202,1.3414158,1.0,0.00250307,0.2821077,0.89323545],"beta":[0.00030408,-7.645e-05,0.00108749,0.0012898,2.614e-05,0.00019299,0.00217634,-0.00092959,7.645e-05,0.00054841,-0.0003224,0.000496,3.122e-05,-0.00013917,0.00044852,0.0,-0.00054791,0.00010178,0.00062018,0.0002499,-0.00049899,-0.00158578,-0.00108359,-0.00094934,0.00033171,-0.00041539,-0.00034439,0.0,-0.00012752,-0.00120196,0.00019299,0.0,0.00137045,-0.00111209,-0.00079929,0.0,0.00169473,0.00122039,0.00043417],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202106_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202106_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202106_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202106_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.14345247,0.1758513,0.17857294,0.25035838,0.25570753,0.5974053,0.61660568,0.81007795,0.814607,0.84651079,0.86081417,0.86522711],"y_thresholds":[0.0,0.0,0.25,0.25,0.46428571,0.46428571,0.5862069,0.5862069,0.6,0.6,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.04642857,0.39642857,0.41123621,0.69120642,0.84452461,0.93843534,0.99987],"y_thresholds":[0.47826087,0.47826087,0.5,0.5,0.66666667,0.66666667,1.0]},"uncertainty_calibration":{"u_q25":0.01088685,"u_q75":0.01539439},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":0.29694738,"policy_score":0.53639228,"brier":0.30175024,"rmse":0.00656611,"n_val":71},{"cfg_name":"tree_heavy","inner_split":2,"score":3.26639007,"policy_score":3.48010409,"brier":0.25517405,"rmse":0.01116674,"n_val":71},{"cfg_name":"tree_stable","inner_split":1,"score":-0.03308853,"policy_score":0.19338428,"brier":0.28502584,"rmse":0.00635172,"n_val":71},{"cfg_name":"tree_stable","inner_split":2,"score":2.70859624,"policy_score":2.9150727,"brier":0.24584385,"rmse":0.01104679,"n_val":71},{"cfg_name":"blend_conservative","inner_split":1,"score":0.51052941,"policy_score":0.75058935,"brier":0.30354184,"rmse":0.00620178,"n_val":71},{"cfg_name":"blend_conservative","inner_split":2,"score":1.30658252,"policy_score":1.53932264,"brier":0.28092134,"rmse":0.01102456,"n_val":71},{"selected_cfg":"tree_heavy","nested_score":1.78166872}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.42323621,"max_abs_z":1.4410931,"top_shift_features":[{"feature":"rs_log","abs_z":1.4410931},{"feature":"intraday_tail_frac","abs_z":1.11413599},{"feature":"gap_tail","abs_z":1.07838131},{"feature":"touch_delay_bars","abs_z":0.8144325},{"feature":"hold_bars","abs_z":0.79465333}]},"performance_drift":{"mean_abs_z":0.42323621,"recent_median_net_bps":5.63281959,"recent_median_calmar":0.91986443}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.51294118,"global_ev":0.00030408,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":183,"win_rate_raw":0.48087432,"ev_raw":-1.371e-05,"win_rate_shrunk":0.49357406,"ev_shrunk":0.00011215,"ev_half_a":-0.00025273,"ev_half_b":0.00026799,"consistency":0.21745499,"prob_delta":-0.00421148,"ev_delta":2.439e-05},{"cluster":1,"n":130,"win_rate_raw":0.53076923,"ev_raw":0.00041795,"win_rate_shrunk":0.52221176,"ev_shrunk":0.0003633,"ev_half_a":0.00032543,"ev_half_b":0.00054412,"consistency":0.94532697,"prob_delta":0.00876374,"ev_delta":0.00034343},{"cluster":2,"n":53,"win_rate_raw":0.56603774,"ev_raw":0.00141003,"win_rate_shrunk":0.52920775,"ev_shrunk":0.0006429,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":28,"win_rate_raw":0.42857143,"ev_raw":-0.00033089,"win_rate_shrunk":0.49697933,"ev_shrunk":0.00018395,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":4,"n":11,"win_rate_raw":0.36363636,"ev_raw":-0.00119632,"win_rate_shrunk":0.50040413,"ev_shrunk":0.00017809,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":5,"n":20,"win_rate_raw":0.75,"ev_raw":0.00125515,"win_rate_shrunk":0.54680672,"ev_shrunk":0.00043995,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}