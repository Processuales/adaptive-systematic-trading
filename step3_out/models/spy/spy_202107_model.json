{"fold_id":"spy_202107","symbol":"SPY","test_start_utc":"2021-07-01 00:00:00+00:00","test_end_utc":"2021-08-01 00:00:00+00:00","n_train":496,"n_test":15,"n_trades_test":4,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00075267,"agg_ev_cut":0.00095267,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00075267,"agg_ev_cut":0.00095267,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.0058645,"b_sl":0.00438657,"beta_proxy":0.6884369,"cost_rt":0.00065558,"dist_to_hi":-0.00299713,"ema_fast_slope":0.00038182,"entry_overnight":0.0,"gap_mu":0.00041304,"gap_sd":0.00499063,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.671133,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00048228,"qqq_pullback_z":0.60776048,"qqq_range_ratio":0.00360585,"qqq_sigma":0.00319385,"qqq_trend_score":2.27084606,"qqq_u_atr":0.0041385,"qqq_vol_z":-0.34889739,"range_ratio":0.00256998,"regime_agree":1.0,"ret_spread":-5.199e-05,"rs_log":0.44910381,"same_bar_ambiguous":0.0,"sigma":0.00220027,"sigma_prank":0.354,"slip_half":0.00019779,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.90822407,"trend_score":2.28372282,"truncated_horizon":0.0,"u_atr":0.00289877,"u_atr_prank":0.358,"vol_z":-0.41783261},"mu":[11.91469194,0.00745478,0.0055838,0.6756314,0.0007447,-0.00713331,0.00039814,0.04265403,0.00031191,0.00735025,9.54028436,6.94312796,0.06285545,0.55430362,0.0,0.00046655,0.51244806,0.00445858,0.00374882,2.3263918,0.00488019,-0.23178447,0.00324443,0.92890995,5.008e-05,0.42323029,0.0,0.00291999,0.37827488,0.00024235,8e-05,6.78199052,9.39473722,2.38904407,0.0,0.00371281,0.3891327,-0.27967917],"sd":[0.40415177,0.00511507,0.00383385,0.14764633,0.00025625,0.0147003,0.00109822,0.20207588,0.00073366,0.00628592,5.49209151,3.98059126,0.01213414,1.13769505,1.0,0.0013067,1.12851994,0.00308672,0.00208178,1.59455268,0.00253009,0.94482529,0.00251123,0.2569752,0.0017202,0.10740383,1.0,0.00220638,0.28989003,0.00012812,1.0,3.74796726,3.05929033,1.33883171,1.0,0.00255339,0.28428468,0.88156467],"beta":[0.51421801,-0.02531265,0.06253545,0.07379017,-0.00988305,-0.00956245,0.07220611,-0.03112017,0.02531265,0.07636035,0.10992711,0.04091374,-0.00124439,-0.00211254,0.01126689,0.0,-0.03998258,0.03299468,0.0053104,-0.00263678,-0.01817323,-0.00790314,-0.05302668,-0.04451479,0.02869171,-0.02528421,0.07215146,0.0,-0.07541588,-0.07618488,-0.00956245,0.0,0.12239868,-0.08565144,-0.0477674,0.0,0.09631377,0.09410652,0.03553412],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.0058645,"b_sl":0.00438657,"beta_proxy":0.6884369,"cost_rt":0.00065558,"dist_to_hi":-0.00299713,"ema_fast_slope":0.00038182,"entry_overnight":0.0,"gap_mu":0.00041304,"gap_sd":0.00499063,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.671133,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00048228,"qqq_pullback_z":0.60776048,"qqq_range_ratio":0.00360585,"qqq_sigma":0.00319385,"qqq_trend_score":2.27084606,"qqq_u_atr":0.0041385,"qqq_vol_z":-0.34889739,"range_ratio":0.00256998,"regime_agree":1.0,"ret_spread":-5.199e-05,"rs_log":0.44910381,"same_bar_ambiguous":0.0,"sigma":0.00220027,"sigma_prank":0.354,"slip_half":0.00019779,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":8.90822407,"trend_score":2.28372282,"truncated_horizon":0.0,"u_atr":0.00289877,"u_atr_prank":0.358,"vol_z":-0.41783261},"mu":[11.91469194,0.00745478,0.0055838,0.6756314,0.0007447,-0.00713331,0.00039814,0.04265403,0.00031191,0.00735025,9.54028436,6.94312796,0.06285545,0.55430362,0.0,0.00046655,0.51244806,0.00445858,0.00374882,2.3263918,0.00488019,-0.23178447,0.00324443,0.92890995,5.008e-05,0.42323029,0.0,0.00291999,0.37827488,0.00024235,8e-05,6.78199052,9.39473722,2.38904407,0.0,0.00371281,0.3891327,-0.27967917],"sd":[0.40415177,0.00511507,0.00383385,0.14764633,0.00025625,0.0147003,0.00109822,0.20207588,0.00073366,0.00628592,5.49209151,3.98059126,0.01213414,1.13769505,1.0,0.0013067,1.12851994,0.00308672,0.00208178,1.59455268,0.00253009,0.94482529,0.00251123,0.2569752,0.0017202,0.10740383,1.0,0.00220638,0.28989003,0.00012812,1.0,3.74796726,3.05929033,1.33883171,1.0,0.00255339,0.28428468,0.88156467],"beta":[0.00033146,1.418e-05,0.00078022,0.0009892,-3.054e-05,0.0002718,0.002382,-0.00148612,-1.418e-05,0.00072767,-0.00028688,0.00067708,-7.829e-05,-0.00023395,0.00049589,0.0,0.00021366,-0.00017599,-0.00056258,0.00161393,-0.00059042,-0.00104056,-0.00092668,0.00040261,0.00032602,-0.00024862,-0.00036654,0.0,-0.00097232,-0.00133399,0.0002718,0.0,0.00165826,-0.00152973,-0.00077025,0.0,0.00140755,0.00139971,0.00036805],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202107_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202107_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202107_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202107_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.14710384,0.15815932,0.18660997,0.74551207,0.75013555,0.80187842,0.80439439,0.8572288,0.87400201,0.88609502],"y_thresholds":[0.0,0.0,0.46511628,0.46511628,0.58333333,0.58333333,0.61538462,0.61538462,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.04534884,0.30352107,0.31084874,0.41872358,0.45833333,0.92739378,0.99987],"y_thresholds":[0.46341463,0.46341463,0.5,0.5,0.5625,0.5625,1.0]},"uncertainty_calibration":{"u_q25":0.01047348,"u_q75":0.0144029},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.34234278,"max_abs_z":1.59639226,"top_shift_features":[{"feature":"rs_log","abs_z":1.59639226},{"feature":"spread_half","abs_z":1.0},{"feature":"gap_tail","abs_z":0.75226682},{"feature":"qqq_vol_z","abs_z":0.61004349},{"feature":"beta_proxy","abs_z":0.59657508}]},"performance_drift":{"mean_abs_z":0.34234278,"recent_median_net_bps":5.63281959,"recent_median_calmar":-1.29607056}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.51421801,"global_ev":0.00033146,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":52,"win_rate_raw":0.55769231,"ev_raw":0.00132647,"win_rate_shrunk":0.5273614,"ev_shrunk":0.00063228,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":16,"win_rate_raw":0.5,"ev_raw":0.00150443,"win_rate_shrunk":0.5125453,"ev_shrunk":0.00046946,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":2,"n":181,"win_rate_raw":0.48618785,"ev_raw":4.265e-05,"win_rate_shrunk":0.49736266,"ev_shrunk":0.00015779,"ev_half_a":-4.263e-05,"ev_half_b":0.00016317,"consistency":0.23713701,"prob_delta":-0.00399703,"ev_delta":3.742e-05},{"cluster":3,"n":18,"win_rate_raw":0.77777778,"ev_raw":0.00132605,"win_rate_shrunk":0.54859537,"ev_shrunk":0.00046119,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":26,"win_rate_raw":0.46153846,"ev_raw":7.662e-05,"win_rate_shrunk":0.50483672,"ev_shrunk":0.00028608,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":5,"n":129,"win_rate_raw":0.51162791,"ev_raw":0.0001027,"win_rate_shrunk":0.51287615,"ev_shrunk":0.00021295,"ev_half_a":0.00026948,"ev_half_b":-0.00010145,"consistency":0.22681663,"prob_delta":-0.00030436,"ev_delta":4.83e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}