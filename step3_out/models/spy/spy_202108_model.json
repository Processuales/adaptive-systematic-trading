{"fold_id":"spy_202108","symbol":"SPY","test_start_utc":"2021-08-01 00:00:00+00:00","test_end_utc":"2021-09-01 00:00:00+00:00","n_train":502,"n_test":14,"n_trades_test":11,"policy_score_test":18.41189788,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.82,"aggressive_size":1.12,"ev_cut":-0.00082575,"agg_ev_cut":-0.00062575,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.82,"aggressive_size":1.12,"ev_cut":-0.00082575,"agg_ev_cut":-0.00062575,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00598394,"b_sl":0.00448068,"beta_proxy":0.69249068,"cost_rt":0.00066502,"dist_to_hi":-0.00308576,"ema_fast_slope":0.00038385,"entry_overnight":0.0,"gap_mu":0.0004185,"gap_sd":0.00508469,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00046631,"qqq_pullback_z":0.57509356,"qqq_range_ratio":0.00368718,"qqq_sigma":0.0032404,"qqq_trend_score":2.24403728,"qqq_u_atr":0.00419884,"qqq_vol_z":-0.33990457,"range_ratio":0.00259126,"regime_agree":1.0,"ret_spread":-1.925e-05,"rs_log":0.44661652,"same_bar_ambiguous":0.0,"sigma":0.00229937,"sigma_prank":0.356,"slip_half":0.00020251,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.01872038,"trend_score":2.27126501,"truncated_horizon":0.0,"u_atr":0.00296738,"u_atr_prank":0.362,"vol_z":-0.41759758},"mu":[11.91100703,0.00754225,0.00564883,0.67956731,0.00074933,-0.00721036,0.00039869,0.04449649,0.00034948,0.00744603,9.40983607,6.94847775,0.06302108,0.54634519,0.0,0.0004663,0.50402106,0.0045058,0.00378268,2.2857402,0.00492788,-0.23226034,0.00327337,0.92974239,7.46e-05,0.4157845,0.0,0.00296306,0.38001874,0.00024466,8e-05,6.78454333,9.46809782,2.36947365,0.0,0.00375541,0.38909602,-0.27613698],"sd":[0.41239083,0.00507678,0.00380468,0.14387244,0.00025529,0.01465647,0.00110176,0.20619542,0.00076458,0.00622764,5.56487788,3.98970176,0.01219022,1.13604623,1.0,0.0013023,1.12074167,0.00306869,0.00206683,1.56037428,0.00251006,0.94058312,0.00249907,0.25558067,0.0017438,0.11151262,1.0,0.00219521,0.28899846,0.00012764,1.0,3.75358626,3.03096243,1.32174882,1.0,0.00253343,0.28274085,0.88528858],"beta":[0.50819672,-0.02629703,0.06456639,0.07517394,-0.00094498,-0.01282881,0.06853076,-0.03385867,0.02629703,0.08551517,0.09896117,0.05308065,-0.00162827,-0.01566384,0.01562931,0.0,-0.03580179,0.0244657,-0.01686957,0.00043827,-0.03526473,-0.00929889,-0.04097098,-0.02861246,0.03333693,-0.03275045,0.05333624,0.0,-0.08003298,-0.08961836,-0.01282881,0.0,0.12110317,-0.09489914,-0.0401482,0.0,0.09640501,0.12113859,0.03147162],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00598394,"b_sl":0.00448068,"beta_proxy":0.69249068,"cost_rt":0.00066502,"dist_to_hi":-0.00308576,"ema_fast_slope":0.00038385,"entry_overnight":0.0,"gap_mu":0.0004185,"gap_sd":0.00508469,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64950395,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00046631,"qqq_pullback_z":0.57509356,"qqq_range_ratio":0.00368718,"qqq_sigma":0.0032404,"qqq_trend_score":2.24403728,"qqq_u_atr":0.00419884,"qqq_vol_z":-0.33990457,"range_ratio":0.00259126,"regime_agree":1.0,"ret_spread":-1.925e-05,"rs_log":0.44661652,"same_bar_ambiguous":0.0,"sigma":0.00229937,"sigma_prank":0.356,"slip_half":0.00020251,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.01872038,"trend_score":2.27126501,"truncated_horizon":0.0,"u_atr":0.00296738,"u_atr_prank":0.362,"vol_z":-0.41759758},"mu":[11.91100703,0.00754225,0.00564883,0.67956731,0.00074933,-0.00721036,0.00039869,0.04449649,0.00034948,0.00744603,9.40983607,6.94847775,0.06302108,0.54634519,0.0,0.0004663,0.50402106,0.0045058,0.00378268,2.2857402,0.00492788,-0.23226034,0.00327337,0.92974239,7.46e-05,0.4157845,0.0,0.00296306,0.38001874,0.00024466,8e-05,6.78454333,9.46809782,2.36947365,0.0,0.00375541,0.38909602,-0.27613698],"sd":[0.41239083,0.00507678,0.00380468,0.14387244,0.00025529,0.01465647,0.00110176,0.20619542,0.00076458,0.00622764,5.56487788,3.98970176,0.01219022,1.13604623,1.0,0.0013023,1.12074167,0.00306869,0.00206683,1.56037428,0.00251006,0.94058312,0.00249907,0.25558067,0.0017438,0.11151262,1.0,0.00219521,0.28899846,0.00012764,1.0,3.75358626,3.03096243,1.32174882,1.0,0.00253343,0.28274085,0.88528858],"beta":[0.00029832,-2.04e-05,0.00076007,0.00094214,8.623e-05,0.00025991,0.00235544,-0.0015409,2.04e-05,0.00071748,-0.00030992,0.00074873,-5.802e-05,-0.00032974,0.00062297,0.0,0.00024787,-0.0003263,-0.00110755,0.00177768,-0.00056995,-0.00063664,-0.00074815,0.00088563,0.0003572,-0.00032269,-0.00038406,0.0,-0.00138049,-0.00152297,0.00025991,0.0,0.00159646,-0.00165978,-0.0008315,0.0,0.00130668,0.00164348,0.00028586],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202108_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202108_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202108_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202108_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.13838855,0.14856166,0.15591429,0.29085933,0.32030099,0.42639931,0.44335746,0.82024628,0.83964842,0.86877324],"y_thresholds":[0.0,0.0,0.46153846,0.46153846,0.5,0.5,0.56818182,0.56818182,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.17541337,0.18361199,0.33593692,0.34608517,0.80799243,0.99987],"y_thresholds":[0.41666667,0.41666667,0.5,0.5,0.66666667,0.66666667,1.0]},"uncertainty_calibration":{"u_q25":0.01047405,"u_q75":0.01496165},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":4.66485681,"policy_score":4.88436315,"brier":0.27547529,"rmse":0.00644993,"n_val":72},{"cfg_name":"tree_heavy","inner_split":2,"score":3.19400627,"policy_score":3.41619748,"brier":0.26141552,"rmse":0.01306479,"n_val":72},{"cfg_name":"tree_stable","inner_split":1,"score":0.82228748,"policy_score":1.05818006,"brier":0.29764366,"rmse":0.00632992,"n_val":72},{"cfg_name":"tree_stable","inner_split":2,"score":4.39853442,"policy_score":4.61252639,"brier":0.25056021,"rmse":0.01303591,"n_val":72},{"cfg_name":"blend_conservative","inner_split":1,"score":1.2576636,"policy_score":1.47631543,"brier":0.27446147,"rmse":0.00640286,"n_val":72},{"cfg_name":"blend_conservative","inner_split":2,"score":3.32747867,"policy_score":3.53782195,"brier":0.24575617,"rmse":0.01301307,"n_val":72},{"selected_cfg":"tree_heavy","nested_score":3.92943154}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.3768273,"max_abs_z":1.53478199,"top_shift_features":[{"feature":"rs_log","abs_z":1.53478199},{"feature":"spread_half","abs_z":1.0},{"feature":"intraday_tail_frac","abs_z":0.82288897},{"feature":"tp_to_cost","abs_z":0.7997354},{"feature":"regime_agree","abs_z":0.76083335}]},"performance_drift":{"mean_abs_z":0.3768273,"recent_median_net_bps":17.3120654,"recent_median_calmar":10.05528799}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.50819672,"global_ev":0.00029832,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":91,"win_rate_raw":0.47252747,"ev_raw":-0.0006284,"win_rate_shrunk":0.4928133,"ev_shrunk":-0.00010135,"ev_half_a":-0.00096202,"ev_half_b":-0.00045603,"consistency":0.87350129,"prob_delta":-0.01343744,"ev_delta":-8.853e-05},{"cluster":1,"n":162,"win_rate_raw":0.48765432,"ev_raw":0.00025649,"win_rate_shrunk":0.49639577,"ev_shrunk":0.00027429,"ev_half_a":0.00027654,"ev_half_b":0.00023323,"consistency":0.98917141,"prob_delta":-0.01167317,"ev_delta":0.00027132},{"cluster":2,"n":48,"win_rate_raw":0.5625,"ev_raw":0.00053253,"win_rate_shrunk":0.52371194,"ev_shrunk":0.00036524,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":77,"win_rate_raw":0.57142857,"ev_raw":0.00070972,"win_rate_shrunk":0.53291171,"ev_shrunk":0.00045912,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":22,"win_rate_raw":0.5,"ev_raw":0.00254589,"win_rate_shrunk":0.50692681,"ev_shrunk":0.00064653,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":5,"n":27,"win_rate_raw":0.48148148,"ev_raw":0.00025172,"win_rate_shrunk":0.50328984,"ev_shrunk":0.00028976,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}