{"fold_id":"spy_202110","symbol":"SPY","test_start_utc":"2021-10-01 00:00:00+00:00","test_end_utc":"2021-11-01 00:00:00+00:00","n_train":503,"n_test":14,"n_trades_test":7,"policy_score_test":0.62994034,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00028559,"agg_ev_cut":-8.559e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00028559,"agg_ev_cut":-8.559e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00627758,"b_sl":0.00466333,"beta_proxy":0.69318543,"cost_rt":0.00067692,"dist_to_hi":-0.00313747,"ema_fast_slope":0.00039399,"entry_overnight":0.0,"gap_mu":0.00047911,"gap_sd":0.0054702,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.6410284,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00048228,"qqq_pullback_z":0.59283221,"qqq_range_ratio":0.00375449,"qqq_sigma":0.00334121,"qqq_trend_score":2.28749512,"qqq_u_atr":0.00434279,"qqq_vol_z":-0.31378355,"range_ratio":0.00268394,"regime_agree":1.0,"ret_spread":-1.325e-05,"rs_log":0.4441052,"same_bar_ambiguous":0.0,"sigma":0.00241788,"sigma_prank":0.333,"slip_half":0.00020846,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.24600605,"trend_score":2.27501256,"truncated_horizon":0.0,"u_atr":0.00310022,"u_atr_prank":0.35,"vol_z":-0.41851825},"mu":[11.89719626,0.00772408,0.00578414,0.68683234,0.00075843,-0.00719895,0.00041115,0.05140187,0.00041176,0.0076809,9.18925234,6.99766355,0.06247664,0.54627896,0.0,0.00047974,0.50901628,0.00458297,0.00385394,2.30316425,0.00501236,-0.23018184,0.00336477,0.93457944,5.573e-05,0.39656262,0.0,0.00303387,0.37225234,0.00024922,8e-05,6.82943925,9.6399499,2.37611371,0.0,0.0038442,0.38099065,-0.27859611],"sd":[0.44163205,0.00500941,0.00375459,0.13866891,0.00025281,0.01465191,0.00111052,0.22081603,0.00080961,0.00612258,5.75790204,4.00379425,0.01210109,1.13328918,1.0,0.00131139,1.10815994,0.00306306,0.0020458,1.53673505,0.00249045,0.94723902,0.00250377,0.24726648,0.00172738,0.12015207,1.0,0.0021683,0.28999957,0.00012641,0.0,3.76548177,2.9986613,1.30992917,1.0,0.00250073,0.28268507,0.88744316],"beta":[0.51168224,-0.02446788,0.05944475,0.06609521,-0.00399389,-0.0135644,0.05860262,-0.01167534,0.02446788,0.0906097,0.08712007,0.0578144,0.03383471,-0.03047503,0.02462915,0.0,-0.05135457,-0.00128609,-0.02456841,-0.01820753,-0.04511228,-0.01609142,-0.02133172,-0.0317836,0.02510388,-0.04340746,0.03786028,0.0,-0.03141474,-0.08430625,-0.0135644,-0.0,0.08746057,-0.0933759,-0.02909667,0.0,0.07939205,0.12453247,0.00770048],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00627758,"b_sl":0.00466333,"beta_proxy":0.69318543,"cost_rt":0.00067692,"dist_to_hi":-0.00313747,"ema_fast_slope":0.00039399,"entry_overnight":0.0,"gap_mu":0.00047911,"gap_sd":0.0054702,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.6410284,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00048228,"qqq_pullback_z":0.59283221,"qqq_range_ratio":0.00375449,"qqq_sigma":0.00334121,"qqq_trend_score":2.28749512,"qqq_u_atr":0.00434279,"qqq_vol_z":-0.31378355,"range_ratio":0.00268394,"regime_agree":1.0,"ret_spread":-1.325e-05,"rs_log":0.4441052,"same_bar_ambiguous":0.0,"sigma":0.00241788,"sigma_prank":0.333,"slip_half":0.00020846,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.24600605,"trend_score":2.27501256,"truncated_horizon":0.0,"u_atr":0.00310022,"u_atr_prank":0.35,"vol_z":-0.41851825},"mu":[11.89719626,0.00772408,0.00578414,0.68683234,0.00075843,-0.00719895,0.00041115,0.05140187,0.00041176,0.0076809,9.18925234,6.99766355,0.06247664,0.54627896,0.0,0.00047974,0.50901628,0.00458297,0.00385394,2.30316425,0.00501236,-0.23018184,0.00336477,0.93457944,5.573e-05,0.39656262,0.0,0.00303387,0.37225234,0.00024922,8e-05,6.82943925,9.6399499,2.37611371,0.0,0.0038442,0.38099065,-0.27859611],"sd":[0.44163205,0.00500941,0.00375459,0.13866891,0.00025281,0.01465191,0.00111052,0.22081603,0.00080961,0.00612258,5.75790204,4.00379425,0.01210109,1.13328918,1.0,0.00131139,1.10815994,0.00306306,0.0020458,1.53673505,0.00249045,0.94723902,0.00250377,0.24726648,0.00172738,0.12015207,1.0,0.0021683,0.28999957,0.00012641,0.0,3.76548177,2.9986613,1.30992917,1.0,0.00250073,0.28268507,0.88744316],"beta":[0.00028519,-2.819e-05,0.00069272,0.00082942,0.00027881,0.00022943,0.00223693,-0.00126446,2.819e-05,0.00090844,0.00059239,0.0005363,0.00024347,-0.00015517,0.00081229,0.0,1.014e-05,-0.00058301,-0.00106563,0.00132605,-0.000569,-0.00037284,-0.0005765,0.00065018,0.0002372,-0.0005076,0.00060277,0.0,-0.00083672,-0.00135309,0.00022943,-0.0,0.0012998,-0.00163651,-0.00072618,0.0,0.00110295,0.00146089,7.796e-05],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202110_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202110_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202110_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202110_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.23071914,0.23885799,0.24913672,0.30466494,0.32450372,0.35683209,0.3623506,0.68183183,0.68721958,0.74220053,0.75553387,0.77603835,0.78439128,0.86482962],"y_thresholds":[0.0,0.0,0.44444444,0.44444444,0.5,0.5,0.55,0.55,0.6,0.6,0.66666667,0.66666667,0.71428571,0.71428571]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.03468378,0.065,0.07222222,0.07333293,0.20806012,0.21046997,0.27976427,0.30996071,0.99987],"y_thresholds":[0.25,0.25,0.46153846,0.46153846,0.53846154,0.53846154,0.57142857,0.57142857,0.57894737,0.57894737]},"uncertainty_calibration":{"u_q25":0.00872174,"u_q75":0.01278642},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":3.17194561,"policy_score":3.43171344,"brier":0.33075422,"rmse":0.00585108,"n_val":72},{"cfg_name":"tree_heavy","inner_split":2,"score":6.58263524,"policy_score":6.78612809,"brier":0.23250927,"rmse":0.01455545,"n_val":72},{"cfg_name":"tree_stable","inner_split":1,"score":4.58919219,"policy_score":4.84300909,"brier":0.32363909,"rmse":0.00554379,"n_val":72},{"cfg_name":"tree_stable","inner_split":2,"score":5.41198001,"policy_score":5.61625101,"brier":0.23312781,"rmse":0.01471257,"n_val":72},{"cfg_name":"blend_conservative","inner_split":1,"score":4.75407925,"policy_score":4.9864432,"brier":0.29482244,"rmse":0.00562356,"n_val":72},{"cfg_name":"blend_conservative","inner_split":2,"score":4.88428,"policy_score":5.09757706,"brier":0.24518313,"rmse":0.01470486,"n_val":72},{"selected_cfg":"tree_stable","nested_score":5.0005861}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.36493079,"max_abs_z":1.37409799,"top_shift_features":[{"feature":"trend_score","abs_z":1.37409799},{"feature":"rs_log","abs_z":1.37028304},{"feature":"qqq_trend_score","abs_z":0.86508253},{"feature":"vol_z","abs_z":0.8283977},{"feature":"beta_proxy","abs_z":0.60087622}]},"performance_drift":{"mean_abs_z":0.36493079,"recent_median_net_bps":5.63281959,"recent_median_calmar":10.05528799}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.51168224,"global_ev":0.00028519,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":21,"win_rate_raw":0.76190476,"ev_raw":0.00237525,"win_rate_shrunk":0.54894943,"ev_shrunk":0.00059647,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":72,"win_rate_raw":0.5,"ev_raw":-0.00047901,"win_rate_shrunk":0.5073014,"ev_shrunk":-1.39e-06,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":2,"n":167,"win_rate_raw":0.48502994,"ev_raw":0.00015777,"win_rate_shrunk":0.49617376,"ev_shrunk":0.00021105,"ev_half_a":0.00015951,"ev_half_b":0.00015412,"consistency":0.99865268,"prob_delta":-0.01548759,"ev_delta":0.00021076},{"cluster":3,"n":116,"win_rate_raw":0.51724138,"ev_raw":0.00034048,"win_rate_shrunk":0.5144147,"ev_shrunk":0.00031237,"ev_half_a":-7.916e-05,"ev_half_b":0.00091427,"consistency":0.18791094,"prob_delta":0.00051346,"ev_delta":5.87e-05},{"cluster":4,"n":24,"win_rate_raw":0.5,"ev_raw":0.00043828,"win_rate_shrunk":0.5097352,"ev_shrunk":0.0003107,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":5,"n":28,"win_rate_raw":0.5,"ev_raw":0.0010824,"win_rate_shrunk":0.50947209,"ev_shrunk":0.00043601,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}