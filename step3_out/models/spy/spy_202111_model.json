{"fold_id":"spy_202111","symbol":"SPY","test_start_utc":"2021-11-01 00:00:00+00:00","test_end_utc":"2021-12-01 00:00:00+00:00","n_train":498,"n_test":14,"n_trades_test":7,"policy_score_test":1.1617137,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00028559,"agg_ev_cut":-8.559e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00028559,"agg_ev_cut":-8.559e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00647353,"b_sl":0.00485515,"beta_proxy":0.69378514,"cost_rt":0.00068407,"dist_to_hi":-0.00334431,"ema_fast_slope":0.00044934,"entry_overnight":0.0,"gap_mu":0.00048173,"gap_sd":0.0056647,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.61213956,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050394,"qqq_pullback_z":0.59283221,"qqq_range_ratio":0.0039773,"qqq_sigma":0.00341934,"qqq_trend_score":2.22635374,"qqq_u_atr":0.00444543,"qqq_vol_z":-0.29923835,"range_ratio":0.00277579,"regime_agree":1.0,"ret_spread":-2.977e-05,"rs_log":0.44164627,"same_bar_ambiguous":0.0,"sigma":0.00247747,"sigma_prank":0.356,"slip_half":0.00021203,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.40747404,"trend_score":2.25177756,"truncated_horizon":0.0,"u_atr":0.00323516,"u_atr_prank":0.361,"vol_z":-0.38223414},"mu":[11.89622642,0.00790642,0.00592081,0.69244508,0.00076739,-0.0074072,0.0004092,0.05188679,0.0004376,0.00783617,9.10377358,6.98584906,0.06237028,0.51704477,0.0,0.00048219,0.49706865,0.00470639,0.00397424,2.25765602,0.00515608,-0.20447243,0.00343716,0.92924528,3.255e-05,0.38698961,0.0,0.00311074,0.38275472,0.0002537,8e-05,6.82311321,9.8056011,2.32797335,0.0,0.0039352,0.39033962,-0.26375148],"sd":[0.4435969,0.00496529,0.00372179,0.13381803,0.00025251,0.01469878,0.00112759,0.22179845,0.00083305,0.00607995,5.86994141,3.99407435,0.01227081,1.13607013,1.0,0.00134358,1.11962193,0.00306935,0.00206867,1.53426954,0.00250559,0.94530297,0.00249484,0.25641468,0.00187081,0.12113992,1.0,0.00215448,0.29162446,0.00012626,0.0,3.76294417,2.93183338,1.27202425,1.0,0.00247926,0.28344514,0.88310787],"beta":[0.50235849,-0.02163386,0.048347,0.05540255,0.01104077,-0.01047112,0.06019795,-0.00496094,0.02163386,0.09210432,0.08754606,0.06459125,0.03092647,-0.02978257,0.03571849,0.0,-0.08042882,0.00446502,-0.02427214,-0.00328292,-0.02734243,0.00056364,-0.04493145,-0.03153492,0.02288855,-0.06307224,0.03228953,0.0,-0.04687856,-0.04760426,-0.01047112,0.0,0.0985444,-0.0866626,-0.04223134,0.0,0.0695112,0.098719,0.03854156],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00647353,"b_sl":0.00485515,"beta_proxy":0.69378514,"cost_rt":0.00068407,"dist_to_hi":-0.00334431,"ema_fast_slope":0.00044934,"entry_overnight":0.0,"gap_mu":0.00048173,"gap_sd":0.0056647,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.61213956,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050394,"qqq_pullback_z":0.59283221,"qqq_range_ratio":0.0039773,"qqq_sigma":0.00341934,"qqq_trend_score":2.22635374,"qqq_u_atr":0.00444543,"qqq_vol_z":-0.29923835,"range_ratio":0.00277579,"regime_agree":1.0,"ret_spread":-2.977e-05,"rs_log":0.44164627,"same_bar_ambiguous":0.0,"sigma":0.00247747,"sigma_prank":0.356,"slip_half":0.00021203,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.40747404,"trend_score":2.25177756,"truncated_horizon":0.0,"u_atr":0.00323516,"u_atr_prank":0.361,"vol_z":-0.38223414},"mu":[11.89622642,0.00790642,0.00592081,0.69244508,0.00076739,-0.0074072,0.0004092,0.05188679,0.0004376,0.00783617,9.10377358,6.98584906,0.06237028,0.51704477,0.0,0.00048219,0.49706865,0.00470639,0.00397424,2.25765602,0.00515608,-0.20447243,0.00343716,0.92924528,3.255e-05,0.38698961,0.0,0.00311074,0.38275472,0.0002537,8e-05,6.82311321,9.8056011,2.32797335,0.0,0.0039352,0.39033962,-0.26375148],"sd":[0.4435969,0.00496529,0.00372179,0.13381803,0.00025251,0.01469878,0.00112759,0.22179845,0.00083305,0.00607995,5.86994141,3.99407435,0.01227081,1.13607013,1.0,0.00134358,1.11962193,0.00306935,0.00206867,1.53426954,0.00250559,0.94530297,0.00249484,0.25641468,0.00187081,0.12113992,1.0,0.00215448,0.29162446,0.00012626,0.0,3.76294417,2.93183338,1.27202425,1.0,0.00247926,0.28344514,0.88310787],"beta":[0.0002836,-7.65e-06,0.00057918,0.00071856,0.0003256,0.00024008,0.00225826,-0.00118579,7.65e-06,0.00092969,0.00047822,0.00062593,0.00023868,-0.00019982,0.00081152,0.0,-0.00028818,-0.00050286,-0.00102849,0.00161441,-0.00039356,-0.00025451,-0.00074703,0.00063843,0.00015613,-0.00073751,0.00044275,0.0,-0.00089914,-0.00121516,0.00024008,0.0,0.0014341,-0.0016145,-0.00078824,0.0,0.00099744,0.00141561,0.00027638],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202111_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202111_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202111_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202111_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.20599494,0.20728957,0.34007418,0.36979007,0.8736044],"y_thresholds":[0.0,0.4375,0.4375,0.57894737,0.57894737]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.08125,0.10263158,0.22019649,0.22963099,0.99987],"y_thresholds":[0.25,0.4,0.4,0.64444444,0.64444444]},"uncertainty_calibration":{"u_q25":0.00884224,"u_q75":0.01270522},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.25521539,"max_abs_z":1.47635671,"top_shift_features":[{"feature":"rs_log","abs_z":1.47635671},{"feature":"spread_half","abs_z":1.0},{"feature":"gap_sd","abs_z":0.57471391},{"feature":"sigma","abs_z":0.43076116},{"feature":"qqq_trend_score","abs_z":0.40141188}]},"performance_drift":{"mean_abs_z":0.25521539,"recent_median_net_bps":4.25264999,"recent_median_calmar":3.02956864}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.50235849,"global_ev":0.0002836,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":22,"win_rate_raw":0.72727273,"ev_raw":0.00154115,"win_rate_shrunk":0.53720436,"ev_shrunk":0.00047843,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":106,"win_rate_raw":0.52830189,"ev_raw":0.00038433,"win_rate_shrunk":0.51452663,"ev_shrunk":0.00033084,"ev_half_a":0.00040419,"ev_half_b":0.0003384,"consistency":0.98355243,"prob_delta":0.01196801,"ev_delta":0.0003254},{"cluster":2,"n":66,"win_rate_raw":0.40909091,"ev_raw":-0.00119402,"win_rate_shrunk":0.46926354,"ev_shrunk":-0.00024072,"ev_half_a":-0.00155221,"ev_half_b":-0.00103829,"consistency":0.87151843,"prob_delta":-0.02884286,"ev_delta":-0.00020979},{"cluster":3,"n":42,"win_rate_raw":0.52380952,"ev_raw":0.00171944,"win_rate_shrunk":0.50791987,"ev_shrunk":0.00065585,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":160,"win_rate_raw":0.4875,"ev_raw":0.00015969,"win_rate_shrunk":0.49386792,"ev_shrunk":0.00021279,"ev_half_a":7.268e-05,"ev_half_b":0.00025831,"consistency":0.95359239,"prob_delta":-0.00809654,"ev_delta":0.00020292},{"cluster":5,"n":28,"win_rate_raw":0.5,"ev_raw":0.00095143,"win_rate_shrunk":0.50191229,"ev_shrunk":0.00040994,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}