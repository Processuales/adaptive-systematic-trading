{"fold_id":"spy_202112","symbol":"SPY","test_start_utc":"2021-12-01 00:00:00+00:00","test_end_utc":"2022-01-01 00:00:00+00:00","n_train":505,"n_test":10,"n_trades_test":5,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00088136,"agg_ev_cut":-0.00068136,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00088136,"agg_ev_cut":-0.00068136,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00654738,"b_sl":0.00491054,"beta_proxy":0.69318543,"cost_rt":0.00069239,"dist_to_hi":-0.00338422,"ema_fast_slope":0.00046173,"entry_overnight":0.0,"gap_mu":0.00051547,"gap_sd":0.00576544,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63617052,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050394,"qqq_pullback_z":0.58154761,"qqq_range_ratio":0.00415303,"qqq_sigma":0.00343571,"qqq_trend_score":2.20208136,"qqq_u_atr":0.00451181,"qqq_vol_z":-0.30572855,"range_ratio":0.00282478,"regime_agree":1.0,"ret_spread":-1.43e-05,"rs_log":0.43744907,"same_bar_ambiguous":0.0,"sigma":0.00251126,"sigma_prank":0.336,"slip_half":0.00021619,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.46522728,"trend_score":2.27501256,"truncated_horizon":0.0,"u_atr":0.00326273,"u_atr_prank":0.35,"vol_z":-0.38945721},"mu":[11.87906977,0.00795002,0.00595235,0.69315788,0.00077092,-0.00735247,0.00041533,0.06046512,0.00047708,0.00791923,8.89534884,7.03023256,0.06201163,0.52606441,0.0,0.00047987,0.49321674,0.00471683,0.00399477,2.2524376,0.00519807,-0.23093462,0.00345617,0.92790698,4.606e-05,0.3762001,0.0,0.00312319,0.37206047,0.00025546,8e-05,6.8627907,9.84968916,2.3791417,0.0,0.00395468,0.38132558,-0.27722599],"sd":[0.47669313,0.00490539,0.00367729,0.12889933,0.00025015,0.01462747,0.00112572,0.23834657,0.00084951,0.00598194,5.98530967,3.98386483,0.01227447,1.12760004,1.0,0.00134169,1.10806014,0.00304305,0.00204533,1.54707798,0.00247249,0.94875063,0.00247307,0.25864187,0.00184722,0.12303325,1.0,0.00213119,0.29064036,0.00012507,0.0,3.74814827,2.89989273,1.31671189,1.0,0.00245026,0.28225026,0.87819847],"beta":[0.50930233,-0.03071734,0.04448756,0.05523732,0.00059664,-0.01712004,0.0656297,-0.01077151,0.03071734,0.08739609,0.07232039,0.06843338,0.02116552,-0.02167851,0.03513861,0.0,-0.07414456,0.00675191,-0.01796831,0.03223533,-0.01224318,0.00227857,-0.05054358,-0.02503911,0.02024522,-0.06651355,0.02770177,0.0,-0.05576321,-0.07728831,-0.01712004,0.0,0.10833034,-0.10035443,-0.04509945,0.0,0.07673426,0.11974812,0.03791179],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00654738,"b_sl":0.00491054,"beta_proxy":0.69318543,"cost_rt":0.00069239,"dist_to_hi":-0.00338422,"ema_fast_slope":0.00046173,"entry_overnight":0.0,"gap_mu":0.00051547,"gap_sd":0.00576544,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63617052,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050394,"qqq_pullback_z":0.58154761,"qqq_range_ratio":0.00415303,"qqq_sigma":0.00343571,"qqq_trend_score":2.20208136,"qqq_u_atr":0.00451181,"qqq_vol_z":-0.30572855,"range_ratio":0.00282478,"regime_agree":1.0,"ret_spread":-1.43e-05,"rs_log":0.43744907,"same_bar_ambiguous":0.0,"sigma":0.00251126,"sigma_prank":0.336,"slip_half":0.00021619,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.46522728,"trend_score":2.27501256,"truncated_horizon":0.0,"u_atr":0.00326273,"u_atr_prank":0.35,"vol_z":-0.38945721},"mu":[11.87906977,0.00795002,0.00595235,0.69315788,0.00077092,-0.00735247,0.00041533,0.06046512,0.00047708,0.00791923,8.89534884,7.03023256,0.06201163,0.52606441,0.0,0.00047987,0.49321674,0.00471683,0.00399477,2.2524376,0.00519807,-0.23093462,0.00345617,0.92790698,4.606e-05,0.3762001,0.0,0.00312319,0.37206047,0.00025546,8e-05,6.8627907,9.84968916,2.3791417,0.0,0.00395468,0.38132558,-0.27722599],"sd":[0.47669313,0.00490539,0.00367729,0.12889933,0.00025015,0.01462747,0.00112572,0.23834657,0.00084951,0.00598194,5.98530967,3.98386483,0.01227447,1.12760004,1.0,0.00134169,1.10806014,0.00304305,0.00204533,1.54707798,0.00247249,0.94875063,0.00247307,0.25864187,0.00184722,0.12303325,1.0,0.00213119,0.29064036,0.00012507,0.0,3.74814827,2.89989273,1.31671189,1.0,0.00245026,0.28225026,0.87819847],"beta":[0.00035078,-8.767e-05,0.000632,0.00080503,0.00029428,0.00016888,0.00233922,-0.00134037,8.767e-05,0.00092946,0.00032191,0.00069344,-9.54e-06,-0.00014513,0.0008192,0.0,-0.00021907,-0.00044978,-0.00111556,0.00202019,-0.00041759,-0.00018337,-0.00078491,0.00070076,0.00021768,-0.00074318,0.00032326,0.0,-0.00122482,-0.00143108,0.00016888,0.0,0.00166747,-0.00182129,-0.00073682,0.0,0.00115107,0.00158344,0.00026724],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202112_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202112_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202112_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202112_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.14485573,0.16784299,0.16972184,0.17130876,0.17217164,0.38970963,0.39011985,0.8962959,0.90936791],"y_thresholds":[0.16666667,0.16666667,0.5,0.5,0.52173913,0.52173913,0.55813953,0.55813953,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.00171518,0.02826087,0.03096023,0.11651342,0.12067587,0.21977143,0.2213325,0.78333333],"y_thresholds":[0.0,0.25,0.42105263,0.42105263,0.5,0.5,0.60465116,0.60465116]},"uncertainty_calibration":{"u_q25":0.00760015,"u_q75":0.01157625},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-1e+18,"policy_score":-1e+18,"brier":0.25199201,"rmse":0.01251877,"n_val":72},{"cfg_name":"tree_heavy","inner_split":2,"score":10.07543565,"policy_score":10.32849567,"brier":0.30318493,"rmse":0.01283566,"n_val":72},{"cfg_name":"tree_stable","inner_split":1,"score":-1e+18,"policy_score":-1e+18,"brier":0.25194016,"rmse":0.01251928,"n_val":72},{"cfg_name":"tree_stable","inner_split":2,"score":8.98385408,"policy_score":9.20520234,"brier":0.2607195,"rmse":0.01290432,"n_val":72},{"cfg_name":"blend_conservative","inner_split":1,"score":-1e+18,"policy_score":-1e+18,"brier":0.25695076,"rmse":0.0127006,"n_val":72},{"cfg_name":"blend_conservative","inner_split":2,"score":10.66086176,"policy_score":10.89823779,"brier":0.28190073,"rmse":0.01297524,"n_val":72},{"selected_cfg":"tree_heavy","nested_score":-5e+17}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.25056817,"max_abs_z":1.34267377,"top_shift_features":[{"feature":"rs_log","abs_z":1.34267377},{"feature":"intraday_tail_frac","abs_z":1.13926571},{"feature":"sigma_prank","abs_z":0.86601167},{"feature":"gap_sd","abs_z":0.47178546},{"feature":"ema_fast_slope","abs_z":0.42999517}]},"performance_drift":{"mean_abs_z":0.25056817,"recent_median_net_bps":0.70945077,"recent_median_calmar":0.47578025}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.50930233,"global_ev":0.00035078,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":25,"win_rate_raw":0.8,"ev_raw":0.00283326,"win_rate_shrunk":0.55942261,"ev_shrunk":0.0007788,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":182,"win_rate_raw":0.47802198,"ev_raw":0.00012641,"win_rate_shrunk":0.49045126,"ev_shrunk":0.00021557,"ev_half_a":-8.242e-05,"ev_half_b":0.00046055,"consistency":0.2160644,"prob_delta":-0.00407305,"ev_delta":4.658e-05},{"cluster":2,"n":44,"win_rate_raw":0.56818182,"ev_raw":0.00080302,"win_rate_shrunk":0.52509926,"ev_shrunk":0.00047211,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":26,"win_rate_raw":0.5,"ev_raw":0.00079818,"win_rate_shrunk":0.50764575,"ev_shrunk":0.00043046,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":4,"n":22,"win_rate_raw":0.5,"ev_raw":0.00254589,"win_rate_shrunk":0.50786112,"ev_shrunk":0.00069087,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":5,"n":131,"win_rate_raw":0.48091603,"ev_raw":-0.00042059,"win_rate_shrunk":0.49448717,"ev_shrunk":-5.181e-05,"ev_half_a":-9.4e-06,"ev_half_b":-0.00092239,"consistency":0.77175188,"prob_delta":-0.01143363,"ev_delta":-3.998e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}