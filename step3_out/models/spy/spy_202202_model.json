{"fold_id":"spy_202202","symbol":"SPY","test_start_utc":"2022-02-01 00:00:00+00:00","test_end_utc":"2022-03-01 00:00:00+00:00","n_train":485,"n_test":6,"n_trades_test":5,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.0,"ev_cut":-0.00061374,"agg_ev_cut":-0.00041374,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.0,"ev_cut":-0.00061374,"agg_ev_cut":-0.00041374,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00678462,"b_sl":0.00504946,"beta_proxy":0.69584614,"cost_rt":0.00069289,"dist_to_hi":-0.00356553,"ema_fast_slope":0.00045108,"entry_overnight":0.0,"gap_mu":0.00051945,"gap_sd":0.00579927,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.6102264,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00052884,"qqq_pullback_z":0.57132587,"qqq_range_ratio":0.00432568,"qqq_sigma":0.00353344,"qqq_trend_score":2.16797448,"qqq_u_atr":0.00473298,"qqq_vol_z":-0.34957258,"range_ratio":0.00290715,"regime_agree":1.0,"ret_spread":-2.902e-05,"rs_log":0.42949253,"same_bar_ambiguous":0.0,"sigma":0.00259145,"sigma_prank":0.29,"slip_half":0.00021645,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.68548934,"trend_score":2.20473864,"truncated_horizon":0.0,"u_atr":0.00336631,"u_atr_prank":0.314,"vol_z":-0.45309254},"mu":[11.88861985,0.00813812,0.0060936,0.70637246,0.0007702,-0.0076478,0.00041132,0.05569007,0.00048487,0.00824064,8.79176755,7.21549637,0.06245763,0.47887083,0.0,0.00048323,0.47881709,0.00488672,0.00409878,2.24373911,0.00532396,-0.25781887,0.00354316,0.94188862,3.673e-05,0.3571552,0.0,0.00320898,0.34293462,0.0002551,8e-05,7.04358354,10.07810089,2.2832883,0.0,0.00404908,0.35182082,-0.32384953],"sd":[0.45864447,0.00492011,0.00368812,0.1182007,0.00024723,0.01487449,0.00115193,0.22932224,0.00086845,0.00592496,6.23240225,4.00599455,0.01268261,1.11338908,1.0,0.00137505,1.11114565,0.00307681,0.00203814,1.49114393,0.00245664,0.96305899,0.00249465,0.23395394,0.00188834,0.12040562,1.0,0.00213916,0.27733465,0.00012362,1.0,3.77233959,2.78853654,1.26115212,1.0,0.00245722,0.26710203,0.86322912],"beta":[0.50363196,-0.01018028,0.00524253,0.01418046,0.01718598,0.04331732,0.06064597,-0.00739971,0.01018028,0.06048975,0.03306998,0.06366402,0.05664584,-0.01852464,0.0742761,0.0,-0.07817123,-0.04149631,-0.04159164,-0.00964131,0.01181082,0.06688084,-0.05959076,-0.01033229,0.01951709,-0.06633772,-0.00238258,0.0,-0.07282307,-0.08785189,0.04331732,0.0,0.08448418,-0.07592144,-0.07207795,0.0,0.03207075,0.08959513,0.05360384],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00678462,"b_sl":0.00504946,"beta_proxy":0.69584614,"cost_rt":0.00069289,"dist_to_hi":-0.00356553,"ema_fast_slope":0.00045108,"entry_overnight":0.0,"gap_mu":0.00051945,"gap_sd":0.00579927,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.6102264,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00052884,"qqq_pullback_z":0.57132587,"qqq_range_ratio":0.00432568,"qqq_sigma":0.00353344,"qqq_trend_score":2.16797448,"qqq_u_atr":0.00473298,"qqq_vol_z":-0.34957258,"range_ratio":0.00290715,"regime_agree":1.0,"ret_spread":-2.902e-05,"rs_log":0.42949253,"same_bar_ambiguous":0.0,"sigma":0.00259145,"sigma_prank":0.29,"slip_half":0.00021645,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.68548934,"trend_score":2.20473864,"truncated_horizon":0.0,"u_atr":0.00336631,"u_atr_prank":0.314,"vol_z":-0.45309254},"mu":[11.88861985,0.00813812,0.0060936,0.70637246,0.0007702,-0.0076478,0.00041132,0.05569007,0.00048487,0.00824064,8.79176755,7.21549637,0.06245763,0.47887083,0.0,0.00048323,0.47881709,0.00488672,0.00409878,2.24373911,0.00532396,-0.25781887,0.00354316,0.94188862,3.673e-05,0.3571552,0.0,0.00320898,0.34293462,0.0002551,8e-05,7.04358354,10.07810089,2.2832883,0.0,0.00404908,0.35182082,-0.32384953],"sd":[0.45864447,0.00492011,0.00368812,0.1182007,0.00024723,0.01487449,0.00115193,0.22932224,0.00086845,0.00592496,6.23240225,4.00599455,0.01268261,1.11338908,1.0,0.00137505,1.11114565,0.00307681,0.00203814,1.49114393,0.00245664,0.96305899,0.00249465,0.23395394,0.00188834,0.12040562,1.0,0.00213916,0.27733465,0.00012362,1.0,3.77233959,2.78853654,1.26115212,1.0,0.00245722,0.26710203,0.86322912],"beta":[0.00030322,9.885e-05,0.00027187,0.00044188,0.00048219,0.00078259,0.00231499,-0.00128384,-9.885e-05,0.00072997,3.288e-05,0.00057102,0.00018533,-4.871e-05,0.00117509,0.0,-0.00027145,-0.00094867,-0.00132847,0.00168798,-0.00015737,0.00032664,-0.00071807,0.00080344,0.00013631,-0.00073854,0.00015634,0.0,-0.00148765,-0.00143056,0.00078259,0.0,0.00154716,-0.00147831,-0.00098423,0.0,0.00078211,0.00106102,0.00034846],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202202_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202202_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202202_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202202_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.14534995,0.14632707,0.16401373,0.16647024,0.22200229,0.22220389,0.80994701,0.81134923,0.8972544],"y_thresholds":[0.0,0.33333333,0.33333333,0.375,0.375,0.52941176,0.52941176,0.55555556,0.55555556]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.03823529,0.1741443,0.19854304,0.38512045,0.38823529,0.88062465],"y_thresholds":[0.36666667,0.36666667,0.59090909,0.59090909,0.6,0.6]},"uncertainty_calibration":{"u_q25":0.00844144,"u_q75":0.01129275},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":6.89586036,"policy_score":7.11227075,"brier":0.24929772,"rmse":0.01471855,"n_val":69},{"cfg_name":"tree_heavy","inner_split":2,"score":7.18094998,"policy_score":7.37123423,"brier":0.22219588,"rmse":0.01181867,"n_val":69},{"cfg_name":"tree_stable","inner_split":1,"score":5.97003688,"policy_score":6.21660553,"brier":0.28931266,"rmse":0.01479208,"n_val":69},{"cfg_name":"tree_stable","inner_split":2,"score":7.84533524,"policy_score":8.03164026,"brier":0.21594271,"rmse":0.01217399,"n_val":69},{"cfg_name":"blend_conservative","inner_split":1,"score":8.72011128,"policy_score":8.93576669,"brier":0.2471896,"rmse":0.0151316,"n_val":69},{"cfg_name":"blend_conservative","inner_split":2,"score":3.77686437,"policy_score":3.96605823,"brier":0.2183511,"rmse":0.01271527,"n_val":69},{"selected_cfg":"tree_heavy","nested_score":7.03840517}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.76574315,"max_abs_z":1.82571138,"top_shift_features":[{"feature":"qqq_u_atr","abs_z":1.82571138},{"feature":"dist_to_hi","abs_z":1.70223678},{"feature":"u_atr_prank","abs_z":1.55029575},{"feature":"qqq_sigma","abs_z":1.50677859},{"feature":"qqq_range_ratio","abs_z":1.42424477}]},"performance_drift":{"mean_abs_z":0.76574315,"recent_median_net_bps":0.402215,"recent_median_calmar":0.28417281}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.50363196,"global_ev":0.00030322,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":163,"win_rate_raw":0.49079755,"ev_raw":0.00030959,"win_rate_shrunk":0.4962397,"ev_shrunk":0.00030689,"ev_half_a":0.00021731,"ev_half_b":0.00090106,"consistency":0.82906182,"prob_delta":-0.00612864,"ev_delta":0.00025443},{"cluster":1,"n":75,"win_rate_raw":0.54666667,"ev_raw":0.00027243,"win_rate_shrunk":0.52018377,"ev_shrunk":0.00029138,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":2,"n":101,"win_rate_raw":0.4950495,"ev_raw":3.51e-06,"win_rate_shrunk":0.49970966,"ev_shrunk":0.00016625,"ev_half_a":-0.00048753,"ev_half_b":0.00059062,"consistency":0.18261574,"prob_delta":-0.00071627,"ev_delta":3.036e-05},{"cluster":3,"n":9,"win_rate_raw":0.33333333,"ev_raw":-0.00215798,"win_rate_shrunk":0.49175066,"ev_shrunk":0.00013151,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":4,"n":24,"win_rate_raw":0.54166667,"ev_raw":0.00124211,"win_rate_shrunk":0.50997108,"ev_shrunk":0.0004597,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":41,"win_rate_raw":0.51219512,"ev_raw":0.00106323,"win_rate_shrunk":0.50581264,"ev_shrunk":0.00049677,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}