{"fold_id":"spy_202203","symbol":"SPY","test_start_utc":"2022-03-01 00:00:00+00:00","test_end_utc":"2022-04-01 00:00:00+00:00","n_train":485,"n_test":10,"n_trades_test":7,"policy_score_test":18.14298536,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.0,"ev_cut":-0.00061374,"agg_ev_cut":-0.00041374,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.0,"ev_cut":-0.00061374,"agg_ev_cut":-0.00041374,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00670604,"b_sl":0.00501846,"beta_proxy":0.69518604,"cost_rt":0.00069255,"dist_to_hi":-0.00342747,"ema_fast_slope":0.00044914,"entry_overnight":0.0,"gap_mu":0.00051972,"gap_sd":0.00579927,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.60801884,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00052286,"qqq_pullback_z":0.57777992,"qqq_range_ratio":0.0043187,"qqq_sigma":0.00352254,"qqq_trend_score":2.15477447,"qqq_u_atr":0.00467617,"qqq_vol_z":-0.35974431,"range_ratio":0.00288003,"regime_agree":1.0,"ret_spread":-2.902e-05,"rs_log":0.4276962,"same_bar_ambiguous":0.0,"sigma":0.00258791,"sigma_prank":0.282,"slip_half":0.00021628,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.63176986,"trend_score":2.19873341,"truncated_horizon":0.0,"u_atr":0.00334564,"u_atr_prank":0.308,"vol_z":-0.46455146},"mu":[11.88861985,0.0080982,0.00606366,0.70440208,0.00076713,-0.00738162,0.00040831,0.05569007,0.00048691,0.00827405,8.68765133,7.18159806,0.06246973,0.47835455,0.0,0.00048009,0.48368518,0.00488329,0.00408346,2.24166828,0.00530745,-0.260131,0.00353104,0.94188862,4.616e-05,0.35160991,0.0,0.00319768,0.33561743,0.00025356,8e-05,7.01210654,10.05713408,2.27839617,0.0,0.00402912,0.34384019,-0.32497073],"sd":[0.45864447,0.00492485,0.00369159,0.11945491,0.00024506,0.01454761,0.00114868,0.22932224,0.0008689,0.00589913,6.2615911,4.00525688,0.01264919,1.1107104,1.0,0.00137014,1.10836763,0.00307034,0.00203497,1.48474579,0.00245655,0.96751479,0.00249073,0.23395394,0.00189789,0.12065857,1.0,0.00213723,0.27154084,0.00012253,1.0,3.77353453,2.80109542,1.25173949,1.0,0.00245942,0.25894123,0.86528551],"beta":[0.50363196,-0.00149195,0.00570541,0.01425443,0.01159383,0.05588384,0.06510145,-0.00056426,0.00149195,0.03788254,0.00488626,0.07353332,0.06401645,-0.00875591,0.0530754,0.0,-0.09382893,-0.02206777,-0.05234796,-0.01732878,0.00019355,0.06697014,-0.06430683,0.00049409,0.02259294,-0.06996186,-0.0318637,0.0,-0.08702794,-0.0744199,0.05588384,0.0,0.07914199,-0.07773676,-0.06894151,0.0,0.03136707,0.0616653,0.07001038],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00670604,"b_sl":0.00501846,"beta_proxy":0.69518604,"cost_rt":0.00069255,"dist_to_hi":-0.00342747,"ema_fast_slope":0.00044914,"entry_overnight":0.0,"gap_mu":0.00051972,"gap_sd":0.00579927,"gap_tail":7.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.60801884,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00052286,"qqq_pullback_z":0.57777992,"qqq_range_ratio":0.0043187,"qqq_sigma":0.00352254,"qqq_trend_score":2.15477447,"qqq_u_atr":0.00467617,"qqq_vol_z":-0.35974431,"range_ratio":0.00288003,"regime_agree":1.0,"ret_spread":-2.902e-05,"rs_log":0.4276962,"same_bar_ambiguous":0.0,"sigma":0.00258791,"sigma_prank":0.282,"slip_half":0.00021628,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.63176986,"trend_score":2.19873341,"truncated_horizon":0.0,"u_atr":0.00334564,"u_atr_prank":0.308,"vol_z":-0.46455146},"mu":[11.88861985,0.0080982,0.00606366,0.70440208,0.00076713,-0.00738162,0.00040831,0.05569007,0.00048691,0.00827405,8.68765133,7.18159806,0.06246973,0.47835455,0.0,0.00048009,0.48368518,0.00488329,0.00408346,2.24166828,0.00530745,-0.260131,0.00353104,0.94188862,4.616e-05,0.35160991,0.0,0.00319768,0.33561743,0.00025356,8e-05,7.01210654,10.05713408,2.27839617,0.0,0.00402912,0.34384019,-0.32497073],"sd":[0.45864447,0.00492485,0.00369159,0.11945491,0.00024506,0.01454761,0.00114868,0.22932224,0.0008689,0.00589913,6.2615911,4.00525688,0.01264919,1.1107104,1.0,0.00137014,1.10836763,0.00307034,0.00203497,1.48474579,0.00245655,0.96751479,0.00249073,0.23395394,0.00189789,0.12065857,1.0,0.00213723,0.27154084,0.00012253,1.0,3.77353453,2.80109542,1.25173949,1.0,0.00245942,0.25894123,0.86528551],"beta":[0.00030958,0.00013867,0.00044645,0.00060657,0.00032472,0.00064927,0.00254587,-0.0012428,-0.00013867,0.00039787,-0.00035708,0.00071763,0.0002381,8.942e-05,0.00088228,0.0,-0.00049975,-0.00068622,-0.00159074,0.00158969,-0.00029334,0.00031843,-0.00073133,0.00094164,0.00017026,-0.0007306,-0.00026834,0.0,-0.00139,-0.00110973,0.00064927,0.0,0.00147127,-0.00155585,-0.00092664,0.0,0.00092694,0.00064506,0.00057276],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202203_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202203_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202203_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202203_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.14824153,0.15141765,0.15646895,0.84883676,0.86253066,0.91159084],"y_thresholds":[0.0,0.0,0.48387097,0.48387097,0.5,0.5]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.02096774,0.1095696,0.13261456,0.20757084,0.2203732,0.91977158],"y_thresholds":[0.0,0.34782609,0.34782609,0.45454545,0.45454545,0.58333333,0.58333333]},"uncertainty_calibration":{"u_q25":0.00837651,"u_q75":0.01210782},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.44673617,"max_abs_z":1.58781414,"top_shift_features":[{"feature":"gap_tail","abs_z":1.58781414},{"feature":"qqq_u_atr","abs_z":1.24285034},{"feature":"tp_to_cost","abs_z":1.23879685},{"feature":"qqq_sigma","abs_z":0.9729846},{"feature":"a_tp","abs_z":0.7870981}]},"performance_drift":{"mean_abs_z":0.44673617,"recent_median_net_bps":0.402215,"recent_median_calmar":0.28417281}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.50363196,"global_ev":0.00030958,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":22,"win_rate_raw":0.5,"ev_raw":0.00097911,"win_rate_shrunk":0.50306926,"ev_shrunk":0.00041331,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":1,"n":197,"win_rate_raw":0.4822335,"ev_raw":0.00011581,"win_rate_shrunk":0.49033387,"ev_shrunk":0.00018916,"ev_half_a":5.051e-05,"ev_half_b":0.0002762,"consistency":0.9435781,"prob_delta":-0.01254779,"ev_delta":0.00017849},{"cluster":2,"n":110,"win_rate_raw":0.47272727,"ev_raw":-0.00039088,"win_rate_shrunk":0.48885146,"ev_shrunk":-2.542e-05,"ev_half_a":-0.00057053,"ev_half_b":-0.00025686,"consistency":0.92158364,"prob_delta":-0.01362147,"ev_delta":-2.343e-05},{"cluster":3,"n":21,"win_rate_raw":0.76190476,"ev_raw":0.00244065,"win_rate_shrunk":0.54209812,"ev_shrunk":0.00062698,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":41,"win_rate_raw":0.56097561,"ev_raw":0.00043058,"win_rate_shrunk":0.518235,"ev_shrunk":0.0003404,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":22,"win_rate_raw":0.5,"ev_raw":0.00261785,"win_rate_shrunk":0.50306926,"ev_shrunk":0.0006672,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}