{"fold_id":"spy_202206","symbol":"SPY","test_start_utc":"2022-06-01 00:00:00+00:00","test_end_utc":"2022-07-01 00:00:00+00:00","n_train":472,"n_test":6,"n_trades_test":6,"policy_score_test":-2.84195132,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.0,"ev_cut":0.000126,"agg_ev_cut":0.000326,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.0,"ev_cut":0.000126,"agg_ev_cut":0.000326,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00645186,"b_sl":0.00481877,"beta_proxy":0.68927335,"cost_rt":0.00067897,"dist_to_hi":-0.0033762,"ema_fast_slope":0.00038539,"entry_overnight":0.0,"gap_mu":0.00048772,"gap_sd":0.00590593,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.60501335,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050185,"qqq_pullback_z":0.56863951,"qqq_range_ratio":0.00428405,"qqq_sigma":0.00341934,"qqq_trend_score":2.12657406,"qqq_u_atr":0.00451218,"qqq_vol_z":-0.30572855,"range_ratio":0.00284283,"regime_agree":1.0,"ret_spread":-1.135e-05,"rs_log":0.39720795,"same_bar_ambiguous":0.0,"sigma":0.00246296,"sigma_prank":0.273,"slip_half":0.00020948,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.3929045,"trend_score":2.20838787,"truncated_horizon":0.0,"u_atr":0.00321115,"u_atr_prank":0.306,"vol_z":-0.38223414},"mu":[11.88059701,0.00793867,0.0059435,0.69913522,0.00076322,-0.00689871,0.00039629,0.05970149,0.00047292,0.00839798,8.10199005,7.19651741,0.0625,0.47088231,0.0,0.00045703,0.46720854,0.00485053,0.0040256,2.19597887,0.00524212,-0.22619868,0.00348449,0.93283582,5.455e-05,0.33595832,0.0,0.00314369,0.32556219,0.00025161,8e-05,7.0199005,9.88470644,2.28245764,0.0,0.00394832,0.33836816,-0.29233868],"sd":[0.47386591,0.00498766,0.00373852,0.11988902,0.0002491,0.01432371,0.00115301,0.23693295,0.00087735,0.00593009,6.12449986,4.01535459,0.01269745,1.12481724,1.0,0.00138158,1.1333951,0.00309659,0.00206841,1.49117432,0.00248253,0.98227238,0.00251509,0.25030612,0.00191426,0.12082121,1.0,0.00216827,0.26604,0.00012455,1.0,3.7760178,2.81853524,1.24505828,1.0,0.0024905,0.2529858,0.87032233],"beta":[0.51243781,0.00015302,0.00532955,0.01001422,0.01504221,0.04763133,0.04952956,-0.00903177,-0.00015302,0.06206474,0.00506274,0.0964859,0.06648308,-0.01654433,0.0455084,0.0,-0.06897467,-0.0346677,-0.04465779,-0.03311126,-0.01475604,0.08326791,-0.03425905,-0.00936834,0.02489652,-0.07616115,-0.02910532,0.0,-0.06580999,-0.05283171,0.04763133,0.0,0.07169557,-0.07772402,-0.05028619,0.0,0.01939165,0.05022837,0.04345643],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00645186,"b_sl":0.00481877,"beta_proxy":0.68927335,"cost_rt":0.00067897,"dist_to_hi":-0.0033762,"ema_fast_slope":0.00038539,"entry_overnight":0.0,"gap_mu":0.00048772,"gap_sd":0.00590593,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.60501335,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050185,"qqq_pullback_z":0.56863951,"qqq_range_ratio":0.00428405,"qqq_sigma":0.00341934,"qqq_trend_score":2.12657406,"qqq_u_atr":0.00451218,"qqq_vol_z":-0.30572855,"range_ratio":0.00284283,"regime_agree":1.0,"ret_spread":-1.135e-05,"rs_log":0.39720795,"same_bar_ambiguous":0.0,"sigma":0.00246296,"sigma_prank":0.273,"slip_half":0.00020948,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.3929045,"trend_score":2.20838787,"truncated_horizon":0.0,"u_atr":0.00321115,"u_atr_prank":0.306,"vol_z":-0.38223414},"mu":[11.88059701,0.00793867,0.0059435,0.69913522,0.00076322,-0.00689871,0.00039629,0.05970149,0.00047292,0.00839798,8.10199005,7.19651741,0.0625,0.47088231,0.0,0.00045703,0.46720854,0.00485053,0.0040256,2.19597887,0.00524212,-0.22619868,0.00348449,0.93283582,5.455e-05,0.33595832,0.0,0.00314369,0.32556219,0.00025161,8e-05,7.0199005,9.88470644,2.28245764,0.0,0.00394832,0.33836816,-0.29233868],"sd":[0.47386591,0.00498766,0.00373852,0.11988902,0.0002491,0.01432371,0.00115301,0.23693295,0.00087735,0.00593009,6.12449986,4.01535459,0.01269745,1.12481724,1.0,0.00138158,1.1333951,0.00309659,0.00206841,1.49117432,0.00248253,0.98227238,0.00251509,0.25030612,0.00191426,0.12082121,1.0,0.00216827,0.26604,0.00012455,1.0,3.7760178,2.81853524,1.24505828,1.0,0.0024905,0.2529858,0.87032233],"beta":[0.0003735,0.00013509,0.00042006,0.00054186,0.000251,0.00061884,0.00254475,-0.00130843,-0.00013509,0.00077804,-0.00019284,0.00087987,0.00040571,4.247e-05,0.00071365,0.0,-0.00033896,-0.00069056,-0.00147361,0.00135472,-0.00036565,0.00056436,-0.00051804,0.00092467,0.00021795,-0.00080482,2.788e-05,0.0,-0.00100423,-0.00077674,0.00061884,0.0,0.00122186,-0.00144865,-0.00075406,0.0,0.00078554,0.00030783,0.0003789],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202206_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202206_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202206_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202206_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.19467303,0.24672692,0.25318269,0.77967773,0.79644886,0.87656713],"y_thresholds":[0.09090909,0.09090909,0.49056604,0.49056604,0.5,0.5]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.08697275,0.09157841,0.36035509,0.36226415,0.88181818],"y_thresholds":[0.31578947,0.31578947,0.42307692,0.42307692,0.52,0.52]},"uncertainty_calibration":{"u_q25":0.0090751,"u_q75":0.01955157},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":20.08152838,"policy_score":20.31045714,"brier":0.2666253,"rmse":0.01447989,"n_val":67},{"cfg_name":"tree_heavy","inner_split":2,"score":2.05292042,"policy_score":2.29838502,"brier":0.3024628,"rmse":0.00930875,"n_val":67},{"cfg_name":"tree_stable","inner_split":1,"score":19.82242949,"policy_score":20.05969897,"brier":0.27704634,"rmse":0.01474236,"n_val":67},{"cfg_name":"tree_stable","inner_split":2,"score":7.45864059,"policy_score":7.67440773,"brier":0.26228338,"rmse":0.0095273,"n_val":67},{"cfg_name":"blend_conservative","inner_split":1,"score":12.09616616,"policy_score":12.35497086,"brier":0.30517028,"rmse":0.0149635,"n_val":67},{"cfg_name":"blend_conservative","inner_split":2,"score":6.19930299,"policy_score":6.44054512,"brier":0.29583131,"rmse":0.00968433,"n_val":67},{"selected_cfg":"tree_stable","nested_score":13.64053504}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.72048911,"max_abs_z":1.92442357,"top_shift_features":[{"feature":"dist_to_hi","abs_z":1.92442357},{"feature":"qqq_u_atr","abs_z":1.88059059},{"feature":"tp_to_cost","abs_z":1.77624314},{"feature":"qqq_sigma","abs_z":1.67524083},{"feature":"u_atr","abs_z":1.44788619}]},"performance_drift":{"mean_abs_z":0.72048911,"recent_median_net_bps":0.402215,"recent_median_calmar":0.28417281}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.51243781,"global_ev":0.0003735,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":25,"win_rate_raw":0.52,"ev_raw":0.00096053,"win_rate_shrunk":0.51374164,"ev_shrunk":0.00047471,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":80,"win_rate_raw":0.55,"ev_raw":0.00029155,"win_rate_shrunk":0.52746269,"ev_shrunk":0.00034072,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":2,"n":100,"win_rate_raw":0.47,"ev_raw":-0.00069156,"win_rate_shrunk":0.4931479,"ev_shrunk":-0.00011062,"ev_half_a":-0.00087643,"ev_half_b":-0.00056831,"consistency":0.92296863,"prob_delta":-0.01780399,"ev_delta":-0.00010209},{"cluster":3,"n":30,"win_rate_raw":0.56666667,"ev_raw":0.00316135,"win_rate_shrunk":0.52328358,"ev_shrunk":0.00093107,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":23,"win_rate_raw":0.69565217,"ev_raw":0.00150248,"win_rate_shrunk":0.54190586,"ev_shrunk":0.00055509,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":144,"win_rate_raw":0.47916667,"ev_raw":0.00029561,"win_rate_shrunk":0.49428991,"ev_shrunk":0.00033102,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}