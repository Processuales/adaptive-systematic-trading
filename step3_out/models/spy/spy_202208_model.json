{"fold_id":"spy_202208","symbol":"SPY","test_start_utc":"2022-08-01 00:00:00+00:00","test_end_utc":"2022-09-01 00:00:00+00:00","n_train":470,"n_test":15,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.52,"agg_p_cut":0.69,"safe_size":0.4797,"aggressive_size":0.85536,"ev_cut":0.00215286,"agg_ev_cut":0.00265286,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":0.00215286,"agg_ev_cut":0.00235286,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00647353,"b_sl":0.00485274,"beta_proxy":0.69061867,"cost_rt":0.00068313,"dist_to_hi":-0.00338422,"ema_fast_slope":0.00038983,"entry_overnight":0.0,"gap_mu":0.00044427,"gap_sd":0.00596051,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.59675469,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050185,"qqq_pullback_z":0.56863951,"qqq_range_ratio":0.00428405,"qqq_sigma":0.00347065,"qqq_trend_score":2.10668117,"qqq_u_atr":0.00452249,"qqq_vol_z":-0.30424272,"range_ratio":0.00283756,"regime_agree":1.0,"ret_spread":-1.507e-05,"rs_log":0.31187412,"same_bar_ambiguous":0.0,"sigma":0.00252509,"sigma_prank":0.294,"slip_half":0.00021156,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.37889267,"trend_score":2.1722767,"truncated_horizon":0.0,"u_atr":0.00323392,"u_atr_prank":0.328,"vol_z":-0.41851825},"mu":[11.88,0.00796632,0.00596408,0.69877246,0.00076758,-0.00698455,0.00040479,0.06,0.00045764,0.0083904,7.7825,7.16,0.0625,0.47266435,0.0,0.00046465,0.46929691,0.00483732,0.0040431,2.17626997,0.00524509,-0.22653753,0.00347972,0.935,3.639e-05,0.32550785,0.0,0.0031658,0.339495,0.00025379,8e-05,6.99,9.86782687,2.2620937,0.0,0.00396183,0.35199,-0.29933223],"sd":[0.47497368,0.00500338,0.00375025,0.12103195,0.00025208,0.01437784,0.00115998,0.23748684,0.00087862,0.00595565,6.02413427,3.97736093,0.01284037,1.12398512,1.0,0.00138778,1.130779,0.00309684,0.0020713,1.48755385,0.00249425,0.97347252,0.00252192,0.24652586,0.00191,0.12175203,1.0,0.00217239,0.26837879,0.00012604,1.0,3.74364795,2.84050655,1.24088417,1.0,0.00249823,0.25353931,0.86594453],"beta":[0.51,-0.00471813,0.02230836,0.02628554,0.01819668,0.00760746,0.062064,-0.01651385,0.00471813,0.08026838,0.01376414,0.10284602,0.10909671,-0.00562802,0.04716579,0.0,-0.05502269,-0.04561537,-0.04610865,-0.02480915,-0.01870883,0.10418379,-0.03521985,-0.00849064,0.0256525,-0.07508281,-0.00730132,0.0,-0.04361236,-0.04507403,0.00760746,0.0,0.04143374,-0.09535786,-0.03606873,0.0,0.03423909,0.02782835,0.05043238],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00647353,"b_sl":0.00485274,"beta_proxy":0.69061867,"cost_rt":0.00068313,"dist_to_hi":-0.00338422,"ema_fast_slope":0.00038983,"entry_overnight":0.0,"gap_mu":0.00044427,"gap_sd":0.00596051,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.59675469,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050185,"qqq_pullback_z":0.56863951,"qqq_range_ratio":0.00428405,"qqq_sigma":0.00347065,"qqq_trend_score":2.10668117,"qqq_u_atr":0.00452249,"qqq_vol_z":-0.30424272,"range_ratio":0.00283756,"regime_agree":1.0,"ret_spread":-1.507e-05,"rs_log":0.31187412,"same_bar_ambiguous":0.0,"sigma":0.00252509,"sigma_prank":0.294,"slip_half":0.00021156,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.37889267,"trend_score":2.1722767,"truncated_horizon":0.0,"u_atr":0.00323392,"u_atr_prank":0.328,"vol_z":-0.41851825},"mu":[11.88,0.00796632,0.00596408,0.69877246,0.00076758,-0.00698455,0.00040479,0.06,0.00045764,0.0083904,7.7825,7.16,0.0625,0.47266435,0.0,0.00046465,0.46929691,0.00483732,0.0040431,2.17626997,0.00524509,-0.22653753,0.00347972,0.935,3.639e-05,0.32550785,0.0,0.0031658,0.339495,0.00025379,8e-05,6.99,9.86782687,2.2620937,0.0,0.00396183,0.35199,-0.29933223],"sd":[0.47497368,0.00500338,0.00375025,0.12103195,0.00025208,0.01437784,0.00115998,0.23748684,0.00087862,0.00595565,6.02413427,3.97736093,0.01284037,1.12398512,1.0,0.00138778,1.130779,0.00309684,0.0020713,1.48755385,0.00249425,0.97347252,0.00252192,0.24652586,0.00191,0.12175203,1.0,0.00217239,0.26837879,0.00012604,1.0,3.74364795,2.84050655,1.24088417,1.0,0.00249823,0.25353931,0.86594453],"beta":[0.00029445,1.306e-05,0.0006181,0.00073292,0.00027823,4.261e-05,0.00271174,-0.00132089,-1.306e-05,0.00076608,-0.00025513,0.00077633,0.00065243,8.695e-05,0.00061036,0.0,-0.00025713,-0.00068987,-0.00147443,0.00157183,-0.00026138,0.00074268,-0.00042041,0.00087476,0.0001933,-0.00082045,0.00013561,0.0,-0.00064226,-0.00063853,4.261e-05,0.0,0.00098947,-0.00145841,-0.00069285,0.0,0.00096255,1.156e-05,0.00033026],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202208_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202208_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202208_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202208_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.19705027,0.21781517,0.22054623,0.25217332,0.25484584,0.28888856,0.32367443,0.8091782,0.82107632,0.84815278],"y_thresholds":[0.0,0.0,0.2,0.2,0.25,0.25,0.48148148,0.48148148,0.5,0.5]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.01407831,0.02407407,0.24985955,0.25397914,0.35847254,0.37224018,0.99987],"y_thresholds":[0.33333333,0.33333333,0.37931034,0.37931034,0.46666667,0.46666667,0.47826087,0.47826087]},"uncertainty_calibration":{"u_q25":0.00926668,"u_q75":0.02778567},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":5.82584746,"policy_score":6.04992923,"brier":0.26746915,"rmse":0.01173996,"n_val":67},{"cfg_name":"tree_heavy","inner_split":2,"score":11.58313287,"policy_score":11.76923519,"brier":0.22304802,"rmse":0.00940816,"n_val":67},{"cfg_name":"tree_stable","inner_split":1,"score":6.23175882,"policy_score":6.46175382,"brier":0.27499831,"rmse":0.01187313,"n_val":67},{"cfg_name":"tree_stable","inner_split":2,"score":11.79727909,"policy_score":11.97952884,"brier":0.22006847,"rmse":0.0085992,"n_val":67},{"cfg_name":"blend_conservative","inner_split":1,"score":5.98705916,"policy_score":6.21149238,"brier":0.2671732,"rmse":0.01202666,"n_val":67},{"cfg_name":"blend_conservative","inner_split":2,"score":7.68118474,"policy_score":7.86714564,"brier":0.22449028,"rmse":0.0087966,"n_val":67},{"selected_cfg":"tree_stable","nested_score":9.01451896}],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.32923723,"max_abs_z":1.47792881,"top_shift_features":[{"feature":"gap_mu","abs_z":1.47792881},{"feature":"u_atr_prank","abs_z":1.19171957},{"feature":"sigma_prank","abs_z":1.04328201},{"feature":"tp_to_cost","abs_z":0.69143128},{"feature":"trend_score","abs_z":0.63796734}]},"performance_drift":{"mean_abs_z":0.32923723,"recent_median_net_bps":-5.45292908,"recent_median_calmar":-3.24970574}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.51,"global_ev":0.00029445,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":26,"win_rate_raw":0.53846154,"ev_raw":0.00105805,"win_rate_shrunk":0.51506849,"ev_shrunk":0.00043043,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":39,"win_rate_raw":0.48717949,"ev_raw":0.00025363,"win_rate_shrunk":0.50440252,"ev_shrunk":0.00028444,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":2,"n":144,"win_rate_raw":0.51388889,"ev_raw":0.00052866,"win_rate_shrunk":0.51212121,"ev_shrunk":0.0004222,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":10,"win_rate_raw":0.5,"ev_raw":0.00333391,"win_rate_shrunk":0.50923077,"ev_shrunk":0.00052825,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":4,"n":94,"win_rate_raw":0.45744681,"ev_raw":-0.00076679,"win_rate_shrunk":0.48691589,"ev_shrunk":-0.0001717,"ev_half_a":-0.00081135,"ev_half_b":-0.00072409,"consistency":0.97818366,"prob_delta":-0.0225805,"ev_delta":-0.00016796},{"cluster":5,"n":87,"win_rate_raw":0.56321839,"ev_raw":0.00049414,"win_rate_shrunk":0.53236715,"ev_shrunk":0.00037837,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}