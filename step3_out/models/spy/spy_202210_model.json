{"fold_id":"spy_202210","symbol":"SPY","test_start_utc":"2022-10-01 00:00:00+00:00","test_end_utc":"2022-11-01 00:00:00+00:00","n_train":468,"n_test":11,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.52,"agg_p_cut":0.69,"safe_size":0.4797,"aggressive_size":0.65,"ev_cut":0.0016349,"agg_ev_cut":0.0021349,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.0,"ev_cut":0.0016349,"agg_ev_cut":0.0018349,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00654738,"b_sl":0.0048941,"beta_proxy":0.69529906,"cost_rt":0.00068649,"dist_to_hi":-0.0033762,"ema_fast_slope":0.00040216,"entry_overnight":0.0,"gap_mu":0.0004156,"gap_sd":0.00601496,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.60663448,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050402,"qqq_pullback_z":0.5825972,"qqq_range_ratio":0.00430913,"qqq_sigma":0.00345899,"qqq_trend_score":2.19152099,"qqq_u_atr":0.00455899,"qqq_vol_z":-0.30394705,"range_ratio":0.00285983,"regime_agree":1.0,"ret_spread":-1.469e-05,"rs_log":0.27182967,"same_bar_ambiguous":0.0,"sigma":0.00254751,"sigma_prank":0.308,"slip_half":0.00021324,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.4092372,"trend_score":2.21944588,"truncated_horizon":0.0,"u_atr":0.00325174,"u_atr_prank":0.35,"vol_z":-0.45052099},"mu":[11.86934673,0.0080432,0.00602097,0.70779626,0.00077167,-0.00703467,0.0004057,0.06532663,0.0004524,0.00839266,7.83668342,7.14321608,0.0629397,0.467893,0.0,0.00046335,0.47374733,0.00492126,0.00404723,2.28560303,0.00526717,-0.2275333,0.00353738,0.94472362,1.699e-05,0.30904691,0.0,0.00319002,0.34865829,0.00025583,8e-05,6.97487437,9.93615225,2.33635365,0.0,0.00399875,0.36368844,-0.31738262],"sd":[0.49420265,0.00498073,0.00373363,0.11639953,0.00025156,0.0144248,0.00116568,0.24710132,0.00088061,0.00597532,5.97406127,3.99271846,0.01263724,1.1289555,1.0,0.00140408,1.1523127,0.00317328,0.0020787,1.54502889,0.002497,1.00057451,0.00253211,0.22851893,0.00188797,0.12245596,1.0,0.00216697,0.26832681,0.00012578,1.0,3.76300049,2.81733331,1.3329761,1.0,0.00248771,0.25227998,0.88803864],"beta":[0.51758794,-0.00057948,0.02395408,0.02726194,0.01925305,0.00577595,0.05795607,-0.01835037,0.00057948,0.06386243,-0.00258453,0.10490819,0.10057337,2.951e-05,0.04353851,0.0,-0.0600828,-0.03444995,-0.04530435,-0.01393085,-0.03341287,0.09762978,-0.04536689,-0.01239618,0.02016264,-0.07097448,-0.0195786,0.0,-0.04868964,-0.0510307,0.00577595,0.0,0.04616261,-0.10079733,-0.01169829,0.0,0.03387174,0.03289526,0.06175718],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00654738,"b_sl":0.0048941,"beta_proxy":0.69529906,"cost_rt":0.00068649,"dist_to_hi":-0.0033762,"ema_fast_slope":0.00040216,"entry_overnight":0.0,"gap_mu":0.0004156,"gap_sd":0.00601496,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.60663448,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050402,"qqq_pullback_z":0.5825972,"qqq_range_ratio":0.00430913,"qqq_sigma":0.00345899,"qqq_trend_score":2.19152099,"qqq_u_atr":0.00455899,"qqq_vol_z":-0.30394705,"range_ratio":0.00285983,"regime_agree":1.0,"ret_spread":-1.469e-05,"rs_log":0.27182967,"same_bar_ambiguous":0.0,"sigma":0.00254751,"sigma_prank":0.308,"slip_half":0.00021324,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.4092372,"trend_score":2.21944588,"truncated_horizon":0.0,"u_atr":0.00325174,"u_atr_prank":0.35,"vol_z":-0.45052099},"mu":[11.86934673,0.0080432,0.00602097,0.70779626,0.00077167,-0.00703467,0.0004057,0.06532663,0.0004524,0.00839266,7.83668342,7.14321608,0.0629397,0.467893,0.0,0.00046335,0.47374733,0.00492126,0.00404723,2.28560303,0.00526717,-0.2275333,0.00353738,0.94472362,1.699e-05,0.30904691,0.0,0.00319002,0.34865829,0.00025583,8e-05,6.97487437,9.93615225,2.33635365,0.0,0.00399875,0.36368844,-0.31738262],"sd":[0.49420265,0.00498073,0.00373363,0.11639953,0.00025156,0.0144248,0.00116568,0.24710132,0.00088061,0.00597532,5.97406127,3.99271846,0.01263724,1.1289555,1.0,0.00140408,1.1523127,0.00317328,0.0020787,1.54502889,0.002497,1.00057451,0.00253211,0.22851893,0.00188797,0.12245596,1.0,0.00216697,0.26832681,0.00012578,1.0,3.76300049,2.81733331,1.3329761,1.0,0.00248771,0.25227998,0.88803864],"beta":[0.00035819,4.262e-05,0.00059809,0.00070624,0.00036237,7.25e-06,0.0026082,-0.00147722,-4.262e-05,0.00055942,-0.0005577,0.00087214,0.00063032,0.00014217,0.00073391,0.0,-0.00018106,-0.00061873,-0.00153154,0.00165316,-0.0004788,0.0007687,-0.00039579,0.00088871,0.00011596,-0.00069079,-9.524e-05,0.0,-0.00073536,-0.00075925,7.25e-06,0.0,0.0009865,-0.0014932,-0.0002866,0.0,0.00092244,0.00020724,0.0002896],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202210_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202210_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202210_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202210_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.19918771,0.2152374,0.30009271,0.30592544,0.40994495,0.42206755,0.72719535,0.75099839,0.84798611],"y_thresholds":[0.0,0.125,0.125,0.42857143,0.42857143,0.48717949,0.48717949,0.53333333,0.53333333]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.01666667,0.22157548,0.2466939,0.99987],"y_thresholds":[0.44117647,0.44117647,0.44444444,0.44444444]},"uncertainty_calibration":{"u_q25":0.01816852,"u_q75":0.02898948},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":11.60101684,"policy_score":11.82426866,"brier":0.27089507,"rmse":0.01004026,"n_val":67},{"cfg_name":"tree_heavy","inner_split":2,"score":2.8126,"policy_score":3.01293446,"brier":0.25061517,"rmse":0.00618654,"n_val":67},{"cfg_name":"tree_stable","inner_split":1,"score":13.42315353,"policy_score":13.65194912,"brier":0.27846517,"rmse":0.00997335,"n_val":67},{"cfg_name":"tree_stable","inner_split":2,"score":3.09952251,"policy_score":3.3059133,"brier":0.25934105,"rmse":0.00594251,"n_val":67},{"cfg_name":"blend_conservative","inner_split":1,"score":11.93176967,"policy_score":12.15971721,"brier":0.27691576,"rmse":0.01013036,"n_val":67},{"cfg_name":"blend_conservative","inner_split":2,"score":3.68729495,"policy_score":3.89672562,"brier":0.26334362,"rmse":0.00596147,"n_val":67},{"selected_cfg":"tree_stable","nested_score":8.26133802}],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.7100383,"max_abs_z":1.79896952,"top_shift_features":[{"feature":"cost_rt","abs_z":1.79896952},{"feature":"slip_half","abs_z":1.79896952},{"feature":"gap_mu","abs_z":1.65445229},{"feature":"qqq_sigma","abs_z":1.62419758},{"feature":"qqq_u_atr","abs_z":1.56033899}]},"performance_drift":{"mean_abs_z":0.7100383,"recent_median_net_bps":-5.69431632,"recent_median_calmar":-3.59000183}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.51758794,"global_ev":0.00035819,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":22,"win_rate_raw":0.59090909,"ev_raw":0.00159396,"win_rate_shrunk":0.52894755,"ev_shrunk":0.00054965,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":124,"win_rate_raw":0.53225806,"ev_raw":0.00076262,"win_rate_shrunk":0.52504325,"ev_shrunk":0.00056372,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":2,"n":10,"win_rate_raw":0.5,"ev_raw":0.00333391,"win_rate_shrunk":0.51623502,"ev_shrunk":0.00058709,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":3,"n":96,"win_rate_raw":0.44791667,"ev_raw":-0.00094048,"win_rate_shrunk":0.48662293,"ev_shrunk":-0.000219,"ev_half_a":-0.00081135,"ev_half_b":-0.00105929,"consistency":0.93801633,"prob_delta":-0.02904569,"ev_delta":-0.00020542},{"cluster":4,"n":107,"win_rate_raw":0.56074766,"ev_raw":0.00056059,"win_rate_shrunk":0.53793195,"ev_shrunk":0.0004536,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":39,"win_rate_raw":0.48717949,"ev_raw":0.00025363,"win_rate_shrunk":0.51012926,"ev_shrunk":0.00033254,"ev_half_a":0.00019874,"ev_half_b":0.00029181,"consistency":0.9523121,"prob_delta":-0.00710299,"ev_delta":0.00031668}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}