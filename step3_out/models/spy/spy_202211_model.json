{"fold_id":"spy_202211","symbol":"SPY","test_start_utc":"2022-11-01 00:00:00+00:00","test_end_utc":"2022-12-01 00:00:00+00:00","n_train":469,"n_test":14,"n_trades_test":6,"policy_score_test":-13.07684937,"best_params":{"mix_struct_weight":0.55,"p_cut":0.52,"agg_p_cut":0.69,"safe_size":0.4797,"aggressive_size":0.65,"ev_cut":0.0016349,"agg_ev_cut":0.0021349,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.0,"ev_cut":0.0016349,"agg_ev_cut":0.0018349,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00662632,"b_sl":0.00496974,"beta_proxy":0.69763316,"cost_rt":0.00069563,"dist_to_hi":-0.00337907,"ema_fast_slope":0.00042145,"entry_overnight":0.0,"gap_mu":0.00041655,"gap_sd":0.0060006,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.61521448,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0005254,"qqq_pullback_z":0.59785116,"qqq_range_ratio":0.00431671,"qqq_sigma":0.00352207,"qqq_trend_score":2.18327918,"qqq_u_atr":0.00459273,"qqq_vol_z":-0.30572855,"range_ratio":0.0028675,"regime_agree":1.0,"ret_spread":-2.494e-05,"rs_log":0.25749186,"same_bar_ambiguous":0.0,"sigma":0.00258791,"sigma_prank":0.32,"slip_half":0.00021781,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.43899245,"trend_score":2.21943966,"truncated_horizon":0.0,"u_atr":0.00329768,"u_atr_prank":0.354,"vol_z":-0.46455146},"mu":[11.86967419,0.00809397,0.00605908,0.71042999,0.00077592,-0.00704033,0.000423,0.06516291,0.0004535,0.00839789,7.95739348,7.16290727,0.06334586,0.48339092,0.0,0.00048059,0.48652938,0.00493568,0.00408143,2.27673275,0.00529857,-0.23218201,0.00354851,0.94235589,1.63e-05,0.3051769,0.0,0.00322336,0.35435088,0.00025796,8e-05,6.99498747,9.95921114,2.34005602,0.0,0.00402419,0.36695238,-0.31877407],"sd":[0.49362619,0.00496407,0.00372125,0.11372774,0.00025247,0.01441099,0.00116793,0.24681309,0.0008796,0.00596019,5.91168837,3.98883499,0.01272992,1.11762001,1.0,0.00140962,1.14207302,0.00318559,0.00208026,1.55034421,0.00249926,1.00049161,0.00252861,0.23306923,0.00187674,0.1223504,1.0,0.00216313,0.27219387,0.00012624,1.0,3.76036245,2.81202767,1.32820312,1.0,0.00247961,0.25423364,0.88853351],"beta":[0.51879699,-0.00549845,0.03011245,0.03370888,0.0215987,-0.01183658,0.05701637,-0.01586855,0.00549845,0.07163793,0.00022812,0.11120574,0.09455463,0.00154303,0.05043125,0.0,-0.06637651,-0.0368669,-0.04644831,-0.00848248,-0.03090921,0.08789256,-0.05280491,-0.0087873,0.02155195,-0.07077462,-0.02334808,0.0,-0.04044367,-0.03340397,-0.01183658,0.0,0.04031708,-0.10158595,-0.01453602,0.0,0.04089266,0.02057539,0.06423447],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00662632,"b_sl":0.00496974,"beta_proxy":0.69763316,"cost_rt":0.00069563,"dist_to_hi":-0.00337907,"ema_fast_slope":0.00042145,"entry_overnight":0.0,"gap_mu":0.00041655,"gap_sd":0.0060006,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.61521448,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0005254,"qqq_pullback_z":0.59785116,"qqq_range_ratio":0.00431671,"qqq_sigma":0.00352207,"qqq_trend_score":2.18327918,"qqq_u_atr":0.00459273,"qqq_vol_z":-0.30572855,"range_ratio":0.0028675,"regime_agree":1.0,"ret_spread":-2.494e-05,"rs_log":0.25749186,"same_bar_ambiguous":0.0,"sigma":0.00258791,"sigma_prank":0.32,"slip_half":0.00021781,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.43899245,"trend_score":2.21943966,"truncated_horizon":0.0,"u_atr":0.00329768,"u_atr_prank":0.354,"vol_z":-0.46455146},"mu":[11.86967419,0.00809397,0.00605908,0.71042999,0.00077592,-0.00704033,0.000423,0.06516291,0.0004535,0.00839789,7.95739348,7.16290727,0.06334586,0.48339092,0.0,0.00048059,0.48652938,0.00493568,0.00408143,2.27673275,0.00529857,-0.23218201,0.00354851,0.94235589,1.63e-05,0.3051769,0.0,0.00322336,0.35435088,0.00025796,8e-05,6.99498747,9.95921114,2.34005602,0.0,0.00402419,0.36695238,-0.31877407],"sd":[0.49362619,0.00496407,0.00372125,0.11372774,0.00025247,0.01441099,0.00116793,0.24681309,0.0008796,0.00596019,5.91168837,3.98883499,0.01272992,1.11762001,1.0,0.00140962,1.14207302,0.00318559,0.00208026,1.55034421,0.00249926,1.00049161,0.00252861,0.23306923,0.00187674,0.1223504,1.0,0.00216313,0.27219387,0.00012624,1.0,3.76036245,2.81202767,1.32820312,1.0,0.00247961,0.25423364,0.88853351],"beta":[0.00036161,-1.146e-05,0.00061914,0.00072836,0.00041069,-0.0001182,0.00257143,-0.00144187,1.146e-05,0.00068688,-0.0004937,0.00094958,0.00060999,0.00014185,0.00071021,0.0,-0.0002079,-0.00057685,-0.00155462,0.00160278,-0.00050191,0.00073227,-0.00050678,0.00099068,0.00016929,-0.00076502,-0.00013127,0.0,-0.0006469,-0.00069272,-0.0001182,0.0,0.00094698,-0.00149186,-0.00026261,0.0,0.00094667,0.00017853,0.00027349],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202211_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202211_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202211_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202211_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.20441471,0.29309058,0.31359261,0.42613144,0.45152542,0.53966176,0.55124293,0.82357576,0.83549874],"y_thresholds":[0.0,0.0,0.33333333,0.33333333,0.5,0.5,0.52777778,0.52777778,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.03611111,0.24288329,0.26279605,0.99987],"y_thresholds":[0.0,0.43333333,0.43333333,0.44736842,0.44736842]},"uncertainty_calibration":{"u_q25":0.01784608,"u_q75":0.03059734},"nested_tuning_rows":[],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.46917936,"max_abs_z":1.32745346,"top_shift_features":[{"feature":"qqq_sigma","abs_z":1.32745346},{"feature":"gap_mu","abs_z":1.16377412},{"feature":"slip_half","abs_z":1.1332135},{"feature":"cost_rt","abs_z":1.1332135},{"feature":"qqq_u_atr","abs_z":0.94567254}]},"performance_drift":{"mean_abs_z":0.46917936,"recent_median_net_bps":-5.93570356,"recent_median_calmar":-3.24970574}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.51879699,"global_ev":0.00036161,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":101,"win_rate_raw":0.45544554,"ev_raw":-0.00085248,"win_rate_shrunk":0.48984452,"ev_shrunk":-0.00019325,"ev_half_a":-0.00081135,"ev_half_b":-0.00088687,"consistency":0.98111986,"prob_delta":-0.02840584,"ev_delta":-0.0001896},{"cluster":1,"n":10,"win_rate_raw":0.5,"ev_raw":0.00333391,"win_rate_shrunk":0.51735107,"ev_shrunk":0.00059025,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":2,"n":107,"win_rate_raw":0.56074766,"ev_raw":0.00056059,"win_rate_shrunk":0.5385711,"ev_shrunk":0.0004554,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":23,"win_rate_raw":0.56521739,"ev_raw":0.00116177,"win_rate_shrunk":0.52626321,"ev_shrunk":0.0004903,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":119,"win_rate_raw":0.53781513,"ev_raw":0.00084409,"win_rate_shrunk":0.52826627,"ev_shrunk":0.00060184,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":39,"win_rate_raw":0.48717949,"ev_raw":0.00025363,"win_rate_shrunk":0.51104176,"ev_shrunk":0.00033512,"ev_half_a":0.00100088,"ev_half_b":-0.00061817,"consistency":0.14508906,"prob_delta":-0.0011252,"ev_delta":4.862e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}