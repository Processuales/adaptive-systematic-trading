{"fold_id":"spy_202302","symbol":"SPY","test_start_utc":"2023-02-01 00:00:00+00:00","test_end_utc":"2023-03-01 00:00:00+00:00","n_train":479,"n_test":6,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.52,"agg_p_cut":0.69,"safe_size":0.72324,"aggressive_size":0.65,"ev_cut":-0.00542982,"agg_ev_cut":-0.00492982,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00542982,"agg_ev_cut":-0.00522982,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00667907,"b_sl":0.00500598,"beta_proxy":0.70584264,"cost_rt":0.00069664,"dist_to_hi":-0.00338422,"ema_fast_slope":0.00042309,"entry_overnight":0.0,"gap_mu":0.0004144,"gap_sd":0.00613538,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63528864,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00053211,"qqq_pullback_z":0.60156934,"qqq_range_ratio":0.0043187,"qqq_sigma":0.00352254,"qqq_trend_score":2.1788471,"qqq_u_atr":0.00461239,"qqq_vol_z":-0.29303876,"range_ratio":0.00289359,"regime_agree":1.0,"ret_spread":-5.268e-05,"rs_log":0.22827786,"same_bar_ambiguous":0.0,"sigma":0.00261199,"sigma_prank":0.318,"slip_half":0.00021832,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.47634545,"trend_score":2.19762022,"truncated_horizon":0.0,"u_atr":0.00332329,"u_atr_prank":0.343,"vol_z":-0.43513534},"mu":[11.85784314,0.00816343,0.00610922,0.70995194,0.00077775,-0.00715046,0.00044909,0.07107843,0.00044424,0.00838646,8.28676471,7.17401961,0.06352941,0.49126934,0.0,0.00051041,0.48821352,0.00503906,0.0041225,2.27711435,0.00538617,-0.2141212,0.00360016,0.93872549,-2.546e-05,0.29102551,0.0,0.00323685,0.35248529,0.00025888,8e-05,7.00735294,10.01760859,2.34024718,0.0,0.00405501,0.36619118,-0.3111001],"sd":[0.51391162,0.0049892,0.0037374,0.11160562,0.00025208,0.0143785,0.00118331,0.25695581,0.00087405,0.00588898,6.08466582,3.97992653,0.01256041,1.10876182,1.0,0.00143939,1.13598919,0.00326835,0.00211098,1.57671627,0.00257922,1.00730785,0.00256326,0.23983316,0.00187563,0.11612868,1.0,0.0021531,0.26911913,0.00012604,1.0,3.7557074,2.8723804,1.33881466,1.0,0.00248711,0.25309789,0.89430187],"beta":[0.50490196,0.005391,0.03263941,0.03592607,0.01874165,-0.00381848,0.07236878,-0.02829677,-0.005391,0.05593962,0.05041233,0.05967542,0.09031314,0.00805882,0.02171222,0.0,-0.0662267,-0.01240723,-0.06452081,-0.0509355,-0.02519567,0.10124219,-0.04198611,0.01497637,-0.00757773,-0.0736317,-0.00495564,0.0,-0.0139166,-0.04082882,-0.00381848,0.0,0.04702843,-0.14770038,-0.01519202,0.0,0.04249725,0.04098316,0.04936189],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00667907,"b_sl":0.00500598,"beta_proxy":0.70584264,"cost_rt":0.00069664,"dist_to_hi":-0.00338422,"ema_fast_slope":0.00042309,"entry_overnight":0.0,"gap_mu":0.0004144,"gap_sd":0.00613538,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63528864,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00053211,"qqq_pullback_z":0.60156934,"qqq_range_ratio":0.0043187,"qqq_sigma":0.00352254,"qqq_trend_score":2.1788471,"qqq_u_atr":0.00461239,"qqq_vol_z":-0.29303876,"range_ratio":0.00289359,"regime_agree":1.0,"ret_spread":-5.268e-05,"rs_log":0.22827786,"same_bar_ambiguous":0.0,"sigma":0.00261199,"sigma_prank":0.318,"slip_half":0.00021832,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.47634545,"trend_score":2.19762022,"truncated_horizon":0.0,"u_atr":0.00332329,"u_atr_prank":0.343,"vol_z":-0.43513534},"mu":[11.85784314,0.00816343,0.00610922,0.70995194,0.00077775,-0.00715046,0.00044909,0.07107843,0.00044424,0.00838646,8.28676471,7.17401961,0.06352941,0.49126934,0.0,0.00051041,0.48821352,0.00503906,0.0041225,2.27711435,0.00538617,-0.2141212,0.00360016,0.93872549,-2.546e-05,0.29102551,0.0,0.00323685,0.35248529,0.00025888,8e-05,7.00735294,10.01760859,2.34024718,0.0,0.00405501,0.36619118,-0.3111001],"sd":[0.51391162,0.0049892,0.0037374,0.11160562,0.00025208,0.0143785,0.00118331,0.25695581,0.00087405,0.00588898,6.08466582,3.97992653,0.01256041,1.10876182,1.0,0.00143939,1.13598919,0.00326835,0.00211098,1.57671627,0.00257922,1.00730785,0.00256326,0.23983316,0.00187563,0.11612868,1.0,0.0021531,0.26911913,0.00012604,1.0,3.7557074,2.8723804,1.33881466,1.0,0.00248711,0.25309789,0.89430187],"beta":[0.00023211,0.00018585,0.0004552,0.00063721,0.00024586,0.00021654,0.00297572,-0.00191049,-0.00018585,0.00027386,-5.185e-05,5.718e-05,0.00061687,0.00015133,0.00015209,0.0,0.00011708,-0.00021365,-0.00137162,0.00073244,-0.00017941,0.00131713,-0.00075181,0.00108837,-0.00048421,-0.00090089,0.00047127,0.0,-0.00048776,-0.00044237,0.00021654,0.0,0.0010147,-0.00151302,-0.00013609,0.0,0.00100194,0.00018037,0.00023485],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202302_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202302_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202302_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202302_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.17560999,0.27197353,0.28734713,0.35043222,0.35169263,0.6285308,0.66953406,0.78897015],"y_thresholds":[0.33333333,0.33333333,0.36363636,0.36363636,0.44444444,0.44444444,0.5,0.5]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.02947045,0.21388921,0.21666667,0.36569723,0.37828009,0.56666667],"y_thresholds":[0.0,0.36363636,0.36363636,0.44444444,0.44444444,0.5,0.5]},"uncertainty_calibration":{"u_q25":0.01899314,"u_q75":0.03104172},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":17.36025968,"policy_score":17.54432772,"brier":0.22362807,"rmse":0.00817349,"n_val":68},{"cfg_name":"tree_heavy","inner_split":2,"score":0.96539789,"policy_score":1.2006015,"brier":0.29829663,"rmse":0.00574057,"n_val":68},{"cfg_name":"tree_stable","inner_split":1,"score":24.83167344,"policy_score":25.01551112,"brier":0.22391506,"rmse":0.0079507,"n_val":68},{"cfg_name":"tree_stable","inner_split":2,"score":5.00759283,"policy_score":5.23606597,"brier":0.29050115,"rmse":0.00529864,"n_val":68},{"cfg_name":"blend_conservative","inner_split":1,"score":12.02379625,"policy_score":12.19421101,"brier":0.20595545,"rmse":0.00797409,"n_val":68},{"cfg_name":"blend_conservative","inner_split":2,"score":3.90544784,"policy_score":4.13407368,"brier":0.2906468,"rmse":0.00532037,"n_val":68},{"selected_cfg":"tree_stable","nested_score":14.91963314}],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.43976885,"max_abs_z":1.30637314,"top_shift_features":[{"feature":"tp_to_cost","abs_z":1.30637314},{"feature":"ret_spread","abs_z":1.2145637},{"feature":"qqq_u_atr","abs_z":1.04030775},{"feature":"spread_half","abs_z":1.0},{"feature":"intraday_tail_frac","abs_z":0.78300902}]},"performance_drift":{"mean_abs_z":0.43976885,"recent_median_net_bps":-5.93570356,"recent_median_calmar":-8.34591756}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.50490196,"global_ev":0.00023211,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":103,"win_rate_raw":0.42718447,"ev_raw":-0.00074533,"win_rate_shrunk":0.46900554,"ev_shrunk":-0.00021935,"ev_half_a":2.664e-05,"ev_half_b":-0.0010777,"consistency":0.18097834,"prob_delta":-0.00649647,"ev_delta":-3.97e-05},{"cluster":1,"n":10,"win_rate_raw":0.5,"ev_raw":0.00333391,"win_rate_shrunk":0.50452489,"ev_shrunk":0.00047071,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":2,"n":40,"win_rate_raw":0.525,"ev_raw":0.00164549,"win_rate_shrunk":0.50992647,"ev_shrunk":0.00058546,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":29,"win_rate_raw":0.62068966,"ev_raw":8.782e-05,"win_rate_shrunk":0.52743782,"ev_shrunk":0.00020403,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":4,"n":112,"win_rate_raw":0.50892857,"ev_raw":0.00056496,"win_rate_shrunk":0.50684584,"ev_shrunk":0.0003928,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":114,"win_rate_raw":0.53508772,"ev_raw":5.693e-05,"win_rate_shrunk":0.51960784,"ev_shrunk":0.00014677,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}