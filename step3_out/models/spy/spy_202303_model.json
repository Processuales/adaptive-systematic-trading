{"fold_id":"spy_202303","symbol":"SPY","test_start_utc":"2023-03-01 00:00:00+00:00","test_end_utc":"2023-04-01 00:00:00+00:00","n_train":475,"n_test":9,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.52,"agg_p_cut":0.69,"safe_size":0.72324,"aggressive_size":0.65,"ev_cut":-0.00542982,"agg_ev_cut":-0.00492982,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00542982,"agg_ev_cut":-0.00522982,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00669866,"b_sl":0.00501514,"beta_proxy":0.70476683,"cost_rt":0.00069722,"dist_to_hi":-0.00361814,"ema_fast_slope":0.00042109,"entry_overnight":0.0,"gap_mu":0.00041753,"gap_sd":0.00610757,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.62559567,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00051649,"qqq_pullback_z":0.59534168,"qqq_range_ratio":0.00434827,"qqq_sigma":0.0035972,"qqq_trend_score":2.16303658,"qqq_u_atr":0.00469417,"qqq_vol_z":-0.2575782,"range_ratio":0.00292652,"regime_agree":1.0,"ret_spread":-4.536e-05,"rs_log":0.22723042,"same_bar_ambiguous":0.0,"sigma":0.00261685,"sigma_prank":0.334,"slip_half":0.00021861,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.51797131,"trend_score":2.16982414,"truncated_horizon":0.0,"u_atr":0.00333953,"u_atr_prank":0.365,"vol_z":-0.42230124},"mu":[11.85148515,0.00832445,0.0062288,0.70985201,0.00078563,-0.00767148,0.00045272,0.07425743,0.00041592,0.00846057,8.18564356,7.23019802,0.06415842,0.48624729,0.0,0.00051009,0.48566681,0.00512522,0.00420668,2.27680981,0.00550076,-0.20082131,0.00365236,0.94059406,1.02e-06,0.28396134,0.0,0.00330485,0.36436139,0.00026282,8e-05,7.05940594,10.08833687,2.31778019,0.0,0.00413315,0.37612871,-0.30997091],"sd":[0.52437872,0.00510221,0.00382135,0.11220059,0.00025685,0.01530762,0.00120643,0.26218936,0.00090402,0.00590464,6.03764526,3.99120059,0.01233945,1.10661174,1.0,0.00146475,1.1364912,0.00335065,0.00217169,1.56998987,0.00266767,1.01532615,0.00262615,0.2363829,0.00185343,0.11089595,1.0,0.00219709,0.26727317,0.00012843,1.0,3.76427128,2.94153302,1.34138636,1.0,0.00254215,0.25033218,0.90757409],"beta":[0.4950495,0.00182331,0.02586628,0.02545162,0.0281528,-0.00898499,0.04565513,-0.02145846,-0.00182331,0.04957805,0.07004991,0.03976906,0.07624169,0.00965105,0.02207773,0.0,-0.05377813,-0.0138653,-0.08470807,-0.0563832,-0.02761301,0.10346222,-0.02947728,0.02869479,-0.00559147,-0.06212504,-0.01413731,0.0,-0.00507216,-0.03367015,-0.00898499,0.0,0.05986552,-0.15145327,-0.00224288,0.0,0.0246027,0.05217719,0.04695364],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00669866,"b_sl":0.00501514,"beta_proxy":0.70476683,"cost_rt":0.00069722,"dist_to_hi":-0.00361814,"ema_fast_slope":0.00042109,"entry_overnight":0.0,"gap_mu":0.00041753,"gap_sd":0.00610757,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.62559567,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00051649,"qqq_pullback_z":0.59534168,"qqq_range_ratio":0.00434827,"qqq_sigma":0.0035972,"qqq_trend_score":2.16303658,"qqq_u_atr":0.00469417,"qqq_vol_z":-0.2575782,"range_ratio":0.00292652,"regime_agree":1.0,"ret_spread":-4.536e-05,"rs_log":0.22723042,"same_bar_ambiguous":0.0,"sigma":0.00261685,"sigma_prank":0.334,"slip_half":0.00021861,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.51797131,"trend_score":2.16982414,"truncated_horizon":0.0,"u_atr":0.00333953,"u_atr_prank":0.365,"vol_z":-0.42230124},"mu":[11.85148515,0.00832445,0.0062288,0.70985201,0.00078563,-0.00767148,0.00045272,0.07425743,0.00041592,0.00846057,8.18564356,7.23019802,0.06415842,0.48624729,0.0,0.00051009,0.48566681,0.00512522,0.00420668,2.27680981,0.00550076,-0.20082131,0.00365236,0.94059406,1.02e-06,0.28396134,0.0,0.00330485,0.36436139,0.00026282,8e-05,7.05940594,10.08833687,2.31778019,0.0,0.00413315,0.37612871,-0.30997091],"sd":[0.52437872,0.00510221,0.00382135,0.11220059,0.00025685,0.01530762,0.00120643,0.26218936,0.00090402,0.00590464,6.03764526,3.99120059,0.01233945,1.10661174,1.0,0.00146475,1.1364912,0.00335065,0.00217169,1.56998987,0.00266767,1.01532615,0.00262615,0.2363829,0.00185343,0.11089595,1.0,0.00219709,0.26727317,0.00012843,1.0,3.76427128,2.94153302,1.34138636,1.0,0.00254215,0.25033218,0.90757409],"beta":[9.001e-05,7.446e-05,0.00026283,0.0003793,0.00037503,0.00016392,0.00232706,-0.00172792,-7.446e-05,0.00042588,0.0004117,-0.00010798,0.00040893,6.71e-05,0.00019984,0.0,0.00054588,-0.00024952,-0.00158356,0.00037774,-0.00028102,0.00118713,-0.000592,0.00136846,-0.00048241,-0.00067546,0.00039998,0.0,-0.0001583,-0.00026737,0.00016392,0.0,0.00118139,-0.00145779,0.00010191,0.0,0.0006128,0.00040601,0.0001419],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202303_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202303_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202303_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202303_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.17008432,0.24169428,0.25993484,0.70116901,0.75042476,0.7938209],"y_thresholds":[0.33333333,0.33333333,0.43333333,0.43333333,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.08666667,0.19189445,0.2045571,0.56666667,0.64987,0.99987],"y_thresholds":[0.23809524,0.23809524,0.5,0.5,1.0,1.0]},"uncertainty_calibration":{"u_q25":0.01707175,"u_q75":0.02769765},"nested_tuning_rows":[],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.23257252,"max_abs_z":0.6823196,"top_shift_features":[{"feature":"gap_tail","abs_z":0.6823196},{"feature":"gap_mu","abs_z":0.60999138},{"feature":"trend_score","abs_z":0.56652521},{"feature":"hold_bars","abs_z":0.55393748},{"feature":"dist_to_hi","abs_z":0.54639215}]},"performance_drift":{"mean_abs_z":0.23257252,"recent_median_net_bps":-11.05135458,"recent_median_calmar":-13.44212937}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.4950495,"global_ev":9.001e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":24,"win_rate_raw":0.58333333,"ev_raw":0.00186468,"win_rate_shrunk":0.50976348,"ev_shrunk":0.00038579,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":123,"win_rate_raw":0.55284553,"ev_raw":0.00048038,"win_rate_shrunk":0.52430428,"ev_shrunk":0.0002876,"ev_half_a":0.00170569,"ev_half_b":0.00029715,"consistency":0.6478648,"prob_delta":0.01895314,"ev_delta":0.00018633},{"cluster":2,"n":105,"win_rate_raw":0.4,"ev_raw":-0.00155158,"win_rate_shrunk":0.45069307,"ev_shrunk":-0.00067607,"ev_half_a":-0.00073944,"ev_half_b":-0.00190759,"consistency":0.7079616,"prob_delta":-0.03140265,"ev_delta":-0.00047863},{"cluster":3,"n":8,"win_rate_raw":0.375,"ev_raw":-4.524e-05,"win_rate_shrunk":0.48754641,"ev_shrunk":8.156e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":4,"n":43,"win_rate_raw":0.51162791,"ev_raw":0.00110498,"win_rate_shrunk":0.49942295,"ev_shrunk":0.00035776,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":5,"n":101,"win_rate_raw":0.5049505,"ev_raw":0.00047811,"win_rate_shrunk":0.49957439,"ev_shrunk":0.00026738,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}