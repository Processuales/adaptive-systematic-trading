{"fold_id":"spy_202304","symbol":"SPY","test_start_utc":"2023-04-01 00:00:00+00:00","test_end_utc":"2023-05-01 00:00:00+00:00","n_train":463,"n_test":11,"n_trades_test":2,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.52,"agg_p_cut":0.69,"safe_size":0.72324,"aggressive_size":0.65,"ev_cut":-0.00018624,"agg_ev_cut":0.00031376,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00018624,"agg_ev_cut":1.376e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00680797,"b_sl":0.00509733,"beta_proxy":0.70476683,"cost_rt":0.00070182,"dist_to_hi":-0.00366059,"ema_fast_slope":0.00043693,"entry_overnight":0.0,"gap_mu":0.0004313,"gap_sd":0.00582971,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65105627,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0005417,"qqq_pullback_z":0.60156934,"qqq_range_ratio":0.00438419,"qqq_sigma":0.00367675,"qqq_trend_score":2.14914018,"qqq_u_atr":0.00485642,"qqq_vol_z":-0.27876558,"range_ratio":0.0029883,"regime_agree":1.0,"ret_spread":-3.536e-05,"rs_log":0.22487043,"same_bar_ambiguous":0.0,"sigma":0.00267695,"sigma_prank":0.336,"slip_half":0.00022091,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.56718455,"trend_score":2.15593725,"truncated_horizon":0.0,"u_atr":0.00339372,"u_atr_prank":0.369,"vol_z":-0.43513534},"mu":[11.83756345,0.00844664,0.00631871,0.710703,0.00079275,-0.00777377,0.00046738,0.08121827,0.00040036,0.00854501,7.91116751,7.22081218,0.06450508,0.50003201,0.0,0.00051772,0.48973285,0.00517707,0.00427906,2.26033595,0.00559226,-0.21394252,0.00368143,0.93908629,1.643e-05,0.27640163,0.0,0.00335183,0.36935533,0.00026637,8e-05,7.05076142,10.14171743,2.32011103,0.0,0.00419078,0.38037056,-0.30994452],"sd":[0.54634006,0.00516026,0.00386431,0.11388184,0.00025986,0.0154748,0.00121679,0.27317003,0.00093165,0.00596449,5.91176468,3.98148932,0.01227627,1.09816936,1.0,0.00148717,1.13492094,0.00338828,0.00219562,1.58469054,0.00269288,1.0101492,0.00264282,0.23917196,0.00188458,0.10590471,1.0,0.00221773,0.26661678,0.00012993,0.0,3.75485634,2.98685588,1.34768397,1.0,0.00257021,0.24989154,0.9090033],"beta":[0.5,0.00376548,0.01145675,0.01194313,0.03152526,0.00620246,0.0495731,-0.02580788,-0.00376548,0.01886052,0.04398432,0.01406194,0.07867739,0.01247977,0.02757881,0.0,-0.04973176,-0.00778847,-0.07267662,-0.02838576,-0.04012864,0.08907594,-0.03342224,0.04393778,-0.00321365,-0.05214096,-0.01290677,0.0,-0.02739134,-0.04111539,0.00620246,0.0,0.04655637,-0.11476622,0.00563259,0.0,0.01291105,0.02987562,0.04575436],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00680797,"b_sl":0.00509733,"beta_proxy":0.70476683,"cost_rt":0.00070182,"dist_to_hi":-0.00366059,"ema_fast_slope":0.00043693,"entry_overnight":0.0,"gap_mu":0.0004313,"gap_sd":0.00582971,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.65105627,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0005417,"qqq_pullback_z":0.60156934,"qqq_range_ratio":0.00438419,"qqq_sigma":0.00367675,"qqq_trend_score":2.14914018,"qqq_u_atr":0.00485642,"qqq_vol_z":-0.27876558,"range_ratio":0.0029883,"regime_agree":1.0,"ret_spread":-3.536e-05,"rs_log":0.22487043,"same_bar_ambiguous":0.0,"sigma":0.00267695,"sigma_prank":0.336,"slip_half":0.00022091,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.56718455,"trend_score":2.15593725,"truncated_horizon":0.0,"u_atr":0.00339372,"u_atr_prank":0.369,"vol_z":-0.43513534},"mu":[11.83756345,0.00844664,0.00631871,0.710703,0.00079275,-0.00777377,0.00046738,0.08121827,0.00040036,0.00854501,7.91116751,7.22081218,0.06450508,0.50003201,0.0,0.00051772,0.48973285,0.00517707,0.00427906,2.26033595,0.00559226,-0.21394252,0.00368143,0.93908629,1.643e-05,0.27640163,0.0,0.00335183,0.36935533,0.00026637,8e-05,7.05076142,10.14171743,2.32011103,0.0,0.00419078,0.38037056,-0.30994452],"sd":[0.54634006,0.00516026,0.00386431,0.11388184,0.00025986,0.0154748,0.00121679,0.27317003,0.00093165,0.00596449,5.91176468,3.98148932,0.01227627,1.09816936,1.0,0.00148717,1.13492094,0.00338828,0.00219562,1.58469054,0.00269288,1.0101492,0.00264282,0.23917196,0.00188458,0.10590471,1.0,0.00221773,0.26661678,0.00012993,0.0,3.75485634,2.98685588,1.34768397,1.0,0.00257021,0.24989154,0.9090033],"beta":[0.00011721,7.597e-05,9.137e-05,0.00020514,0.00054442,0.00027389,0.00232649,-0.00170026,-7.597e-05,-8.006e-05,0.00018536,-0.00065847,0.00046104,0.00010594,0.0002851,0.0,0.00042108,2.807e-05,-0.00131237,0.00064665,-0.00051243,0.00120042,-0.00075986,0.00156881,-0.00044441,-0.00050806,0.00029068,0.0,-0.00045885,-0.00036409,0.00027389,0.0,0.00098074,-0.0011424,0.00019692,0.0,0.00043342,0.00025683,0.00010705],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202304_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202304_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202304_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202304_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.2542546,0.31730209,0.32380487,0.43656689,0.44049952,0.69761678,0.70126834,0.77717068],"y_thresholds":[0.16666667,0.16666667,0.33333333,0.33333333,0.45652174,0.45652174,0.6,0.6]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.05652174,0.11142883,0.1350811,0.78333333],"y_thresholds":[0.3125,0.3125,0.45283019,0.45283019]},"uncertainty_calibration":{"u_q25":0.01662938,"u_q75":0.02887461},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":3.07606601,"policy_score":3.28154489,"brier":0.25701266,"rmse":0.00635969,"n_val":66},{"cfg_name":"tree_heavy","inner_split":2,"score":-0.69981176,"policy_score":-0.46297641,"brier":0.29997824,"rmse":0.00592583,"n_val":66},{"cfg_name":"tree_stable","inner_split":1,"score":1.67655696,"policy_score":1.87623412,"brier":0.24986184,"rmse":0.00614039,"n_val":66},{"cfg_name":"tree_stable","inner_split":2,"score":-1.26971269,"policy_score":-1.04088073,"brier":0.29017885,"rmse":0.00559892,"n_val":66},{"cfg_name":"blend_conservative","inner_split":1,"score":3.62189618,"policy_score":3.81645053,"brier":0.2432074,"rmse":0.0060744,"n_val":66},{"cfg_name":"blend_conservative","inner_split":2,"score":-0.15342186,"policy_score":0.07648243,"brier":0.29207125,"rmse":0.00542543,"n_val":66},{"selected_cfg":"blend_conservative","nested_score":1.73423716}],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.36516948,"max_abs_z":1.64970483,"top_shift_features":[{"feature":"intraday_tail_frac","abs_z":1.64970483},{"feature":"sigma_prank","abs_z":1.08858397},{"feature":"gap_tail","abs_z":0.96731768},{"feature":"u_atr_prank","abs_z":0.95029353},{"feature":"qqq_trend_score","abs_z":0.77662524}]},"performance_drift":{"mean_abs_z":0.36516948,"recent_median_net_bps":-11.05135458,"recent_median_calmar":-13.44212937}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.5,"global_ev":0.00011721,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":9,"win_rate_raw":0.44444444,"ev_raw":0.00202671,"win_rate_shrunk":0.49612403,"ev_shrunk":0.00025043,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":1,"n":91,"win_rate_raw":0.50549451,"ev_raw":0.00043654,"win_rate_shrunk":0.50236967,"ev_shrunk":0.00025494,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":2,"n":44,"win_rate_raw":0.5,"ev_raw":0.00070752,"win_rate_shrunk":0.5,"ev_shrunk":0.00027559,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":3,"n":100,"win_rate_raw":0.42,"ev_raw":-0.00132215,"win_rate_shrunk":0.46363636,"ev_shrunk":-0.00053704,"ev_half_a":-0.00044337,"ev_half_b":-0.00186076,"consistency":0.64565347,"prob_delta":-0.02347831,"ev_delta":-0.00034674},{"cluster":4,"n":126,"win_rate_raw":0.54761905,"ev_raw":0.00035356,"win_rate_shrunk":0.52439024,"ev_shrunk":0.00023827,"ev_half_a":0.00124585,"ev_half_b":0.00023298,"consistency":0.74678191,"prob_delta":0.01821419,"ev_delta":0.00017794},{"cluster":5,"n":24,"win_rate_raw":0.58333333,"ev_raw":0.00186468,"win_rate_shrunk":0.51388889,"ev_shrunk":0.00040846,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}