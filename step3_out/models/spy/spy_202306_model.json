{"fold_id":"spy_202306","symbol":"SPY","test_start_utc":"2023-06-01 00:00:00+00:00","test_end_utc":"2023-07-01 00:00:00+00:00","n_train":462,"n_test":12,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.56,"agg_p_cut":0.69,"safe_size":0.72324,"aggressive_size":0.65,"ev_cut":-0.00076948,"agg_ev_cut":-0.00026948,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.5,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00076948,"agg_ev_cut":-0.00056948,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00723792,"b_sl":0.00537057,"beta_proxy":0.70365265,"cost_rt":0.00073218,"dist_to_hi":-0.00387196,"ema_fast_slope":0.00045108,"entry_overnight":0.0,"gap_mu":0.0004185,"gap_sd":0.00623513,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.66142325,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00055953,"qqq_pullback_z":0.59283221,"qqq_range_ratio":0.00466581,"qqq_sigma":0.00389664,"qqq_trend_score":2.13461709,"qqq_u_atr":0.00512921,"qqq_vol_z":-0.24338784,"range_ratio":0.00310653,"regime_agree":1.0,"ret_spread":-5.199e-05,"rs_log":0.22466981,"same_bar_ambiguous":0.0,"sigma":0.00289582,"sigma_prank":0.34,"slip_half":0.00023609,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.07366288,"trend_score":2.14396566,"truncated_horizon":0.0,"u_atr":0.00358038,"u_atr_prank":0.37,"vol_z":-0.37930946},"mu":[11.84732824,0.00876464,0.00655768,0.71025159,0.00080614,-0.00840405,0.0004828,0.07633588,0.00033558,0.00867549,7.73536896,7.19083969,0.06438931,0.48999372,0.0,0.0005192,0.46214555,0.00539654,0.00446704,2.23395377,0.00580858,-0.20332582,0.00383129,0.93638677,3.272e-05,0.26681997,0.0,0.00348995,0.37377099,0.00027307,8e-05,7.02544529,10.36580721,2.33071372,0.0,0.00435073,0.38135878,-0.30082882],"sd":[0.53106953,0.00517934,0.00387889,0.1140158,0.00026256,0.01607212,0.00126222,0.26553477,0.00097673,0.00594342,5.80042956,3.91470348,0.01228929,1.10450853,1.0,0.00155327,1.14372798,0.00343791,0.00221887,1.58342522,0.00270209,0.99024293,0.00267901,0.24406267,0.00191028,0.09841163,1.0,0.00222667,0.26964989,0.00013128,1.0,3.68952356,2.98017822,1.36912217,1.0,0.00258029,0.25389661,0.89651463],"beta":[0.49363868,0.0082879,0.01902779,0.01656875,0.04243311,-0.01103702,0.05231804,-0.02729811,-0.0082879,0.00289939,0.02848269,-0.00485603,0.07684897,0.00730005,0.01185576,0.0,-0.05024451,0.01625499,-0.0862522,-0.0253337,-0.04848882,0.1168032,-0.01973985,0.03795627,0.00303644,-0.04305693,-0.02343025,0.0,-0.01858863,-0.0607298,-0.01103702,0.0,0.04650457,-0.10696415,0.02442018,0.0,0.01162093,0.03129246,0.05907521],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00723792,"b_sl":0.00537057,"beta_proxy":0.70365265,"cost_rt":0.00073218,"dist_to_hi":-0.00387196,"ema_fast_slope":0.00045108,"entry_overnight":0.0,"gap_mu":0.0004185,"gap_sd":0.00623513,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.66142325,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00055953,"qqq_pullback_z":0.59283221,"qqq_range_ratio":0.00466581,"qqq_sigma":0.00389664,"qqq_trend_score":2.13461709,"qqq_u_atr":0.00512921,"qqq_vol_z":-0.24338784,"range_ratio":0.00310653,"regime_agree":1.0,"ret_spread":-5.199e-05,"rs_log":0.22466981,"same_bar_ambiguous":0.0,"sigma":0.00289582,"sigma_prank":0.34,"slip_half":0.00023609,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.07366288,"trend_score":2.14396566,"truncated_horizon":0.0,"u_atr":0.00358038,"u_atr_prank":0.37,"vol_z":-0.37930946},"mu":[11.84732824,0.00876464,0.00655768,0.71025159,0.00080614,-0.00840405,0.0004828,0.07633588,0.00033558,0.00867549,7.73536896,7.19083969,0.06438931,0.48999372,0.0,0.0005192,0.46214555,0.00539654,0.00446704,2.23395377,0.00580858,-0.20332582,0.00383129,0.93638677,3.272e-05,0.26681997,0.0,0.00348995,0.37377099,0.00027307,8e-05,7.02544529,10.36580721,2.33071372,0.0,0.00435073,0.38135878,-0.30082882],"sd":[0.53106953,0.00517934,0.00387889,0.1140158,0.00026256,0.01607212,0.00126222,0.26553477,0.00097673,0.00594342,5.80042956,3.91470348,0.01228929,1.10450853,1.0,0.00155327,1.14372798,0.00343791,0.00221887,1.58342522,0.00270209,0.99024293,0.00267901,0.24406267,0.00191028,0.09841163,1.0,0.00222667,0.26964989,0.00013128,1.0,3.68952356,2.98017822,1.36912217,1.0,0.00258029,0.25389661,0.89651463],"beta":[-5.952e-05,-6.273e-05,0.00047832,0.00055776,0.00069033,-0.00056925,0.00259506,-0.0018292,6.273e-05,0.00023232,0.00012499,-0.00055491,0.00047764,-1.54e-05,0.00018729,0.0,0.000557,7.309e-05,-0.00173371,0.00073382,-0.00049679,0.001672,-0.00043503,0.0013895,-0.00026726,-0.00027885,0.00011076,0.0,6.044e-05,-0.00064891,-0.00056925,0.0,0.00100969,-0.00127958,0.00024278,0.0,0.0007168,0.00042598,0.00015913],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202306_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202306_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202306_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202306_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.19538381,0.20841348,0.69505988,0.71899454,0.82600728,0.843565],"y_thresholds":[0.0,0.4,0.4,0.41666667,0.41666667,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.10833333,0.13,0.13828005,0.87353914,0.88007516],"y_thresholds":[0.38888889,0.38888889,0.4,0.4,1.0]},"uncertainty_calibration":{"u_q25":0.01530304,"u_q75":0.02582301},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":2.15024545,"policy_score":2.37713119,"brier":0.28675627,"rmse":0.00590927,"n_val":66},{"cfg_name":"tree_heavy","inner_split":2,"score":-1.44743295,"policy_score":-1.2249888,"brier":0.27943783,"rmse":0.00643289,"n_val":66},{"cfg_name":"tree_stable","inner_split":1,"score":1.28301369,"policy_score":1.52957976,"brier":0.31304315,"rmse":0.00589185,"n_val":66},{"cfg_name":"tree_stable","inner_split":2,"score":-0.40836818,"policy_score":-0.19424664,"brier":0.26937033,"rmse":0.0060469,"n_val":66},{"cfg_name":"blend_conservative","inner_split":1,"score":0.59426226,"policy_score":0.82405612,"brier":0.29111217,"rmse":0.00572986,"n_val":66},{"cfg_name":"blend_conservative","inner_split":2,"score":-0.96606214,"policy_score":-0.76739818,"brier":0.24921219,"rmse":0.00587741,"n_val":66},{"selected_cfg":"tree_stable","nested_score":0.43732275}],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.40663584,"max_abs_z":1.30591026,"top_shift_features":[{"feature":"gap_tail","abs_z":1.30591026},{"feature":"beta_proxy","abs_z":1.00797892},{"feature":"spread_half","abs_z":1.0},{"feature":"rs_log","abs_z":0.94209616},{"feature":"trend_score","abs_z":0.88469476}]},"performance_drift":{"mean_abs_z":0.40663584,"recent_median_net_bps":-12.05122285,"recent_median_calmar":-17.04550081}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49363868,"global_ev":-5.952e-05,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":25,"win_rate_raw":0.56,"ev_raw":0.00115875,"win_rate_shrunk":0.50508028,"ev_shrunk":0.00015053,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":1,"n":45,"win_rate_raw":0.48888889,"ev_raw":0.00064436,"win_rate_shrunk":0.49234328,"ev_shrunk":0.00013245,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":2,"n":75,"win_rate_raw":0.48,"ev_raw":0.00021907,"win_rate_shrunk":0.48839303,"ev_shrunk":4.763e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":0.0},{"cluster":3,"n":139,"win_rate_raw":0.54676259,"ev_raw":0.00035315,"win_rate_shrunk":0.52214919,"ev_shrunk":0.00016195,"ev_half_a":0.00090495,"ev_half_b":0.0002494,"consistency":0.83611271,"prob_delta":0.02383801,"ev_delta":0.00013541},{"cluster":4,"n":97,"win_rate_raw":0.42268041,"ev_raw":-0.00140676,"win_rate_shrunk":0.46192001,"ev_shrunk":-0.00066174,"ev_half_a":0.00039124,"ev_half_b":-0.00296273,"consistency":0.0403764,"prob_delta":-0.00128069,"ev_delta":-2.672e-05},{"cluster":5,"n":12,"win_rate_raw":0.41666667,"ev_raw":-0.00086808,"win_rate_shrunk":0.48664122,"ev_shrunk":-0.00013302,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}