{"fold_id":"spy_202311","symbol":"SPY","test_start_utc":"2023-11-01 00:00:00+00:00","test_end_utc":"2023-12-01 00:00:00+00:00","n_train":465,"n_test":15,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.56,"agg_p_cut":0.69,"safe_size":0.72324,"aggressive_size":0.65,"ev_cut":-0.00076948,"agg_ev_cut":-0.00026948,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.5,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00076948,"agg_ev_cut":-0.00056948,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00827124,"b_sl":0.00620343,"beta_proxy":0.7125147,"cost_rt":0.00076351,"dist_to_hi":-0.00434273,"ema_fast_slope":0.0004503,"entry_overnight":0.0,"gap_mu":0.00040644,"gap_sd":0.00727928,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63545833,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00056658,"qqq_pullback_z":0.59200719,"qqq_range_ratio":0.00506949,"qqq_sigma":0.00446979,"qqq_trend_score":2.1339095,"qqq_u_atr":0.00577176,"qqq_vol_z":-0.15407638,"range_ratio":0.00346498,"regime_agree":1.0,"ret_spread":-0.00016824,"rs_log":0.22550873,"same_bar_ambiguous":0.0,"sigma":0.00328904,"sigma_prank":0.325,"slip_half":0.00025176,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.69701171,"trend_score":2.13549327,"truncated_horizon":0.0,"u_atr":0.00412858,"u_atr_prank":0.361,"vol_z":-0.30757794},"mu":[11.81313131,0.00941727,0.00704186,0.71576375,0.00083787,-0.00882878,0.00049271,0.09343434,0.00025186,0.00904438,7.91919192,7.03282828,0.06429293,0.47771248,0.0,0.00054249,0.45347042,0.00581714,0.00477733,2.20891351,0.00625146,-0.15845748,0.00415036,0.92676768,-1.654e-05,0.25515082,0.00252525,0.00371653,0.37041919,0.00028893,8e-05,6.87626263,10.7545734,2.30900477,0.0,0.00466646,0.37979293,-0.2442128],"sd":[0.58208029,0.00532529,0.00398562,0.11290075,0.00027881,0.0161741,0.00131724,0.29104015,0.00101744,0.00581984,5.72285294,3.86795082,0.01222186,1.10814437,1.0,0.00164713,1.15033205,0.00352935,0.00237789,1.6084891,0.00282272,1.00826469,0.00276141,0.26051747,0.0021392,0.08139364,0.0501884,0.00229301,0.27832028,0.00013941,0.0,3.64765625,3.08867659,1.37839678,1.0,0.00264851,0.26393473,0.92783166],"beta":[0.49747475,-8.267e-05,0.00022262,0.00089887,0.01077155,-0.01372296,0.03915421,0.0079039,8.267e-05,0.00504719,0.02965822,-0.00739583,0.10030946,0.00391218,0.01153659,0.0,-0.09283794,0.01562761,-0.07960319,0.02869417,-0.02014975,-0.00112264,0.03437351,0.0366686,-0.01767926,-0.02688745,0.01579114,-0.02450885,0.03716756,-0.03948106,-0.01372296,0.0,0.02565869,-0.05099385,0.00896404,0.0,0.00225773,0.02266422,-0.0264763],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00827124,"b_sl":0.00620343,"beta_proxy":0.7125147,"cost_rt":0.00076351,"dist_to_hi":-0.00434273,"ema_fast_slope":0.0004503,"entry_overnight":0.0,"gap_mu":0.00040644,"gap_sd":0.00727928,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63545833,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00056658,"qqq_pullback_z":0.59200719,"qqq_range_ratio":0.00506949,"qqq_sigma":0.00446979,"qqq_trend_score":2.1339095,"qqq_u_atr":0.00577176,"qqq_vol_z":-0.15407638,"range_ratio":0.00346498,"regime_agree":1.0,"ret_spread":-0.00016824,"rs_log":0.22550873,"same_bar_ambiguous":0.0,"sigma":0.00328904,"sigma_prank":0.325,"slip_half":0.00025176,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.69701171,"trend_score":2.13549327,"truncated_horizon":0.0,"u_atr":0.00412858,"u_atr_prank":0.361,"vol_z":-0.30757794},"mu":[11.81313131,0.00941727,0.00704186,0.71576375,0.00083787,-0.00882878,0.00049271,0.09343434,0.00025186,0.00904438,7.91919192,7.03282828,0.06429293,0.47771248,0.0,0.00054249,0.45347042,0.00581714,0.00477733,2.20891351,0.00625146,-0.15845748,0.00415036,0.92676768,-1.654e-05,0.25515082,0.00252525,0.00371653,0.37041919,0.00028893,8e-05,6.87626263,10.7545734,2.30900477,0.0,0.00466646,0.37979293,-0.2442128],"sd":[0.58208029,0.00532529,0.00398562,0.11290075,0.00027881,0.0161741,0.00131724,0.29104015,0.00101744,0.00581984,5.72285294,3.86795082,0.01222186,1.10814437,1.0,0.00164713,1.15033205,0.00352935,0.00237789,1.6084891,0.00282272,1.00826469,0.00276141,0.26051747,0.0021392,0.08139364,0.0501884,0.00229301,0.27832028,0.00013941,0.0,3.64765625,3.08867659,1.37839678,1.0,0.00264851,0.26393473,0.92783166],"beta":[-0.00032357,-6.74e-05,0.00026213,0.00048238,0.00047409,-0.00074271,0.00222851,-0.00101471,6.74e-05,0.00096213,0.00011578,0.00029165,0.00085186,0.00014664,9.831e-05,0.0,-0.00032397,0.00024248,-0.00168587,0.00111765,-0.00058759,-0.00036762,0.00035131,0.00129647,-0.00054737,-9.83e-06,5.538e-05,-0.00033108,0.00121016,-0.00093426,-0.00074271,0.0,0.00050591,-0.00093475,0.00024346,0.0,0.00092477,0.00053447,-0.00086861],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202311_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202311_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202311_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202311_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.21234349,0.23168353,0.23713347,0.61423922,0.61948481,0.63508845,0.65011167,0.84676753,0.849817],"y_thresholds":[0.0,0.0,0.45098039,0.45098039,0.5,0.5,0.54545455,0.54545455,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.2379908,0.24453929,0.34348499,0.35,0.99987],"y_thresholds":[0.4137931,0.4137931,0.46666667,0.46666667,0.52,0.52]},"uncertainty_calibration":{"u_q25":0.01122284,"u_q75":0.01609333},"nested_tuning_rows":[],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.39775084,"max_abs_z":1.15511957,"top_shift_features":[{"feature":"rs_log","abs_z":1.15511957},{"feature":"intraday_tail_frac","abs_z":0.96115922},{"feature":"gap_tail","abs_z":0.93336364},{"feature":"tp_to_cost","abs_z":0.90155026},{"feature":"trend_score","abs_z":0.86708154}]},"performance_drift":{"mean_abs_z":0.39775084,"recent_median_net_bps":-12.05122285,"recent_median_calmar":-20.64887225}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49747475,"global_ev":-0.00032357,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":39,"win_rate_raw":0.53846154,"ev_raw":1.001e-05,"win_rate_shrunk":0.50752811,"ev_shrunk":-0.00024175,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":1,"n":158,"win_rate_raw":0.53164557,"ev_raw":0.00037663,"win_rate_shrunk":0.51689557,"ev_shrunk":7.439e-05,"ev_half_a":0.00137686,"ev_half_b":-0.00030438,"consistency":0.14492245,"prob_delta":0.00281451,"ev_delta":1.078e-05},{"cluster":2,"n":30,"win_rate_raw":0.43333333,"ev_raw":-0.00096975,"win_rate_shrunk":0.48464646,"ev_shrunk":-0.0004528,"ev_half_a":-0.00011858,"ev_half_b":-0.00194251,"consistency":0.40801296,"prob_delta":-0.00523411,"ev_delta":-0.00018475},{"cluster":3,"n":29,"win_rate_raw":0.55172414,"ev_raw":0.00108991,"win_rate_shrunk":0.50803335,"ev_shrunk":-4.846e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":100,"win_rate_raw":0.43,"ev_raw":-0.00168785,"win_rate_shrunk":0.46680441,"ev_shrunk":-0.0009437,"ev_half_a":-0.0005957,"ev_half_b":-0.002696,"consistency":0.47492564,"prob_delta":-0.01456613,"ev_delta":-0.00044819},{"cluster":5,"n":40,"win_rate_raw":0.5,"ev_raw":-0.00054402,"win_rate_shrunk":0.49810606,"ev_shrunk":-0.00037868,"ev_half_a":0.0025216,"ev_half_b":-0.00331768,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}