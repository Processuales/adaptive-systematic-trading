{"fold_id":"spy_202401","symbol":"SPY","test_start_utc":"2024-01-01 00:00:00+00:00","test_end_utc":"2024-02-01 00:00:00+00:00","n_train":461,"n_test":12,"n_trades_test":4,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.56,"agg_p_cut":0.69,"safe_size":0.72324,"aggressive_size":0.65,"ev_cut":-0.00076948,"agg_ev_cut":-0.00026948,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.5,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00076948,"agg_ev_cut":-0.00056948,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00857185,"b_sl":0.00642889,"beta_proxy":0.71061879,"cost_rt":0.00076895,"dist_to_hi":-0.00485356,"ema_fast_slope":0.00046284,"entry_overnight":0.0,"gap_mu":0.00031274,"gap_sd":0.00759659,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.62954347,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00056658,"qqq_pullback_z":0.58421373,"qqq_range_ratio":0.00539135,"qqq_sigma":0.00457708,"qqq_trend_score":2.0394521,"qqq_u_atr":0.00590426,"qqq_vol_z":-0.14901137,"range_ratio":0.00371908,"regime_agree":1.0,"ret_spread":-0.00016824,"rs_log":0.22248269,"same_bar_ambiguous":0.0,"sigma":0.00335716,"sigma_prank":0.326,"slip_half":0.00025448,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.99214499,"trend_score":2.05313723,"truncated_horizon":0.0,"u_atr":0.00427619,"u_atr_prank":0.363,"vol_z":-0.33466788},"mu":[11.81632653,0.00969985,0.00725385,0.71260584,0.00084922,-0.00937083,0.00050662,0.09183673,0.00018011,0.0092734,7.76785714,7.02806122,0.06428571,0.47752822,0.0,0.00055237,0.4421953,0.00601759,0.00491721,2.15639047,0.00644454,-0.14999392,0.00429849,0.92346939,-2.075e-05,0.24170775,0.00255102,0.00382285,0.37329082,0.00029461,8e-05,6.86989796,11.00640262,2.24022411,0.0,0.00480784,0.38286735,-0.25720214],"sd":[0.57759068,0.00520664,0.00389725,0.11256702,0.00027581,0.0163224,0.00133239,0.28879534,0.00101607,0.00574735,5.86625489,3.92554797,0.01241296,1.10312785,1.0,0.00165899,1.13521015,0.00344431,0.0023025,1.6199792,0.00270756,0.98548004,0.00271213,0.26584521,0.0021849,0.06488727,0.05044316,0.00225298,0.27987318,0.0001379,0.0,3.70616034,2.96043538,1.38340529,1.0,0.0025905,0.26365172,0.90802944],"beta":[0.48214286,-0.00032817,0.00767492,0.00842074,0.01025179,-0.03444993,0.03860442,-0.00048585,0.00032817,0.02125064,0.03531605,0.01400226,0.0782467,0.01126629,0.01271623,0.0,-0.11342975,0.0555565,-0.06956814,0.06575185,-0.03003659,-0.01821706,0.00441485,0.0227413,-0.01906702,-0.01911596,0.0090182,-0.02283485,0.0376579,0.005696,-0.03444993,0.0,0.04486623,-0.05634348,0.01769373,0.0,0.00991118,-0.00840096,0.0145067],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00857185,"b_sl":0.00642889,"beta_proxy":0.71061879,"cost_rt":0.00076895,"dist_to_hi":-0.00485356,"ema_fast_slope":0.00046284,"entry_overnight":0.0,"gap_mu":0.00031274,"gap_sd":0.00759659,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.62954347,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00056658,"qqq_pullback_z":0.58421373,"qqq_range_ratio":0.00539135,"qqq_sigma":0.00457708,"qqq_trend_score":2.0394521,"qqq_u_atr":0.00590426,"qqq_vol_z":-0.14901137,"range_ratio":0.00371908,"regime_agree":1.0,"ret_spread":-0.00016824,"rs_log":0.22248269,"same_bar_ambiguous":0.0,"sigma":0.00335716,"sigma_prank":0.326,"slip_half":0.00025448,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.99214499,"trend_score":2.05313723,"truncated_horizon":0.0,"u_atr":0.00427619,"u_atr_prank":0.363,"vol_z":-0.33466788},"mu":[11.81632653,0.00969985,0.00725385,0.71260584,0.00084922,-0.00937083,0.00050662,0.09183673,0.00018011,0.0092734,7.76785714,7.02806122,0.06428571,0.47752822,0.0,0.00055237,0.4421953,0.00601759,0.00491721,2.15639047,0.00644454,-0.14999392,0.00429849,0.92346939,-2.075e-05,0.24170775,0.00255102,0.00382285,0.37329082,0.00029461,8e-05,6.86989796,11.00640262,2.24022411,0.0,0.00480784,0.38286735,-0.25720214],"sd":[0.57759068,0.00520664,0.00389725,0.11256702,0.00027581,0.0163224,0.00133239,0.28879534,0.00101607,0.00574735,5.86625489,3.92554797,0.01241296,1.10312785,1.0,0.00165899,1.13521015,0.00344431,0.0023025,1.6199792,0.00270756,0.98548004,0.00271213,0.26584521,0.0021849,0.06488727,0.05044316,0.00225298,0.27987318,0.0001379,0.0,3.70616034,2.96043538,1.38340529,1.0,0.0025905,0.26365172,0.90802944],"beta":[-0.00050025,-9.109e-05,0.00026101,0.00048521,0.00050942,-0.00096806,0.00219749,-0.00108768,9.109e-05,0.00059368,0.00014655,0.00010935,0.00071168,0.00029879,2.856e-05,0.0,-0.00043767,0.00055044,-0.00145212,0.00147001,-0.00073211,-0.00061059,0.00020401,0.00098535,-0.00056507,7.541e-05,-0.0003124,-0.00032196,0.00134995,-0.00039828,-0.00096806,-0.0,0.0006999,-0.00075574,0.00031132,0.0,0.00093535,7.086e-05,-0.00051205],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202401_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202401_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202401_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202401_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.20575948,0.22138583,0.22201814,0.48457066,0.50934903,0.54519314,0.54634684,0.814151],"y_thresholds":[0.0,0.0,0.5,0.5,0.55555556,0.55555556,0.77272727,0.77272727]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.323623,0.32730468,0.35,0.35454545,0.42222222,0.79632065],"y_thresholds":[0.48484848,0.48484848,0.5,0.5,0.66666667,0.72727273,0.72727273]},"uncertainty_calibration":{"u_q25":0.00877302,"u_q75":0.01432363},"nested_tuning_rows":[],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.39788044,"max_abs_z":1.34924338,"top_shift_features":[{"feature":"rs_log","abs_z":1.34924338},{"feature":"spread_half","abs_z":1.0},{"feature":"gap_sd","abs_z":0.81730049},{"feature":"gap_tail","abs_z":0.78837598},{"feature":"intraday_tail_frac","abs_z":0.73609023}]},"performance_drift":{"mean_abs_z":0.39788044,"recent_median_net_bps":-12.05122285,"recent_median_calmar":-20.64887225}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48214286,"global_ev":-0.00050025,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":35,"win_rate_raw":0.45714286,"ev_raw":-0.00210693,"win_rate_shrunk":0.4764977,"ev_shrunk":-0.00086305,"ev_half_a":0.0007944,"ev_half_b":-0.00428292,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":1,"n":168,"win_rate_raw":0.50595238,"ev_raw":4.92e-05,"win_rate_shrunk":0.49603175,"ev_shrunk":-0.00017974,"ev_half_a":0.00078952,"ev_half_b":-0.00051967,"consistency":0.16817565,"prob_delta":0.00233577,"ev_delta":-3.023e-05},{"cluster":2,"n":26,"win_rate_raw":0.42307692,"ev_raw":-0.00127335,"win_rate_shrunk":0.47162427,"ev_shrunk":-0.00063793,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":3,"n":34,"win_rate_raw":0.52941176,"ev_raw":0.0017641,"win_rate_shrunk":0.49257885,"ev_shrunk":-3.3e-07,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":99,"win_rate_raw":0.43434343,"ev_raw":-0.00191537,"win_rate_shrunk":0.4605349,"ev_shrunk":-0.00113996,"ev_half_a":-0.00069359,"ev_half_b":-0.0032135,"consistency":0.37002264,"prob_delta":-0.00799543,"ev_delta":-0.00042181},{"cluster":5,"n":30,"win_rate_raw":0.53333333,"ev_raw":0.00107087,"win_rate_shrunk":0.49238095,"ev_shrunk":-0.00018603,"ev_half_a":0.00136327,"ev_half_b":0.00084728,"consistency":0.6532523,"prob_delta":0.00668806,"ev_delta":-0.00012152}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}