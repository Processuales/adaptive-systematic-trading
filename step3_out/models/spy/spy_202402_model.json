{"fold_id":"spy_202402","symbol":"SPY","test_start_utc":"2024-02-01 00:00:00+00:00","test_end_utc":"2024-03-01 00:00:00+00:00","n_train":456,"n_test":13,"n_trades_test":2,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.6,"agg_p_cut":0.69,"safe_size":0.4797,"aggressive_size":0.76032,"ev_cut":-0.00014854,"agg_ev_cut":0.00035146,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.54,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.2,"ev_cut":-0.00014854,"agg_ev_cut":5.146e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00875246,"b_sl":0.0065582,"beta_proxy":0.70694213,"cost_rt":0.0007705,"dist_to_hi":-0.00488145,"ema_fast_slope":0.00047408,"entry_overnight":0.0,"gap_mu":0.0001938,"gap_sd":0.00763568,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.61737703,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00058648,"qqq_pullback_z":0.57089634,"qqq_range_ratio":0.005479,"qqq_sigma":0.0046187,"qqq_trend_score":2.01965147,"qqq_u_atr":0.0059787,"qqq_vol_z":-0.15516318,"range_ratio":0.00383546,"regime_agree":1.0,"ret_spread":-0.00014661,"rs_log":0.21780093,"same_bar_ambiguous":0.0,"sigma":0.00337995,"sigma_prank":0.324,"slip_half":0.00025525,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":11.06485801,"trend_score":2.04496964,"truncated_horizon":0.0,"u_atr":0.00435388,"u_atr_prank":0.353,"vol_z":-0.35109778},"mu":[11.81958763,0.00981306,0.00733884,0.71042743,0.00085281,-0.00944265,0.00052041,0.09020619,0.00015299,0.00935738,7.65979381,7.0128866,0.0643299,0.47935622,0.0,0.00056451,0.43086495,0.00612252,0.00497415,2.14115712,0.00653509,-0.15604169,0.00436365,0.92268041,1.542e-05,0.23441037,0.00257732,0.00386157,0.36929897,0.0002964,8e-05,6.85051546,11.12228051,2.24089043,0.0,0.00486462,0.38008247,-0.26227867],"sd":[0.57295385,0.00516033,0.00386256,0.11379694,0.00027486,0.01639644,0.00134301,0.28647693,0.00101875,0.00573207,5.99507805,3.94319705,0.01239136,1.1041873,1.0,0.00167562,1.12981506,0.00340711,0.00227325,1.61316344,0.00265224,0.98910965,0.00269454,0.26709786,0.00220771,0.05761617,0.05070184,0.00223987,0.28106107,0.00013743,0.0,3.71793158,2.89581346,1.39404938,1.0,0.00256746,0.26316244,0.90883416],"beta":[0.48453608,-0.00228201,0.00091838,-3.383e-05,0.00366419,-0.02856087,0.0429519,-0.00329038,0.00228201,-0.02788244,0.02987048,-0.01834252,0.08810297,0.02893226,0.01757323,0.0,-0.12350786,0.06672685,-0.07639222,0.06284658,-0.03068905,-0.01462764,0.0040956,0.03769008,-0.02108702,-0.01271905,-0.0197977,-0.0240055,0.03952945,-0.00204609,-0.02856087,0.0,0.02578673,-0.02930248,0.02139871,0.0,-0.00194762,-0.00161265,0.00482228],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00875246,"b_sl":0.0065582,"beta_proxy":0.70694213,"cost_rt":0.0007705,"dist_to_hi":-0.00488145,"ema_fast_slope":0.00047408,"entry_overnight":0.0,"gap_mu":0.0001938,"gap_sd":0.00763568,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.61737703,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00058648,"qqq_pullback_z":0.57089634,"qqq_range_ratio":0.005479,"qqq_sigma":0.0046187,"qqq_trend_score":2.01965147,"qqq_u_atr":0.0059787,"qqq_vol_z":-0.15516318,"range_ratio":0.00383546,"regime_agree":1.0,"ret_spread":-0.00014661,"rs_log":0.21780093,"same_bar_ambiguous":0.0,"sigma":0.00337995,"sigma_prank":0.324,"slip_half":0.00025525,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":11.06485801,"trend_score":2.04496964,"truncated_horizon":0.0,"u_atr":0.00435388,"u_atr_prank":0.353,"vol_z":-0.35109778},"mu":[11.81958763,0.00981306,0.00733884,0.71042743,0.00085281,-0.00944265,0.00052041,0.09020619,0.00015299,0.00935738,7.65979381,7.0128866,0.0643299,0.47935622,0.0,0.00056451,0.43086495,0.00612252,0.00497415,2.14115712,0.00653509,-0.15604169,0.00436365,0.92268041,1.542e-05,0.23441037,0.00257732,0.00386157,0.36929897,0.0002964,8e-05,6.85051546,11.12228051,2.24089043,0.0,0.00486462,0.38008247,-0.26227867],"sd":[0.57295385,0.00516033,0.00386256,0.11379694,0.00027486,0.01639644,0.00134301,0.28647693,0.00101875,0.00573207,5.99507805,3.94319705,0.01239136,1.1041873,1.0,0.00167562,1.12981506,0.00340711,0.00227325,1.61316344,0.00265224,0.98910965,0.00269454,0.26709786,0.00220771,0.05761617,0.05070184,0.00223987,0.28106107,0.00013743,0.0,3.71793158,2.89581346,1.39404938,1.0,0.00256746,0.26316244,0.90883416],"beta":[-0.0004631,-0.00011314,0.00012836,0.00032681,0.00034972,-0.00076887,0.00227102,-0.00111713,0.00011314,-0.00010024,2.863e-05,-0.00032227,0.00078795,0.00044582,-6.666e-05,0.0,-0.00052488,0.00078534,-0.00148437,0.00135248,-0.00077969,-0.00046462,0.00020116,0.00118668,-0.00061275,0.00016789,-0.00088079,-0.00033487,0.00139447,-0.00041163,-0.00076887,0.0,0.00048719,-0.00024434,0.00040922,0.0,0.00072534,-1.828e-05,-0.00073302],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202402_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202402_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202402_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202402_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.2507872,0.29305501,0.48781455,0.4897142,0.51871947,0.56355154,0.6699787,0.68190582,0.81608027],"y_thresholds":[0.0,0.36363636,0.36363636,0.5,0.5,0.52941176,0.52941176,0.77777778,0.77777778]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.20896772,0.22146349,0.48947768,0.49639065,0.56066545,0.56380579,0.59963987,0.60799426,0.73054781],"y_thresholds":[0.38095238,0.38095238,0.52,0.52,0.6,0.6,0.66666667,0.66666667,0.77777778,0.77777778]},"uncertainty_calibration":{"u_q25":0.00969329,"u_q75":0.01399052},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-0.03396581,"policy_score":0.20334642,"brier":0.29254113,"rmse":0.00895319,"n_val":65},{"cfg_name":"tree_heavy","inner_split":2,"score":-1.27763009,"policy_score":-1.05275071,"brier":0.26647777,"rmse":0.01251053,"n_val":65},{"cfg_name":"tree_stable","inner_split":1,"score":-0.23115125,"policy_score":-0.01877742,"brier":0.25989252,"rmse":0.00872722,"n_val":65},{"cfg_name":"tree_stable","inner_split":2,"score":-0.34496387,"policy_score":-0.13042881,"brier":0.25376158,"rmse":0.01210694,"n_val":65},{"cfg_name":"blend_conservative","inner_split":1,"score":-0.32664796,"policy_score":-0.10709844,"brier":0.26912457,"rmse":0.00885305,"n_val":65},{"cfg_name":"blend_conservative","inner_split":2,"score":-0.63761038,"policy_score":-0.42335394,"brier":0.25373898,"rmse":0.0119761,"n_val":65},{"selected_cfg":"tree_stable","nested_score":-0.28805756}],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.38986706,"max_abs_z":1.35562073,"top_shift_features":[{"feature":"rs_log","abs_z":1.35562073},{"feature":"spread_half","abs_z":1.0},{"feature":"sigma_prank","abs_z":0.82890692},{"feature":"gap_sd","abs_z":0.8277567},{"feature":"u_atr_prank","abs_z":0.81813876}]},"performance_drift":{"mean_abs_z":0.38986706,"recent_median_net_bps":-8.60883661,"recent_median_calmar":-12.97330584}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48453608,"global_ev":-0.0004631,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":96,"win_rate_raw":0.4375,"ev_raw":-0.00121777,"win_rate_shrunk":0.46363116,"ev_shrunk":-0.00079851,"ev_half_a":4.983e-05,"ev_half_b":-0.0019129,"consistency":0.12732976,"prob_delta":-0.00266182,"ev_delta":-0.00010167},{"cluster":1,"n":107,"win_rate_raw":0.56074766,"ev_raw":0.00052472,"win_rate_shrunk":0.5204596,"ev_shrunk":2.53e-06,"ev_half_a":-6.533e-05,"ev_half_b":0.00136957,"consistency":0.16031869,"prob_delta":0.00575921,"ev_delta":4.1e-07},{"cluster":2,"n":90,"win_rate_raw":0.43333333,"ev_raw":-0.00143879,"win_rate_shrunk":0.46259205,"ev_shrunk":-0.00088125,"ev_half_a":-0.00014023,"ev_half_b":-0.00279638,"consistency":0.33596387,"prob_delta":-0.0073724,"ev_delta":-0.00029607},{"cluster":3,"n":35,"win_rate_raw":0.48571429,"ev_raw":0.00068254,"win_rate_shrunk":0.48480213,"ev_shrunk":-0.0002044,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":4,"n":30,"win_rate_raw":0.46666667,"ev_raw":-0.00151484,"win_rate_shrunk":0.4809622,"ev_shrunk":-0.00067345,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":5,"n":30,"win_rate_raw":0.53333333,"ev_raw":0.00107087,"win_rate_shrunk":0.49429553,"ev_shrunk":-0.0001563,"ev_half_a":0.0014765,"ev_half_b":0.00071595,"consistency":0.60739793,"prob_delta":0.00592787,"ev_delta":-9.494e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}