{"fold_id":"spy_202403","symbol":"SPY","test_start_utc":"2024-03-01 00:00:00+00:00","test_end_utc":"2024-04-01 00:00:00+00:00","n_train":459,"n_test":13,"n_trades_test":9,"policy_score_test":10.67648835,"best_params":{"mix_struct_weight":0.55,"p_cut":0.54,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.2,"ev_cut":-0.00014854,"agg_ev_cut":5.146e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.54,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.2,"ev_cut":-0.00014854,"agg_ev_cut":5.146e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00867928,"b_sl":0.00650946,"beta_proxy":0.69876261,"cost_rt":0.00076893,"dist_to_hi":-0.00489352,"ema_fast_slope":0.00047265,"entry_overnight":0.0,"gap_mu":5.737e-05,"gap_sd":0.00761161,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.6261705,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00059933,"qqq_pullback_z":0.56778045,"qqq_range_ratio":0.00544692,"qqq_sigma":0.00455407,"qqq_trend_score":1.98913928,"qqq_u_atr":0.0059682,"qqq_vol_z":-0.16413948,"range_ratio":0.00379143,"regime_agree":1.0,"ret_spread":-0.00011086,"rs_log":0.21354816,"same_bar_ambiguous":0.0,"sigma":0.00334823,"sigma_prank":0.302,"slip_half":0.00025447,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":11.10831818,"trend_score":2.05383247,"truncated_horizon":0.0,"u_atr":0.00430389,"u_atr_prank":0.336,"vol_z":-0.3607836},"mu":[11.81074169,0.00977905,0.00731297,0.70369321,0.00084979,-0.00943947,0.00052058,0.09462916,0.00011574,0.00935177,7.44757033,7.00511509,0.06382353,0.49038774,0.0,0.00055894,0.42716121,0.00612661,0.00496858,2.12946868,0.00653804,-0.15749675,0.00435278,0.92071611,2.203e-05,0.22848921,0.00255754,0.00384012,0.35732992,0.0002949,8e-05,6.84143223,11.11773909,2.27240988,0.0,0.00484688,0.36499744,-0.25892326],"sd":[0.58540406,0.00515694,0.00386047,0.11713869,0.00027285,0.01635515,0.00133887,0.29270203,0.00101046,0.00570125,6.13002238,3.9355387,0.01218032,1.10263205,1.0,0.00167312,1.12975358,0.00339576,0.00226195,1.63619254,0.00263564,0.98873434,0.00268855,0.27018133,0.00220671,0.05348089,0.05050746,0.00223856,0.27857587,0.00013642,1.0,3.70738145,2.90762307,1.43144893,1.0,0.00256669,0.25989228,0.90765223],"beta":[0.4859335,-0.01005372,0.00278832,0.00183635,0.00556273,-0.0416955,0.04969815,-0.01167236,0.01005372,-0.050486,0.01634233,-0.03623965,0.06909528,0.01299215,0.02159906,0.0,-0.1319513,0.08992429,-0.07445987,0.07922424,-0.05051787,0.00925224,-0.00672916,0.04768629,-0.02331716,-0.00562029,-0.07211777,-0.02348292,0.04925753,0.02525063,-0.0416955,0.0,0.04651536,-0.00970707,0.02235555,0.0,-7.823e-05,-0.05183483,0.00861946],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00867928,"b_sl":0.00650946,"beta_proxy":0.69876261,"cost_rt":0.00076893,"dist_to_hi":-0.00489352,"ema_fast_slope":0.00047265,"entry_overnight":0.0,"gap_mu":5.737e-05,"gap_sd":0.00761161,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.6261705,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00059933,"qqq_pullback_z":0.56778045,"qqq_range_ratio":0.00544692,"qqq_sigma":0.00455407,"qqq_trend_score":1.98913928,"qqq_u_atr":0.0059682,"qqq_vol_z":-0.16413948,"range_ratio":0.00379143,"regime_agree":1.0,"ret_spread":-0.00011086,"rs_log":0.21354816,"same_bar_ambiguous":0.0,"sigma":0.00334823,"sigma_prank":0.302,"slip_half":0.00025447,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":11.10831818,"trend_score":2.05383247,"truncated_horizon":0.0,"u_atr":0.00430389,"u_atr_prank":0.336,"vol_z":-0.3607836},"mu":[11.81074169,0.00977905,0.00731297,0.70369321,0.00084979,-0.00943947,0.00052058,0.09462916,0.00011574,0.00935177,7.44757033,7.00511509,0.06382353,0.49038774,0.0,0.00055894,0.42716121,0.00612661,0.00496858,2.12946868,0.00653804,-0.15749675,0.00435278,0.92071611,2.203e-05,0.22848921,0.00255754,0.00384012,0.35732992,0.0002949,8e-05,6.84143223,11.11773909,2.27240988,0.0,0.00484688,0.36499744,-0.25892326],"sd":[0.58540406,0.00515694,0.00386047,0.11713869,0.00027285,0.01635515,0.00133887,0.29270203,0.00101046,0.00570125,6.13002238,3.9355387,0.01218032,1.10263205,1.0,0.00167312,1.12975358,0.00339576,0.00226195,1.63619254,0.00263564,0.98873434,0.00268855,0.27018133,0.00220671,0.05348089,0.05050746,0.00223856,0.27857587,0.00013642,1.0,3.70738145,2.90762307,1.43144893,1.0,0.00256669,0.25989228,0.90765223],"beta":[-0.00041646,-0.00023301,6.089e-05,0.00025345,0.00024767,-0.00069394,0.00238402,-0.0012833,0.00023301,-0.00079648,-0.0003767,-0.00075767,0.0005311,0.00018191,0.00013235,0.0,-0.00063179,0.00098861,-0.00134766,0.00168301,-0.00117198,-5.03e-06,-7.183e-05,0.00120755,-0.00066748,0.00027182,-0.00225885,-0.00031819,0.00167176,-0.00034383,-0.00069394,0.0,0.00077945,0.00046853,0.00040024,0.0,0.00064008,-0.00095793,-0.00068108],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202403_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202403_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202403_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202403_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.27975835,0.3604682,0.36064525,0.57908476,0.57909351,0.68193329,0.70034943,0.71372788,0.72069305,0.80774677],"y_thresholds":[0.0,0.0,0.47058824,0.47058824,0.57142857,0.57142857,0.66666667,0.66666667,0.71428571,0.71428571]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.03823529,0.05121955,0.08024904,0.21666667,0.22161368,0.44068276,0.44285714,0.99987],"y_thresholds":[0.3,0.3,0.35714286,0.35714286,0.62962963,0.62962963,0.64705882,0.64705882]},"uncertainty_calibration":{"u_q25":0.00877576,"u_q75":0.01320438},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.40157036,"max_abs_z":1.14223588,"top_shift_features":[{"feature":"rs_log","abs_z":1.14223588},{"feature":"regime_agree","abs_z":1.13886897},{"feature":"qqq_trend_score","abs_z":0.86564196},{"feature":"u_atr_prank","abs_z":0.82789023},{"feature":"gap_sd","abs_z":0.7975486}]},"performance_drift":{"mean_abs_z":0.40157036,"recent_median_net_bps":42.86230733,"recent_median_calmar":-5.29773943}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.4859335,"global_ev":-0.00041646,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":70,"win_rate_raw":0.47142857,"ev_raw":-0.00101915,"win_rate_shrunk":0.48058958,"ev_shrunk":-0.0006385,"ev_half_a":-0.00023773,"ev_half_b":-0.00194708,"consistency":0.57266185,"prob_delta":-0.00306026,"ev_delta":-0.00036564},{"cluster":1,"n":100,"win_rate_raw":0.43,"ev_raw":-0.00115927,"win_rate_shrunk":0.46050918,"ev_shrunk":-0.0007541,"ev_half_a":-0.00038406,"ev_half_b":-0.00150755,"consistency":0.71912734,"prob_delta":-0.01828332,"ev_delta":-0.00054229},{"cluster":2,"n":38,"win_rate_raw":0.42105263,"ev_raw":-0.00232528,"win_rate_shrunk":0.47032924,"ev_shrunk":-0.00087554,"ev_half_a":0.00128073,"ev_half_b":-0.00494783,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":3,"n":33,"win_rate_raw":0.48484848,"ev_raw":0.00022934,"win_rate_shrunk":0.48569948,"ev_shrunk":-0.00027717,"ev_half_a":0.00182964,"ev_half_b":-0.00194251,"consistency":0.01174817,"prob_delta":-2.75e-06,"ev_delta":-3.26e-06},{"cluster":4,"n":31,"win_rate_raw":0.5483871,"ev_raw":0.0014191,"win_rate_shrunk":0.4987551,"ev_shrunk":-3.962e-05,"ev_half_a":0.00081498,"ev_half_b":0.00215268,"consistency":0.51581992,"prob_delta":0.00661364,"ev_delta":-2.044e-05},{"cluster":5,"n":119,"win_rate_raw":0.54621849,"ev_raw":0.00051457,"win_rate_shrunk":0.51594988,"ev_shrunk":4.711e-05,"ev_half_a":0.00046172,"ev_half_b":0.00060147,"consistency":0.96506123,"prob_delta":0.02896764,"ev_delta":4.546e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}