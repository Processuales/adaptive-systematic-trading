{"fold_id":"spy_202405","symbol":"SPY","test_start_utc":"2024-05-01 00:00:00+00:00","test_end_utc":"2024-06-01 00:00:00+00:00","n_train":467,"n_test":15,"n_trades_test":11,"policy_score_test":-2.47633163,"best_params":{"mix_struct_weight":0.55,"p_cut":0.54,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.2,"ev_cut":-0.00014854,"agg_ev_cut":5.146e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.54,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.2,"ev_cut":-0.00014854,"agg_ev_cut":5.146e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00845718,"b_sl":0.00634288,"beta_proxy":0.69475158,"cost_rt":0.00076341,"dist_to_hi":-0.00472548,"ema_fast_slope":0.00046052,"entry_overnight":0.0,"gap_mu":0.00015568,"gap_sd":0.00731824,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.61953958,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00053882,"qqq_pullback_z":0.56240082,"qqq_range_ratio":0.00523718,"qqq_sigma":0.00446884,"qqq_trend_score":1.89540529,"qqq_u_atr":0.00586979,"qqq_vol_z":-0.13876675,"range_ratio":0.00357034,"regime_agree":1.0,"ret_spread":-0.00018913,"rs_log":0.20504093,"same_bar_ambiguous":0.0,"sigma":0.00328735,"sigma_prank":0.302,"slip_half":0.0002517,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.90594489,"trend_score":2.03749729,"truncated_horizon":0.0,"u_atr":0.00421105,"u_atr_prank":0.336,"vol_z":-0.2988509},"mu":[11.80352645,0.00913697,0.00683063,0.69201743,0.00082587,-0.00835026,0.00048933,0.09823678,0.00018009,0.00880438,6.76070529,6.95717884,0.06371537,0.49741071,0.0,0.00053251,0.42916844,0.00596534,0.0047319,2.10144566,0.00628508,-0.12332179,0.00412796,0.91939547,-3.032e-05,0.22381604,0.00251889,0.00354235,0.36148615,0.00028294,8e-05,6.79345088,10.87249117,2.25954613,0.0,0.00452429,0.36826196,-0.22617333],"sd":[0.59526905,0.00376425,0.00280973,0.10575126,0.00023287,0.0118676,0.00119183,0.29763453,0.00093483,0.00540533,5.91762662,3.91993935,0.01211769,1.11219802,1.0,0.00159206,1.13238405,0.0033047,0.00189278,1.64143852,0.00227356,1.00001354,0.0023846,0.27222682,0.00224188,0.05260999,0.05012531,0.00158448,0.28541814,0.00011644,1.0,3.68981953,2.72469972,1.43033529,1.0,0.0018589,0.2660136,0.91587094],"beta":[0.47858942,-0.00493617,0.01890173,0.01836912,0.00038456,-0.04868006,-0.00353192,0.07978042,0.00493617,-0.02923969,0.02144213,-0.0258874,0.07846899,0.01382436,-0.02951418,0.0,-0.15467694,0.10377567,-0.09444735,0.05400034,-0.04564547,0.04480158,0.01398856,0.05987824,-0.02451716,-0.00409463,-0.05856441,-0.02150912,0.01511944,-0.00338827,-0.04868006,0.0,0.04229862,-0.07240172,0.02624107,0.0,0.01725407,-0.04916856,0.00381463],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00845718,"b_sl":0.00634288,"beta_proxy":0.69475158,"cost_rt":0.00076341,"dist_to_hi":-0.00472548,"ema_fast_slope":0.00046052,"entry_overnight":0.0,"gap_mu":0.00015568,"gap_sd":0.00731824,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.61953958,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00053882,"qqq_pullback_z":0.56240082,"qqq_range_ratio":0.00523718,"qqq_sigma":0.00446884,"qqq_trend_score":1.89540529,"qqq_u_atr":0.00586979,"qqq_vol_z":-0.13876675,"range_ratio":0.00357034,"regime_agree":1.0,"ret_spread":-0.00018913,"rs_log":0.20504093,"same_bar_ambiguous":0.0,"sigma":0.00328735,"sigma_prank":0.302,"slip_half":0.0002517,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.90594489,"trend_score":2.03749729,"truncated_horizon":0.0,"u_atr":0.00421105,"u_atr_prank":0.336,"vol_z":-0.2988509},"mu":[11.80352645,0.00913697,0.00683063,0.69201743,0.00082587,-0.00835026,0.00048933,0.09823678,0.00018009,0.00880438,6.76070529,6.95717884,0.06371537,0.49741071,0.0,0.00053251,0.42916844,0.00596534,0.0047319,2.10144566,0.00628508,-0.12332179,0.00412796,0.91939547,-3.032e-05,0.22381604,0.00251889,0.00354235,0.36148615,0.00028294,8e-05,6.79345088,10.87249117,2.25954613,0.0,0.00452429,0.36826196,-0.22617333],"sd":[0.59526905,0.00376425,0.00280973,0.10575126,0.00023287,0.0118676,0.00119183,0.29763453,0.00093483,0.00540533,5.91762662,3.91993935,0.01211769,1.11219802,1.0,0.00159206,1.13238405,0.0033047,0.00189278,1.64143852,0.00227356,1.00001354,0.0023846,0.27222682,0.00224188,0.05260999,0.05012531,0.00158448,0.28541814,0.00011644,1.0,3.68981953,2.72469972,1.43033529,1.0,0.0018589,0.2660136,0.91587094],"beta":[-0.00066055,-0.00012763,-0.00026988,-1.405e-05,0.00044483,-0.00064598,0.00056743,0.001244,0.00012763,-0.00032424,-1.778e-05,-0.00066738,0.00060962,0.00026425,-0.00071667,0.0,-0.00121281,0.00095905,-0.00172299,0.00122161,-0.00075082,0.00124421,0.00020017,0.00153623,-0.00064567,0.00022672,-0.0017172,-0.00025867,-0.00015337,-0.00031698,-0.00064598,0.0,0.00085646,-0.00026994,0.00034425,0.0,0.00050404,-0.00097106,-0.00063083],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202405_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202405_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202405_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202405_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.27780244,0.30995865,0.31111126,0.32349071,0.3290533,0.48644235,0.48804251,0.59286919,0.59698021,0.75281869,0.76209437],"y_thresholds":[0.0,0.0,0.5,0.5,0.60869565,0.60869565,0.63157895,0.63157895,0.7,0.7,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.10195667,0.98173969,0.99987],"y_thresholds":[0.0,0.60294118,0.60294118,1.0]},"uncertainty_calibration":{"u_q25":0.00908822,"u_q75":0.01309185},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.45523757,"max_abs_z":1.06623054,"top_shift_features":[{"feature":"qqq_u_atr","abs_z":1.06623054},{"feature":"tp_to_cost","abs_z":1.06498527},{"feature":"rs_log","abs_z":1.02265088},{"feature":"u_atr","abs_z":0.91123109},{"feature":"b_sl","abs_z":0.90586648}]},"performance_drift":{"mean_abs_z":0.45523757,"recent_median_net_bps":8.98341335,"recent_median_calmar":2.34052642}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.47858942,"global_ev":-0.00066055,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":35,"win_rate_raw":0.45714286,"ev_raw":-0.00168664,"win_rate_shrunk":0.47374665,"ev_shrunk":-0.00089225,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":1,"n":132,"win_rate_raw":0.53030303,"ev_raw":0.00031489,"win_rate_shrunk":0.5056775,"ev_shrunk":-0.00014961,"ev_half_a":0.00042732,"ev_half_b":9.752e-05,"consistency":0.91755075,"prob_delta":0.02485469,"ev_delta":-0.00013727},{"cluster":2,"n":73,"win_rate_raw":0.42465753,"ev_raw":-0.00153048,"win_rate_shrunk":0.45819031,"ev_shrunk":-0.00098959,"ev_half_a":-0.00144278,"ev_half_b":-0.00166354,"consistency":0.94481091,"prob_delta":-0.0192733,"ev_delta":-0.00093498},{"cluster":3,"n":95,"win_rate_raw":0.43157895,"ev_raw":-0.00108026,"win_rate_shrunk":0.45781735,"ev_shrunk":-0.000846,"ev_half_a":-0.00011679,"ev_half_b":-0.0014829,"consistency":0.65847327,"prob_delta":-0.01367785,"ev_delta":-0.00055707},{"cluster":4,"n":33,"win_rate_raw":0.48484848,"ev_raw":-0.00188294,"win_rate_shrunk":0.47993941,"ev_shrunk":-0.00092421,"ev_half_a":0.00085294,"ev_half_b":-0.00389886,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":5,"n":29,"win_rate_raw":0.55172414,"ev_raw":0.0010936,"win_rate_shrunk":0.49282369,"ev_shrunk":-0.00031914,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}