{"fold_id":"spy_202406","symbol":"SPY","test_start_utc":"2024-06-01 00:00:00+00:00","test_end_utc":"2024-07-01 00:00:00+00:00","n_train":467,"n_test":12,"n_trades_test":10,"policy_score_test":49.44230214,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00077585,"agg_ev_cut":-0.00057585,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00077585,"agg_ev_cut":-0.00057585,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00817219,"b_sl":0.00612914,"beta_proxy":0.69475158,"cost_rt":0.00075818,"dist_to_hi":-0.00451761,"ema_fast_slope":0.00044953,"entry_overnight":0.0,"gap_mu":0.00022443,"gap_sd":0.00722225,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.61953958,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050409,"qqq_pullback_z":0.56240082,"qqq_range_ratio":0.00510955,"qqq_sigma":0.00434869,"qqq_trend_score":2.00546529,"qqq_u_atr":0.00573718,"qqq_vol_z":-0.12554893,"range_ratio":0.00345884,"regime_agree":1.0,"ret_spread":-0.00023156,"rs_log":0.19881127,"same_bar_ambiguous":0.0,"sigma":0.00316355,"sigma_prank":0.298,"slip_half":0.00024909,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.74382195,"trend_score":2.09610902,"truncated_horizon":0.0,"u_atr":0.00407459,"u_atr_prank":0.328,"vol_z":-0.27152451},"mu":[11.7884131,0.00886845,0.00662844,0.68433147,0.00081816,-0.00811788,0.00048165,0.10579345,0.00024661,0.00820467,6.13602015,6.99244332,0.06367758,0.50346251,0.0,0.00053411,0.43914911,0.00584475,0.00462569,2.15327146,0.00616877,-0.0996044,0.00398832,0.91939547,-7.411e-05,0.21974744,0.00251889,0.00342239,0.36120907,0.00027908,8e-05,6.82367758,10.6826844,2.33104234,0.0,0.00438844,0.36581864,-0.20574965],"sd":[0.61514615,0.00363409,0.00271181,0.09287474,0.00023168,0.01179373,0.00114603,0.30757308,0.00087384,0.00492544,5.51541346,3.93619685,0.01216809,1.10532062,1.0,0.00156557,1.12632258,0.00323201,0.00187536,1.67749923,0.00227842,1.00173773,0.00225978,0.27222682,0.00222695,0.05301647,0.05012531,0.00151146,0.29228744,0.00011584,1.0,3.70092828,2.7124677,1.45905959,1.0,0.00179334,0.27118801,0.92963223],"beta":[0.4861461,-0.01337179,0.02153928,0.02483971,0.00971782,-0.06789224,-0.01120219,0.07272257,0.01337179,-0.02805615,0.02015557,-0.0302909,0.05216903,0.01449182,-0.03608986,0.0,-0.14237146,0.10807648,-0.10687772,0.06394534,-0.05273122,0.04061073,0.03058612,0.06811817,-0.02226089,0.00064137,-0.06782512,-0.02099284,0.03657999,-0.01870363,-0.06789224,0.0,0.05745771,-0.10293087,0.02788505,0.0,0.03147509,-0.04708226,0.00133187],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00817219,"b_sl":0.00612914,"beta_proxy":0.69475158,"cost_rt":0.00075818,"dist_to_hi":-0.00451761,"ema_fast_slope":0.00044953,"entry_overnight":0.0,"gap_mu":0.00022443,"gap_sd":0.00722225,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.61953958,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050409,"qqq_pullback_z":0.56240082,"qqq_range_ratio":0.00510955,"qqq_sigma":0.00434869,"qqq_trend_score":2.00546529,"qqq_u_atr":0.00573718,"qqq_vol_z":-0.12554893,"range_ratio":0.00345884,"regime_agree":1.0,"ret_spread":-0.00023156,"rs_log":0.19881127,"same_bar_ambiguous":0.0,"sigma":0.00316355,"sigma_prank":0.298,"slip_half":0.00024909,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.74382195,"trend_score":2.09610902,"truncated_horizon":0.0,"u_atr":0.00407459,"u_atr_prank":0.328,"vol_z":-0.27152451},"mu":[11.7884131,0.00886845,0.00662844,0.68433147,0.00081816,-0.00811788,0.00048165,0.10579345,0.00024661,0.00820467,6.13602015,6.99244332,0.06367758,0.50346251,0.0,0.00053411,0.43914911,0.00584475,0.00462569,2.15327146,0.00616877,-0.0996044,0.00398832,0.91939547,-7.411e-05,0.21974744,0.00251889,0.00342239,0.36120907,0.00027908,8e-05,6.82367758,10.6826844,2.33104234,0.0,0.00438844,0.36581864,-0.20574965],"sd":[0.61514615,0.00363409,0.00271181,0.09287474,0.00023168,0.01179373,0.00114603,0.30757308,0.00087384,0.00492544,5.51541346,3.93619685,0.01216809,1.10532062,1.0,0.00156557,1.12632258,0.00323201,0.00187536,1.67749923,0.00227842,1.00173773,0.00225978,0.27222682,0.00222695,0.05301647,0.05012531,0.00151146,0.29228744,0.00011584,1.0,3.70092828,2.7124677,1.45905959,1.0,0.00179334,0.27118801,0.92963223],"beta":[-0.0005037,-0.00030358,-0.00047864,-0.00014202,0.00065195,-0.00078902,0.0003659,0.00091951,0.00030358,-0.00030732,-0.00011122,-0.00081541,0.00040988,0.00025541,-0.00076091,0.0,-0.00087903,0.00120281,-0.00195165,0.00150806,-0.0008355,0.00128756,0.00052988,0.00164057,-0.00063304,0.00040149,-0.00196544,-0.00021937,0.00015209,-0.00050112,-0.00078902,0.0,0.00089649,-0.00035711,0.0003467,0.0,0.00054042,-0.0010194,-0.00053468],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202406_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202406_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202406_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202406_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.21365535,0.29071359,0.30644451,0.3480765,0.35728925,0.79966899,0.80966422,0.85420871],"y_thresholds":[0.2,0.2,0.57142857,0.57142857,0.62,0.62,0.66666667,0.66666667]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.09285714,0.13166176,0.72480983],"y_thresholds":[0.5,0.55882353,0.55882353]},"uncertainty_calibration":{"u_q25":0.0089742,"u_q75":0.01379351},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":1.07953822,"policy_score":1.29737623,"brier":0.25753644,"rmse":0.01234284,"n_val":67},{"cfg_name":"tree_heavy","inner_split":2,"score":-2.21285286,"policy_score":-1.97944965,"brier":0.28025564,"rmse":0.01160574,"n_val":67},{"cfg_name":"tree_stable","inner_split":1,"score":0.65515141,"policy_score":0.87307909,"brier":0.25811214,"rmse":0.01217179,"n_val":67},{"cfg_name":"tree_stable","inner_split":2,"score":-4.01570148,"policy_score":-3.81169283,"brier":0.24200348,"rmse":0.01125302,"n_val":67},{"cfg_name":"blend_conservative","inner_split":1,"score":-0.37207331,"policy_score":-0.15382951,"brier":0.25864903,"rmse":0.01212852,"n_val":67},{"cfg_name":"blend_conservative","inner_split":2,"score":-1.62186361,"policy_score":-1.40038053,"brier":0.26583219,"rmse":0.01105447,"n_val":67},{"selected_cfg":"tree_heavy","nested_score":-0.56665732}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.35825962,"max_abs_z":1.40781565,"top_shift_features":[{"feature":"rs_log","abs_z":1.40781565},{"feature":"qqq_sigma","abs_z":0.79900195},{"feature":"sigma","abs_z":0.79039566},{"feature":"qqq_u_atr","abs_z":0.76793485},{"feature":"u_atr","abs_z":0.69677091}]},"performance_drift":{"mean_abs_z":0.35825962,"recent_median_net_bps":1.90848149,"recent_median_calmar":-3.19633163}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.4861461,"global_ev":-0.0005037,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":31,"win_rate_raw":0.4516129,"ev_raw":-0.00179201,"win_rate_shrunk":0.4790565,"ev_shrunk":-0.00076818,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":1,"n":133,"win_rate_raw":0.54135338,"ev_raw":0.00052182,"win_rate_shrunk":0.51516811,"ev_shrunk":3.541e-05,"ev_half_a":0.00054402,"ev_half_b":0.00047203,"consistency":0.98200248,"prob_delta":0.02849969,"ev_delta":3.477e-05},{"cluster":2,"n":27,"win_rate_raw":0.51851852,"ev_raw":0.00032468,"win_rate_shrunk":0.49209205,"ev_shrunk":-0.00035154,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":3,"n":94,"win_rate_raw":0.43617021,"ev_raw":-0.00112478,"win_rate_shrunk":0.46419407,"ev_shrunk":-0.00077651,"ev_half_a":-0.0012477,"ev_half_b":-0.00108497,"consistency":0.95931531,"prob_delta":-0.02105891,"ev_delta":-0.00074492},{"cluster":4,"n":37,"win_rate_raw":0.51351351,"ev_raw":-0.00066168,"win_rate_shrunk":0.49259574,"ev_shrunk":-0.00054093,"ev_half_a":0.00163231,"ev_half_b":-0.00283493,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":5,"n":75,"win_rate_raw":0.44,"ev_raw":-0.00123162,"win_rate_shrunk":0.4683976,"ev_shrunk":-0.00078367,"ev_half_a":-0.00113473,"ev_half_b":-0.00137696,"consistency":0.93944276,"prob_delta":-0.0166737,"ev_delta":-0.00073621}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}