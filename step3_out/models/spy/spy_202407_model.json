{"fold_id":"spy_202407","symbol":"SPY","test_start_utc":"2024-07-01 00:00:00+00:00","test_end_utc":"2024-08-01 00:00:00+00:00","n_train":470,"n_test":11,"n_trades_test":5,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00077585,"agg_ev_cut":-0.00057585,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00077585,"agg_ev_cut":-0.00057585,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00799461,"b_sl":0.00593733,"beta_proxy":0.69508183,"cost_rt":0.00075065,"dist_to_hi":-0.00442053,"ema_fast_slope":0.0004503,"entry_overnight":0.0,"gap_mu":0.00029969,"gap_sd":0.00694051,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.62954347,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00051475,"qqq_pullback_z":0.56509064,"qqq_range_ratio":0.005067,"qqq_sigma":0.00415943,"qqq_trend_score":1.99730228,"qqq_u_atr":0.00563276,"qqq_vol_z":-0.12427405,"range_ratio":0.00333023,"regime_agree":1.0,"ret_spread":-0.00023259,"rs_log":0.19561164,"same_bar_ambiguous":0.0,"sigma":0.00308232,"sigma_prank":0.3,"slip_half":0.00024533,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.59516361,"trend_score":2.09033235,"truncated_horizon":0.0,"u_atr":0.00395822,"u_atr_prank":0.331,"vol_z":-0.28120924},"mu":[11.78,0.0087072,0.00650683,0.68135664,0.00081235,-0.00791953,0.00048096,0.11,0.00028,0.00778443,5.74,6.9825,0.0631125,0.5164247,0.0,0.00053457,0.44999986,0.00578044,0.00457733,2.16018047,0.00609357,-0.10562651,0.00392967,0.9125,-8.775e-05,0.21669897,0.0025,0.00335351,0.36227,0.00027618,8e-05,6.8125,10.5649522,2.3296572,0.0,0.00430647,0.366785,-0.20583776],"sd":[0.62577951,0.00359998,0.0026855,0.08888214,0.00023178,0.01157461,0.00109727,0.31288976,0.00084802,0.00451385,5.220862,3.90540571,0.01260951,1.09948181,1.0,0.00155421,1.12865626,0.00322681,0.00188795,1.7066575,0.00228708,1.00962243,0.00225852,0.28256636,0.00220979,0.05325007,0.04993746,0.00149338,0.29154973,0.00011589,1.0,3.66706201,2.69701082,1.45943656,1.0,0.00177489,0.27095054,0.94267818],"beta":[0.49,-0.01686434,0.01873258,0.02334095,0.01218876,-0.07152311,-0.01467908,0.05434172,0.01686434,-0.02964026,0.01563528,-0.03400568,0.05458705,0.01363957,-0.04397903,0.0,-0.11996651,0.11074691,-0.09358258,0.05997,-0.04671798,0.04616595,0.02730756,0.05969077,-0.03490026,0.00178568,-0.07324285,-0.02181154,0.0524562,-0.02264699,-0.07152311,0.0,0.06022691,-0.11102354,0.02448434,0.0,0.03263695,-0.04899199,0.00179587],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00799461,"b_sl":0.00593733,"beta_proxy":0.69508183,"cost_rt":0.00075065,"dist_to_hi":-0.00442053,"ema_fast_slope":0.0004503,"entry_overnight":0.0,"gap_mu":0.00029969,"gap_sd":0.00694051,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.62954347,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00051475,"qqq_pullback_z":0.56509064,"qqq_range_ratio":0.005067,"qqq_sigma":0.00415943,"qqq_trend_score":1.99730228,"qqq_u_atr":0.00563276,"qqq_vol_z":-0.12427405,"range_ratio":0.00333023,"regime_agree":1.0,"ret_spread":-0.00023259,"rs_log":0.19561164,"same_bar_ambiguous":0.0,"sigma":0.00308232,"sigma_prank":0.3,"slip_half":0.00024533,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.59516361,"trend_score":2.09033235,"truncated_horizon":0.0,"u_atr":0.00395822,"u_atr_prank":0.331,"vol_z":-0.28120924},"mu":[11.78,0.0087072,0.00650683,0.68135664,0.00081235,-0.00791953,0.00048096,0.11,0.00028,0.00778443,5.74,6.9825,0.0631125,0.5164247,0.0,0.00053457,0.44999986,0.00578044,0.00457733,2.16018047,0.00609357,-0.10562651,0.00392967,0.9125,-8.775e-05,0.21669897,0.0025,0.00335351,0.36227,0.00027618,8e-05,6.8125,10.5649522,2.3296572,0.0,0.00430647,0.366785,-0.20583776],"sd":[0.62577951,0.00359998,0.0026855,0.08888214,0.00023178,0.01157461,0.00109727,0.31288976,0.00084802,0.00451385,5.220862,3.90540571,0.01260951,1.09948181,1.0,0.00155421,1.12865626,0.00322681,0.00188795,1.7066575,0.00228708,1.00962243,0.00225852,0.28256636,0.00220979,0.05325007,0.04993746,0.00149338,0.29154973,0.00011589,1.0,3.66706201,2.69701082,1.45943656,1.0,0.00177489,0.27095054,0.94267818],"beta":[-0.00045348,-0.0003569,-0.00051365,-0.00015192,0.00052241,-0.00080215,0.00025643,0.0001591,0.0003569,-0.00024254,-0.00010661,-0.00074199,0.00049356,0.00031751,-0.00095272,0.0,-0.00019937,0.00145049,-0.00188825,0.00117257,-0.00077165,0.00107399,0.00082692,0.00158675,-0.0008077,0.00047965,-0.00182833,-0.00021517,0.00077401,-0.00055127,-0.00080215,0.0,0.0008521,-0.00040888,0.00043903,0.0,0.00058213,-0.00095477,-0.00075952],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202407_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202407_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202407_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202407_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.18477178,0.2308963,0.2391075,0.42351144,0.43619577,0.87168102,0.8818369],"y_thresholds":[0.25,0.25,0.5,0.5,0.53658537,0.53658537,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.00725969,0.64982532,0.99987],"y_thresholds":[0.5,0.50819672,0.50819672,1.0]},"uncertainty_calibration":{"u_q25":0.00928387,"u_q75":0.01327142},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.44574272,"max_abs_z":1.56124626,"top_shift_features":[{"feature":"rs_log","abs_z":1.56124626},{"feature":"intraday_tail_frac","abs_z":1.29643105},{"feature":"sigma","abs_z":0.90321942},{"feature":"beta_proxy","abs_z":0.90320145},{"feature":"gap_mu","abs_z":0.74956624}]},"performance_drift":{"mean_abs_z":0.44574272,"recent_median_net_bps":8.98341335,"recent_median_calmar":3.39123032}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49,"global_ev":-0.00045348,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":32,"win_rate_raw":0.59375,"ev_raw":0.001405,"win_rate_shrunk":0.51184211,"ev_shrunk":-6.222e-05,"ev_half_a":0.00042213,"ev_half_b":0.0028415,"consistency":0.31612689,"prob_delta":0.00690488,"ev_delta":-1.967e-05},{"cluster":1,"n":39,"win_rate_raw":0.53846154,"ev_raw":0.00037138,"win_rate_shrunk":0.50188679,"ev_shrunk":-0.00025116,"ev_half_a":0.00154844,"ev_half_b":-0.00036429,"consistency":0.1271934,"prob_delta":0.00151192,"ev_delta":-3.195e-05},{"cluster":2,"n":138,"win_rate_raw":0.54347826,"ev_raw":0.00051425,"win_rate_shrunk":0.51860465,"ev_shrunk":6.414e-05,"ev_half_a":0.00050653,"ev_half_b":0.00053074,"consistency":0.9939453,"prob_delta":0.02843146,"ev_delta":6.375e-05},{"cluster":3,"n":30,"win_rate_raw":0.43333333,"ev_raw":-0.00223377,"win_rate_shrunk":0.47866667,"ev_shrunk":-0.00080954,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":4,"n":74,"win_rate_raw":0.43243243,"ev_raw":-0.0013583,"win_rate_shrunk":0.46804124,"ev_shrunk":-0.00079862,"ev_half_a":-0.00076634,"ev_half_b":-0.00259155,"consistency":0.54369656,"prob_delta":-0.0119389,"ev_delta":-0.00043421},{"cluster":5,"n":87,"win_rate_raw":0.4137931,"ev_raw":-0.00165835,"win_rate_shrunk":0.45797101,"ev_shrunk":-0.00095988,"ev_half_a":-0.00119247,"ev_half_b":-0.00178853,"consistency":0.85098526,"prob_delta":-0.02725619,"ev_delta":-0.00081684}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}