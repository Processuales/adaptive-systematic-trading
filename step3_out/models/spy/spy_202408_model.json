{"fold_id":"spy_202408","symbol":"SPY","test_start_utc":"2024-08-01 00:00:00+00:00","test_end_utc":"2024-09-01 00:00:00+00:00","n_train":471,"n_test":13,"n_trades_test":3,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.54,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.00018245,"agg_ev_cut":1.755e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.54,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.00018245,"agg_ev_cut":1.755e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00771411,"b_sl":0.00578559,"beta_proxy":0.69217191,"cost_rt":0.00073706,"dist_to_hi":-0.0041819,"ema_fast_slope":0.00044914,"entry_overnight":0.0,"gap_mu":0.00033199,"gap_sd":0.00672028,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63800022,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050394,"qqq_pullback_z":0.5615169,"qqq_range_ratio":0.00497954,"qqq_sigma":0.00407929,"qqq_trend_score":1.96977678,"qqq_u_atr":0.00554614,"qqq_vol_z":-0.12139453,"range_ratio":0.0032826,"regime_agree":1.0,"ret_spread":-0.00023156,"rs_log":0.1927711,"same_bar_ambiguous":0.0,"sigma":0.00294759,"sigma_prank":0.306,"slip_half":0.00023853,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.43518855,"trend_score":2.10090384,"truncated_horizon":0.0,"u_atr":0.00384797,"u_atr_prank":0.336,"vol_z":-0.24518301},"mu":[11.78054863,0.00854206,0.00638325,0.6737339,0.00080522,-0.0077173,0.0004795,0.10972569,0.00031616,0.00718983,5.24688279,6.99501247,0.06281796,0.52142439,0.0,0.0005384,0.45345814,0.00564891,0.00450314,2.16499636,0.00598894,-0.1055062,0.0038389,0.91521197,-0.00010001,0.21453084,0.00249377,0.00328367,0.36663342,0.00027261,8e-05,6.82044888,10.4555307,2.34898325,0.0,0.00422445,0.37157606,-0.19306189],"sd":[0.62509506,0.00356831,0.0026611,0.07851449,0.00023234,0.01150484,0.00108815,0.31254753,0.0008283,0.00370833,4.83455935,3.9117414,0.01281128,1.10267992,1.0,0.00153229,1.1279801,0.0031415,0.00188745,1.7047949,0.00226403,1.00420765,0.00222726,0.27856601,0.00216764,0.05478916,0.04987531,0.00148605,0.29017774,0.00011617,0.0,3.66865551,2.66346596,1.46789321,1.0,0.00175772,0.26932092,0.94074532],"beta":[0.49127182,-0.01492151,0.00619015,0.00565004,0.01689332,-0.05468981,-0.01671279,0.03376359,0.01492151,-0.02968197,0.02052395,-0.03064086,0.05198082,0.01649863,-0.03430362,0.0,-0.08699693,0.0902306,-0.06698776,0.05949756,-0.04266162,0.04107435,0.02080688,0.03520037,-0.03490141,0.00646184,-0.07113953,-0.02243231,0.05334429,-0.01813719,-0.05468981,0.0,0.06062385,-0.08362481,0.0218785,0.0,0.00454123,-0.048195,0.00491168],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00771411,"b_sl":0.00578559,"beta_proxy":0.69217191,"cost_rt":0.00073706,"dist_to_hi":-0.0041819,"ema_fast_slope":0.00044914,"entry_overnight":0.0,"gap_mu":0.00033199,"gap_sd":0.00672028,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63800022,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00050394,"qqq_pullback_z":0.5615169,"qqq_range_ratio":0.00497954,"qqq_sigma":0.00407929,"qqq_trend_score":1.96977678,"qqq_u_atr":0.00554614,"qqq_vol_z":-0.12139453,"range_ratio":0.0032826,"regime_agree":1.0,"ret_spread":-0.00023156,"rs_log":0.1927711,"same_bar_ambiguous":0.0,"sigma":0.00294759,"sigma_prank":0.306,"slip_half":0.00023853,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.43518855,"trend_score":2.10090384,"truncated_horizon":0.0,"u_atr":0.00384797,"u_atr_prank":0.336,"vol_z":-0.24518301},"mu":[11.78054863,0.00854206,0.00638325,0.6737339,0.00080522,-0.0077173,0.0004795,0.10972569,0.00031616,0.00718983,5.24688279,6.99501247,0.06281796,0.52142439,0.0,0.0005384,0.45345814,0.00564891,0.00450314,2.16499636,0.00598894,-0.1055062,0.0038389,0.91521197,-0.00010001,0.21453084,0.00249377,0.00328367,0.36663342,0.00027261,8e-05,6.82044888,10.4555307,2.34898325,0.0,0.00422445,0.37157606,-0.19306189],"sd":[0.62509506,0.00356831,0.0026611,0.07851449,0.00023234,0.01150484,0.00108815,0.31254753,0.0008283,0.00370833,4.83455935,3.9117414,0.01281128,1.10267992,1.0,0.00153229,1.1279801,0.0031415,0.00188745,1.7047949,0.00226403,1.00420765,0.00222726,0.27856601,0.00216764,0.05478916,0.04987531,0.00148605,0.29017774,0.00011617,0.0,3.66865551,2.66346596,1.46789321,1.0,0.00175772,0.26932092,0.94074532],"beta":[-0.00048566,-0.00039638,-0.00050187,-0.0002739,0.00035315,-0.00048959,0.00020783,-1.842e-05,0.00039638,-0.00015618,-9.335e-05,-0.00062359,0.00050032,0.00035401,-0.00083118,0.0,0.00024798,0.00121568,-0.00153861,0.0011962,-0.00061682,0.00057279,0.00066731,0.00117572,-0.00079646,0.00060436,-0.0015735,-0.00021699,0.00067655,-0.00051066,-0.00048959,0.0,0.00075208,-1.328e-05,0.00032483,0.0,0.00018948,-0.00093793,-0.00067126],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202408_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202408_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202408_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202408_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.26288684,0.43304849,0.43497688,0.72067462,0.7340498,0.74310437,0.74462201,0.8430925,0.86386643],"y_thresholds":[0.28571429,0.28571429,0.54545455,0.54545455,0.6,0.6,0.83333333,0.83333333,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.05909091,0.62857143,0.64833518,0.7833042,0.78333333,0.99987],"y_thresholds":[0.5,0.5,0.66666667,0.66666667,1.0,1.0]},"uncertainty_calibration":{"u_q25":0.00989974,"u_q75":0.01271103},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-2.17668136,"policy_score":-1.93699233,"brier":0.28604196,"rmse":0.01257878,"n_val":67},{"cfg_name":"tree_heavy","inner_split":2,"score":-1.17638988,"policy_score":-0.95625778,"brier":0.26785221,"rmse":0.00962147,"n_val":67},{"cfg_name":"tree_stable","inner_split":1,"score":-1.87941123,"policy_score":-1.64858848,"brier":0.27507737,"rmse":0.01225736,"n_val":67},{"cfg_name":"tree_stable","inner_split":2,"score":-1.42693144,"policy_score":-1.20385295,"brier":0.27246231,"rmse":0.00936588,"n_val":67},{"cfg_name":"blend_conservative","inner_split":1,"score":-2.93181729,"policy_score":-2.70436843,"brier":0.27157039,"rmse":0.01188553,"n_val":67},{"cfg_name":"blend_conservative","inner_split":2,"score":-1.0928619,"policy_score":-0.8858287,"brier":0.25221353,"rmse":0.00893653,"n_val":67},{"selected_cfg":"tree_stable","nested_score":-1.65317134}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.29053343,"max_abs_z":1.18465391,"top_shift_features":[{"feature":"u_atr_prank","abs_z":1.18465391},{"feature":"sigma_prank","abs_z":1.12430008},{"feature":"regime_agree","abs_z":1.01837298},{"feature":"intraday_tail_frac","abs_z":0.87612692},{"feature":"gap_tail","abs_z":0.86011273}]},"performance_drift":{"mean_abs_z":0.29053343,"recent_median_net_bps":14.63778174,"recent_median_calmar":9.97879228}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49127182,"global_ev":-0.00048566,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":17,"win_rate_raw":0.64705882,"ev_raw":0.00075984,"win_rate_shrunk":0.51060305,"ev_shrunk":-0.00033111,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":1,"n":31,"win_rate_raw":0.61290323,"ev_raw":0.0018452,"win_rate_shrunk":0.51624251,"ev_shrunk":-7.14e-06,"ev_half_a":0.00112565,"ev_half_b":0.0028415,"consistency":0.44255411,"prob_delta":0.01105088,"ev_delta":-3.16e-06},{"cluster":2,"n":82,"win_rate_raw":0.41463415,"ev_raw":-0.00132809,"win_rate_shrunk":0.46016148,"ev_shrunk":-0.00082764,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":3,"n":150,"win_rate_raw":0.55333333,"ev_raw":0.0005914,"win_rate_shrunk":0.52575044,"ev_shrunk":0.00011271,"ev_half_a":0.00046433,"ev_half_b":0.0007874,"consistency":0.91923264,"prob_delta":0.03169387,"ev_delta":0.0001036},{"cluster":4,"n":35,"win_rate_raw":0.42857143,"ev_raw":-0.00285139,"win_rate_shrunk":0.47711367,"ev_shrunk":-0.00101986,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":5,"n":86,"win_rate_raw":0.40697674,"ev_raw":-0.00168462,"win_rate_shrunk":0.45608067,"ev_shrunk":-0.0009862,"ev_half_a":-0.00203282,"ev_half_b":-0.00078511,"consistency":0.68807357,"prob_delta":-0.0242141,"ev_delta":-0.00067858}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}