{"fold_id":"spy_202409","symbol":"SPY","test_start_utc":"2024-09-01 00:00:00+00:00","test_end_utc":"2024-10-01 00:00:00+00:00","n_train":466,"n_test":8,"n_trades_test":5,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.54,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.00018245,"agg_ev_cut":1.755e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.54,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.35,"ev_cut":-0.00018245,"agg_ev_cut":1.755e-05,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_stable","ridge_alpha_prob":8.0,"ridge_alpha_ret":10.0,"tree_weight_prob":0.68,"tree_weight_ret":0.72,"num_leaves":23,"learning_rate":0.04,"min_child_samples":36,"n_estimators":260},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00771062,"b_sl":0.00577727,"beta_proxy":0.69239717,"cost_rt":0.0007367,"dist_to_hi":-0.00422273,"ema_fast_slope":0.00044914,"entry_overnight":0.0,"gap_mu":0.00035592,"gap_sd":0.00655075,"gap_tail":3.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63291644,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0005254,"qqq_pullback_z":0.56240082,"qqq_range_ratio":0.0049219,"qqq_sigma":0.00401291,"qqq_trend_score":1.96977678,"qqq_u_atr":0.00542147,"qqq_vol_z":-0.10538769,"range_ratio":0.00328248,"regime_agree":1.0,"ret_spread":-0.00018913,"rs_log":0.19054716,"same_bar_ambiguous":0.0,"sigma":0.00293633,"sigma_prank":0.326,"slip_half":0.00023835,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.41293529,"trend_score":2.10090384,"truncated_horizon":0.0,"u_atr":0.00381674,"u_atr_prank":0.35,"vol_z":-0.24005517},"mu":[11.78337531,0.00851644,0.00636444,0.67415365,0.00080444,-0.00777411,0.00047971,0.10831234,0.00034231,0.00672122,4.95465995,6.92947103,0.06308564,0.52035677,0.0,0.00054356,0.45860235,0.00562393,0.00448276,2.16493133,0.0059543,-0.10172191,0.00383322,0.91687657,-0.00010143,0.21338421,0.00251889,0.00327765,0.3754005,0.00027222,8e-05,6.76070529,10.42985927,2.35234096,0.0,0.00421243,0.37938539,-0.18640983],"sd":[0.62154897,0.00358645,0.00267489,0.07804211,0.0002334,0.01153172,0.00108865,0.31077448,0.00081873,0.00278146,4.65623925,3.88889305,0.01270624,1.1011198,1.0,0.00152616,1.12731462,0.00316867,0.00189766,1.70253261,0.00227405,1.00266747,0.00223555,0.27606869,0.00214913,0.05586593,0.05012531,0.00149336,0.28900847,0.0001167,1.0,3.64904563,2.67612925,1.47123081,1.0,0.00176709,0.2691878,0.9358998],"beta":[0.49118388,-0.01683817,0.00531636,0.00535942,0.01521339,-0.05532131,-0.01417753,0.01315926,0.01683817,-0.04174991,0.04993887,-0.02011323,0.05939526,0.01759731,-0.03002982,0.0,-0.06994519,0.09353349,-0.0640813,0.07079138,-0.04725342,0.00287499,0.01737653,0.04532921,-0.04947531,0.01295582,-0.08231966,-0.02638356,0.05271848,-0.02119902,-0.05532131,0.0,0.05438901,-0.08982235,0.02203172,0.0,0.00543541,-0.0255079,-0.00735904],"ridge_alpha":8.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00771062,"b_sl":0.00577727,"beta_proxy":0.69239717,"cost_rt":0.0007367,"dist_to_hi":-0.00422273,"ema_fast_slope":0.00044914,"entry_overnight":0.0,"gap_mu":0.00035592,"gap_sd":0.00655075,"gap_tail":3.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63291644,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0005254,"qqq_pullback_z":0.56240082,"qqq_range_ratio":0.0049219,"qqq_sigma":0.00401291,"qqq_trend_score":1.96977678,"qqq_u_atr":0.00542147,"qqq_vol_z":-0.10538769,"range_ratio":0.00328248,"regime_agree":1.0,"ret_spread":-0.00018913,"rs_log":0.19054716,"same_bar_ambiguous":0.0,"sigma":0.00293633,"sigma_prank":0.326,"slip_half":0.00023835,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.41293529,"trend_score":2.10090384,"truncated_horizon":0.0,"u_atr":0.00381674,"u_atr_prank":0.35,"vol_z":-0.24005517},"mu":[11.78337531,0.00851644,0.00636444,0.67415365,0.00080444,-0.00777411,0.00047971,0.10831234,0.00034231,0.00672122,4.95465995,6.92947103,0.06308564,0.52035677,0.0,0.00054356,0.45860235,0.00562393,0.00448276,2.16493133,0.0059543,-0.10172191,0.00383322,0.91687657,-0.00010143,0.21338421,0.00251889,0.00327765,0.3754005,0.00027222,8e-05,6.76070529,10.42985927,2.35234096,0.0,0.00421243,0.37938539,-0.18640983],"sd":[0.62154897,0.00358645,0.00267489,0.07804211,0.0002334,0.01153172,0.00108865,0.31077448,0.00081873,0.00278146,4.65623925,3.88889305,0.01270624,1.1011198,1.0,0.00152616,1.12731462,0.00316867,0.00189766,1.70253261,0.00227405,1.00266747,0.00223555,0.27606869,0.00214913,0.05586593,0.05012531,0.00149336,0.28900847,0.0001167,1.0,3.64904563,2.67612925,1.47123081,1.0,0.00176709,0.2691878,0.9358998],"beta":[-0.00045664,-0.00042402,-0.00053461,-0.00030578,0.00038462,-0.00048581,0.00021247,-0.00012772,0.00042402,-0.00025902,0.00029319,-0.00052171,0.00052306,0.00037621,-0.00083859,0.0,0.00031635,0.00128383,-0.00146064,0.0014994,-0.00063693,0.0001056,0.00051152,0.00136246,-0.00103467,0.00066056,-0.00166477,-0.00028622,0.00049933,-0.00051364,-0.00048581,0.0,0.00072795,-9.956e-05,0.00027259,0.0,0.0001593,-0.0007141,-0.00076698],"ridge_alpha":10.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202409_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202409_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202409_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202409_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.34382428,0.36308281,0.36721597,0.43358745,0.44864885,0.59808442,0.59859257,0.70163114,0.70242467,0.85758099],"y_thresholds":[0.4,0.4,0.42857143,0.42857143,0.55172414,0.55172414,0.5625,0.5625,0.66666667,0.66666667]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.06724138,0.44285714,0.48,0.56666667],"y_thresholds":[0.53448276,0.53448276,0.63636364,0.63636364]},"uncertainty_calibration":{"u_q25":0.00971484,"u_q75":0.01341296},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.2434471,"max_abs_z":0.79192729,"top_shift_features":[{"feature":"gap_tail","abs_z":0.79192729},{"feature":"gap_mu","abs_z":0.71591882},{"feature":"rs_log","abs_z":0.66032842},{"feature":"ret_spread","abs_z":0.57650536},{"feature":"hold_bars","abs_z":0.53808265}]},"performance_drift":{"mean_abs_z":0.2434471,"recent_median_net_bps":21.19398367,"recent_median_calmar":15.1401857}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49118388,"global_ev":-0.00045664,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":36,"win_rate_raw":0.5,"ev_raw":-0.00080809,"win_rate_shrunk":0.49321837,"ev_shrunk":-0.00053774,"ev_half_a":-0.00124953,"ev_half_b":-0.00045495,"consistency":0.72121903,"prob_delta":0.00146731,"ev_delta":-0.00038783},{"cluster":1,"n":76,"win_rate_raw":0.44736842,"ev_raw":-0.00103676,"win_rate_shrunk":0.47419421,"ev_shrunk":-0.00068158,"ev_half_a":0.00197709,"ev_half_b":-0.00177787,"consistency":0.01531468,"prob_delta":-0.00026019,"ev_delta":-1.044e-05},{"cluster":2,"n":30,"win_rate_raw":0.6,"ev_raw":0.0015395,"win_rate_shrunk":0.5129471,"ev_shrunk":-5.741e-05,"ev_half_a":-0.00030989,"ev_half_b":0.00395792,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":3,"n":81,"win_rate_raw":0.44444444,"ev_raw":-0.00115819,"win_rate_shrunk":0.47234858,"ev_shrunk":-0.00073935,"ev_half_a":-0.00148943,"ev_half_b":-0.00049572,"consistency":0.7515743,"prob_delta":-0.01415612,"ev_delta":-0.00055568},{"cluster":4,"n":30,"win_rate_raw":0.43333333,"ev_raw":-0.00223377,"win_rate_shrunk":0.47961377,"ev_shrunk":-0.00081206,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":5,"n":144,"win_rate_raw":0.52777778,"ev_raw":0.0002864,"win_rate_shrunk":0.51114419,"ev_shrunk":-5.135e-05,"ev_half_a":9.889e-05,"ev_half_b":0.00058105,"consistency":0.87946008,"prob_delta":0.01755429,"ev_delta":-4.516e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}