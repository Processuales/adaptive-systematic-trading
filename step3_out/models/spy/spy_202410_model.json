{"fold_id":"spy_202410","symbol":"SPY","test_start_utc":"2024-10-01 00:00:00+00:00","test_end_utc":"2024-11-01 00:00:00+00:00","n_train":468,"n_test":12,"n_trades_test":4,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":0.00106251,"agg_ev_cut":0.00126251,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":0.00106251,"agg_ev_cut":0.00126251,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00770069,"b_sl":0.00577286,"beta_proxy":0.69228454,"cost_rt":0.00073587,"dist_to_hi":-0.0043649,"ema_fast_slope":0.0004348,"entry_overnight":0.0,"gap_mu":0.00036216,"gap_sd":0.00631118,"gap_tail":3.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.62491169,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00049445,"qqq_pullback_z":0.550021,"qqq_range_ratio":0.00484285,"qqq_sigma":0.00401926,"qqq_trend_score":1.90656918,"qqq_u_atr":0.00538868,"qqq_vol_z":-0.12347173,"range_ratio":0.00326378,"regime_agree":1.0,"ret_spread":-0.00018782,"rs_log":0.19048121,"same_bar_ambiguous":0.0,"sigma":0.00294895,"sigma_prank":0.334,"slip_half":0.00023793,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.34463115,"trend_score":2.07453292,"truncated_horizon":0.0,"u_atr":0.00380945,"u_atr_prank":0.359,"vol_z":-0.28687601},"mu":[11.78894472,0.00847661,0.00633502,0.67732102,0.00080684,-0.0078122,0.00047289,0.10552764,0.00033847,0.00635199,4.87437186,6.99497487,0.06301508,0.49344615,0.0,0.00053435,0.43006506,0.00551391,0.00446846,2.1044975,0.00589906,-0.12383447,0.00377521,0.9120603,-9.862e-05,0.21250537,0.00251256,0.00328047,0.38540201,0.00027342,8e-05,6.82914573,10.35948409,2.30825037,0.0,0.00419342,0.3868995,-0.21528685],"sd":[0.61446418,0.00356814,0.00266068,0.0738399,0.00023571,0.01140449,0.00108421,0.30723209,0.00081284,0.0019077,4.6326671,3.87168239,0.01269391,1.08485979,1.0,0.00150893,1.10867341,0.00297005,0.00189403,1.68218341,0.00224261,0.9813979,0.00214168,0.28320718,0.00212884,0.0565357,0.05006246,0.00149055,0.29276007,0.00011785,1.0,3.63828812,2.65602774,1.44479006,1.0,0.00175694,0.27187857,0.91583789],"beta":[0.48994975,-0.01543997,0.00069911,0.00071712,0.01872328,-0.05831551,-0.01164639,0.0424357,0.01543997,-0.04010519,0.01686326,-0.0300207,0.07028884,0.01772777,-0.06480585,0.0,-0.09204608,0.10286224,-0.07955372,0.07019022,-0.04469075,0.03972692,0.01806594,0.05831428,-0.05243654,0.00979535,-0.08237641,-0.02767876,0.05796333,-0.0188163,-0.05831551,0.0,0.03399888,-0.08888613,0.02039013,0.0,0.00075217,-0.03140655,-0.00549054],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00770069,"b_sl":0.00577286,"beta_proxy":0.69228454,"cost_rt":0.00073587,"dist_to_hi":-0.0043649,"ema_fast_slope":0.0004348,"entry_overnight":0.0,"gap_mu":0.00036216,"gap_sd":0.00631118,"gap_tail":3.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.62491169,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00049445,"qqq_pullback_z":0.550021,"qqq_range_ratio":0.00484285,"qqq_sigma":0.00401926,"qqq_trend_score":1.90656918,"qqq_u_atr":0.00538868,"qqq_vol_z":-0.12347173,"range_ratio":0.00326378,"regime_agree":1.0,"ret_spread":-0.00018782,"rs_log":0.19048121,"same_bar_ambiguous":0.0,"sigma":0.00294895,"sigma_prank":0.334,"slip_half":0.00023793,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.34463115,"trend_score":2.07453292,"truncated_horizon":0.0,"u_atr":0.00380945,"u_atr_prank":0.359,"vol_z":-0.28687601},"mu":[11.78894472,0.00847661,0.00633502,0.67732102,0.00080684,-0.0078122,0.00047289,0.10552764,0.00033847,0.00635199,4.87437186,6.99497487,0.06301508,0.49344615,0.0,0.00053435,0.43006506,0.00551391,0.00446846,2.1044975,0.00589906,-0.12383447,0.00377521,0.9120603,-9.862e-05,0.21250537,0.00251256,0.00328047,0.38540201,0.00027342,8e-05,6.82914573,10.35948409,2.30825037,0.0,0.00419342,0.3868995,-0.21528685],"sd":[0.61446418,0.00356814,0.00266068,0.0738399,0.00023571,0.01140449,0.00108421,0.30723209,0.00081284,0.0019077,4.6326671,3.87168239,0.01269391,1.08485979,1.0,0.00150893,1.10867341,0.00297005,0.00189403,1.68218341,0.00224261,0.9813979,0.00214168,0.28320718,0.00212884,0.0565357,0.05006246,0.00149055,0.29276007,0.00011785,1.0,3.63828812,2.65602774,1.44479006,1.0,0.00175694,0.27187857,0.91583789],"beta":[-0.00038076,-0.00039686,-0.00070355,-0.00042551,0.00045553,-0.00052059,0.00021257,0.00023495,0.00039686,-0.00017142,-0.00030576,-0.0007838,0.00056614,0.00036912,-0.00118115,0.0,-7.826e-05,0.0012682,-0.00185063,0.00150451,-0.00063808,0.00079308,0.00055124,0.00169652,-0.00111224,0.00056221,-0.00164165,-0.00031136,0.00065076,-0.00042877,-0.00052059,0.0,0.00052783,0.00011992,0.00032515,0.0,0.00014008,-0.00086585,-0.00075867],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202410_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202410_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202410_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202410_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.24053325,0.32225055,0.33728788,0.36504868,0.36518802,0.3763208,0.38411953,0.54553712,0.54865988,0.59752253,0.60765388,0.8330654,0.885646],"y_thresholds":[0.375,0.375,0.4,0.4,0.5,0.5,0.52631579,0.52631579,0.54545455,0.54545455,0.63636364,0.63636364,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.1625,0.17727273,0.52727273,0.99987],"y_thresholds":[0.42857143,0.42857143,0.56363636,0.56363636,1.0]},"uncertainty_calibration":{"u_q25":0.00975392,"u_q75":0.01586416},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-4.30234697,"policy_score":-4.07652767,"brier":0.26892232,"rmse":0.01206378,"n_val":67},{"cfg_name":"tree_heavy","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.26969607,"rmse":0.007544,"n_val":67},{"cfg_name":"tree_stable","inner_split":1,"score":-1.37457143,"policy_score":-1.15009589,"brier":0.26799967,"rmse":0.01173789,"n_val":67},{"cfg_name":"tree_stable","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.25515209,"rmse":0.00741064,"n_val":67},{"cfg_name":"blend_conservative","inner_split":1,"score":-1.62627692,"policy_score":-1.40781148,"brier":0.25962661,"rmse":0.01187274,"n_val":67},{"cfg_name":"blend_conservative","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.25825335,"rmse":0.00730552,"n_val":67},{"selected_cfg":"tree_heavy","nested_score":-5e+17}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.37598488,"max_abs_z":0.86916598,"top_shift_features":[{"feature":"beta_proxy","abs_z":0.86916598},{"feature":"sigma_prank","abs_z":0.81408866},{"feature":"gap_mu","abs_z":0.78786288},{"feature":"sigma","abs_z":0.7659302},{"feature":"rs_log","abs_z":0.70916419}]},"performance_drift":{"mean_abs_z":0.37598488,"recent_median_net_bps":14.63778174,"recent_median_calmar":13.90576777}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.48994975,"global_ev":-0.00038076,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":75,"win_rate_raw":0.45333333,"ev_raw":-0.00113854,"win_rate_shrunk":0.47586651,"ev_shrunk":-0.00067221,"ev_half_a":-0.00123484,"ev_half_b":-0.00096732,"consistency":0.93311924,"prob_delta":-0.01314134,"ev_delta":-0.00062725},{"cluster":1,"n":77,"win_rate_raw":0.49350649,"ev_raw":-0.00043152,"win_rate_shrunk":0.49133995,"ev_shrunk":-0.0004006,"ev_half_a":-0.00076017,"ev_half_b":0.0001771,"consistency":0.19142021,"prob_delta":0.00026611,"ev_delta":-7.668e-05},{"cluster":2,"n":44,"win_rate_raw":0.43181818,"ev_raw":-0.00195463,"win_rate_shrunk":0.47435347,"ev_shrunk":-0.00080301,"ev_half_a":0.00174346,"ev_half_b":-0.00600492,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":3,"n":78,"win_rate_raw":0.44871795,"ev_raw":-0.00070132,"win_rate_shrunk":0.47370692,"ev_shrunk":-0.00050704,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":4,"n":94,"win_rate_raw":0.54255319,"ev_raw":0.00061141,"win_rate_shrunk":0.51305593,"ev_shrunk":5.506e-05,"ev_half_a":0.00017559,"ev_half_b":0.00112832,"consistency":0.76181701,"prob_delta":0.01760268,"ev_delta":4.194e-05},{"cluster":5,"n":30,"win_rate_raw":0.6,"ev_raw":0.00167698,"win_rate_shrunk":0.5119598,"ev_shrunk":3.079e-05,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}