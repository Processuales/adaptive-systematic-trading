{"fold_id":"spy_202411","symbol":"SPY","test_start_utc":"2024-11-01 00:00:00+00:00","test_end_utc":"2024-12-01 00:00:00+00:00","n_train":468,"n_test":10,"n_trades_test":2,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":0.00106251,"agg_ev_cut":0.00126251,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.64,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":0.00106251,"agg_ev_cut":0.00126251,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00753583,"b_sl":0.00562292,"beta_proxy":0.69228454,"cost_rt":0.0007259,"dist_to_hi":-0.0042869,"ema_fast_slope":0.00042485,"entry_overnight":0.0,"gap_mu":0.00036216,"gap_sd":0.00555206,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.62954347,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00046457,"qqq_pullback_z":0.54606618,"qqq_range_ratio":0.00477331,"qqq_sigma":0.00388509,"qqq_trend_score":1.80787929,"qqq_u_atr":0.00529169,"qqq_vol_z":-0.10630833,"range_ratio":0.00324701,"regime_agree":1.0,"ret_spread":-0.00018782,"rs_log":0.18847782,"same_bar_ambiguous":0.0,"sigma":0.00283083,"sigma_prank":0.328,"slip_half":0.00023295,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.25560919,"trend_score":2.03212975,"truncated_horizon":0.0,"u_atr":0.00372168,"u_atr_prank":0.349,"vol_z":-0.24838551},"mu":[11.78894472,0.00833348,0.00622767,0.67781931,0.00080378,-0.00753464,0.0004687,0.10552764,0.00029249,0.00617635,5.04020101,7.04020101,0.06203518,0.495723,0.0,0.00052755,0.42728194,0.00546147,0.00442644,2.03985438,0.00581347,-0.10968673,0.00372925,0.89949749,-0.00010249,0.21148154,0.00251256,0.00323977,0.38954774,0.00027189,8e-05,6.8718593,10.21934432,2.27968212,0.0,0.00412186,0.38767337,-0.20249497],"sd":[0.61446418,0.00354463,0.00264203,0.07366043,0.00023777,0.01128669,0.00107213,0.30723209,0.00075706,0.00186878,4.54109012,3.8896063,0.01115801,1.08296428,1.0,0.00149111,1.10549039,0.002957,0.00189805,1.6933682,0.00222571,0.97814964,0.00213709,0.30066885,0.00207784,0.05726181,0.05006246,0.00149159,0.29812624,0.00011888,1.0,3.65554058,2.58326829,1.44380126,1.0,0.00174316,0.27701983,0.91058064],"beta":[0.49497487,-0.02434779,-0.00765304,-0.00849484,0.02184269,-0.07325593,-0.02062516,0.06024914,0.02434779,-0.04036698,0.04697399,-0.03860115,0.05204659,0.01573184,-0.07299348,0.0,-0.07988022,0.08757422,-0.0884175,0.05906859,-0.02821622,0.07369787,0.0419927,0.06177138,-0.06594926,-0.00379244,-0.09667645,-0.02854706,0.0768589,-0.01928101,-0.07325593,0.0,0.04896716,-0.09690508,0.01864856,0.0,-0.01018841,-0.01704091,-0.03534753],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00753583,"b_sl":0.00562292,"beta_proxy":0.69228454,"cost_rt":0.0007259,"dist_to_hi":-0.0042869,"ema_fast_slope":0.00042485,"entry_overnight":0.0,"gap_mu":0.00036216,"gap_sd":0.00555206,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.62954347,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00046457,"qqq_pullback_z":0.54606618,"qqq_range_ratio":0.00477331,"qqq_sigma":0.00388509,"qqq_trend_score":1.80787929,"qqq_u_atr":0.00529169,"qqq_vol_z":-0.10630833,"range_ratio":0.00324701,"regime_agree":1.0,"ret_spread":-0.00018782,"rs_log":0.18847782,"same_bar_ambiguous":0.0,"sigma":0.00283083,"sigma_prank":0.328,"slip_half":0.00023295,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.25560919,"trend_score":2.03212975,"truncated_horizon":0.0,"u_atr":0.00372168,"u_atr_prank":0.349,"vol_z":-0.24838551},"mu":[11.78894472,0.00833348,0.00622767,0.67781931,0.00080378,-0.00753464,0.0004687,0.10552764,0.00029249,0.00617635,5.04020101,7.04020101,0.06203518,0.495723,0.0,0.00052755,0.42728194,0.00546147,0.00442644,2.03985438,0.00581347,-0.10968673,0.00372925,0.89949749,-0.00010249,0.21148154,0.00251256,0.00323977,0.38954774,0.00027189,8e-05,6.8718593,10.21934432,2.27968212,0.0,0.00412186,0.38767337,-0.20249497],"sd":[0.61446418,0.00354463,0.00264203,0.07366043,0.00023777,0.01128669,0.00107213,0.30723209,0.00075706,0.00186878,4.54109012,3.8896063,0.01115801,1.08296428,1.0,0.00149111,1.10549039,0.002957,0.00189805,1.6933682,0.00222571,0.97814964,0.00213709,0.30066885,0.00207784,0.05726181,0.05006246,0.00149159,0.29812624,0.00011888,1.0,3.65554058,2.58326829,1.44380126,1.0,0.00174316,0.27701983,0.91058064],"beta":[-0.00042336,-0.00049299,-0.00102745,-0.00076871,0.00055937,-0.00062207,-1.131e-05,0.00055535,0.00049299,-0.00017611,0.00010902,-0.0009243,0.00021061,0.00023604,-0.00129327,0.0,0.00016324,0.00092813,-0.00189304,0.00127383,-0.00022536,0.00162215,0.00086445,0.00170107,-0.00125408,0.00025971,-0.00172754,-0.00031339,0.00102642,-0.00055249,-0.00062207,0.0,0.00078675,-2.27e-06,0.00024136,0.0,-0.00024092,-0.00059861,-0.00111941],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202411_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202411_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202411_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202411_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.19235259,0.66848781,0.70332419,0.74340498,0.75136206,0.87651389],"y_thresholds":[0.5,0.5,0.6,0.6,0.66666667,0.66666667]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.0,0.1048725,0.11329463,0.21228834,0.21666667,0.35,0.44404565,0.56666667],"y_thresholds":[0.47826087,0.47826087,0.5,0.5,0.56,0.56,0.6,0.6]},"uncertainty_calibration":{"u_q25":0.00983188,"u_q75":0.01367138},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.28591288,"max_abs_z":0.83266296,"top_shift_features":[{"feature":"gap_mu","abs_z":0.83266296},{"feature":"rs_log","abs_z":0.75779881},{"feature":"qqq_u_atr","abs_z":0.65560038},{"feature":"qqq_range_ratio","abs_z":0.61713001},{"feature":"tp_to_cost","abs_z":0.56616508}]},"performance_drift":{"mean_abs_z":0.28591288,"recent_median_net_bps":20.40726474,"recent_median_calmar":16.73863128}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49497487,"global_ev":-0.00042336,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":73,"win_rate_raw":0.47945205,"ev_raw":-0.00112003,"win_rate_shrunk":0.48910355,"ev_shrunk":-0.00068687,"ev_half_a":-0.00071137,"ev_half_b":-0.00158879,"consistency":0.78064369,"prob_delta":-0.00458341,"ev_delta":-0.0005362},{"cluster":1,"n":76,"win_rate_raw":0.42105263,"ev_raw":-0.00129723,"win_rate_shrunk":0.46631115,"ev_shrunk":-0.00076221,"ev_half_a":-0.00038718,"ev_half_b":-0.00171725,"consistency":0.66748168,"prob_delta":-0.01913251,"ev_delta":-0.00050876},{"cluster":2,"n":33,"win_rate_raw":0.63636364,"ev_raw":0.00181194,"win_rate_shrunk":0.52547049,"ev_shrunk":5.877e-05,"ev_half_a":0.00069341,"ev_half_b":0.00300037,"consistency":0.34918997,"prob_delta":0.01064876,"ev_delta":2.052e-05},{"cluster":3,"n":45,"win_rate_raw":0.44444444,"ev_raw":-0.0018549,"win_rate_shrunk":0.48119385,"ev_shrunk":-0.00081378,"ev_half_a":0.00030399,"ev_half_b":-0.00374393,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":4,"n":96,"win_rate_raw":0.54166667,"ev_raw":0.00052361,"win_rate_shrunk":0.51572678,"ev_shrunk":-2.48e-06,"ev_half_a":0.0002062,"ev_half_b":0.00086862,"consistency":0.83439551,"prob_delta":0.0173153,"ev_delta":-2.07e-06},{"cluster":5,"n":75,"win_rate_raw":0.49333333,"ev_raw":-0.00019645,"win_rate_shrunk":0.49434351,"ev_shrunk":-0.00033609,"ev_half_a":-0.00057973,"ev_half_b":0.00048492,"consistency":0.18345962,"prob_delta":-0.00011583,"ev_delta":-6.166e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}