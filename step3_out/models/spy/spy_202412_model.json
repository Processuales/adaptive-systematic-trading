{"fold_id":"spy_202412","symbol":"SPY","test_start_utc":"2024-12-01 00:00:00+00:00","test_end_utc":"2025-01-01 00:00:00+00:00","n_train":467,"n_test":8,"n_trades_test":8,"policy_score_test":-7.82214196,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00256123,"agg_ev_cut":-0.00236123,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00256123,"agg_ev_cut":-0.00236123,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.0073728,"b_sl":0.00551231,"beta_proxy":0.69249068,"cost_rt":0.00072165,"dist_to_hi":-0.00406577,"ema_fast_slope":0.00042473,"entry_overnight":0.0,"gap_mu":0.00036216,"gap_sd":0.0053933,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63291644,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00046018,"qqq_pullback_z":0.54869424,"qqq_range_ratio":0.00463139,"qqq_sigma":0.00384408,"qqq_trend_score":1.87332995,"qqq_u_atr":0.00519897,"qqq_vol_z":-0.12139453,"range_ratio":0.00317031,"regime_agree":1.0,"ret_spread":-0.0001793,"rs_log":0.18767195,"same_bar_ambiguous":0.0,"sigma":0.00277614,"sigma_prank":0.324,"slip_half":0.00023083,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.09371831,"trend_score":2.03749729,"truncated_horizon":0.0,"u_atr":0.00366302,"u_atr_prank":0.33,"vol_z":-0.28159887},"mu":[11.7884131,0.00816268,0.00609995,0.67876302,0.00079352,-0.00734969,0.0004594,0.10579345,0.00026834,0.00608544,5.14105793,6.98488665,0.06146096,0.5013593,0.0,0.00052301,0.43218458,0.0053301,0.00435875,2.06132894,0.0057178,-0.13576671,0.00364543,0.89924433,-0.00011446,0.21073239,0.00251889,0.00316597,0.38188413,0.00026676,8e-05,6.8186398,10.14782599,2.29202488,0.0,0.00403722,0.38037783,-0.22099651],"sd":[0.61514615,0.00342403,0.00255092,0.07438474,0.00022448,0.01126567,0.00102904,0.30757308,0.00072665,0.00184715,4.52034326,3.89597393,0.01037127,1.07858571,1.0,0.00142881,1.09899401,0.00285179,0.0018449,1.69336583,0.002184,0.97003837,0.0020612,0.30100492,0.00206468,0.05770113,0.05012531,0.00141125,0.29442387,0.00011224,1.0,3.66305748,2.61545682,1.45214926,1.0,0.00168155,0.27442222,0.90477502],"beta":[0.49622166,-0.02237989,-0.01530752,-0.01810241,0.02343841,-0.0513171,-0.01707482,0.02718827,0.02237989,-0.03843635,0.03746133,-0.02821998,0.05012817,0.00280649,-0.05151911,0.0,-0.05371983,0.07427657,-0.04392518,0.05319132,-0.02634539,0.0431517,0.02341916,0.01313647,-0.064917,0.00362614,-0.07648605,-0.03017053,0.06859579,-0.02186914,-0.0513171,0.0,0.04949411,-0.0623333,0.01406275,0.0,-0.02375317,-0.00475629,-0.02897326],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.0073728,"b_sl":0.00551231,"beta_proxy":0.69249068,"cost_rt":0.00072165,"dist_to_hi":-0.00406577,"ema_fast_slope":0.00042473,"entry_overnight":0.0,"gap_mu":0.00036216,"gap_sd":0.0053933,"gap_tail":4.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63291644,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00046018,"qqq_pullback_z":0.54869424,"qqq_range_ratio":0.00463139,"qqq_sigma":0.00384408,"qqq_trend_score":1.87332995,"qqq_u_atr":0.00519897,"qqq_vol_z":-0.12139453,"range_ratio":0.00317031,"regime_agree":1.0,"ret_spread":-0.0001793,"rs_log":0.18767195,"same_bar_ambiguous":0.0,"sigma":0.00277614,"sigma_prank":0.324,"slip_half":0.00023083,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":10.09371831,"trend_score":2.03749729,"truncated_horizon":0.0,"u_atr":0.00366302,"u_atr_prank":0.33,"vol_z":-0.28159887},"mu":[11.7884131,0.00816268,0.00609995,0.67876302,0.00079352,-0.00734969,0.0004594,0.10579345,0.00026834,0.00608544,5.14105793,6.98488665,0.06146096,0.5013593,0.0,0.00052301,0.43218458,0.0053301,0.00435875,2.06132894,0.0057178,-0.13576671,0.00364543,0.89924433,-0.00011446,0.21073239,0.00251889,0.00316597,0.38188413,0.00026676,8e-05,6.8186398,10.14782599,2.29202488,0.0,0.00403722,0.38037783,-0.22099651],"sd":[0.61514615,0.00342403,0.00255092,0.07438474,0.00022448,0.01126567,0.00102904,0.30757308,0.00072665,0.00184715,4.52034326,3.89597393,0.01037127,1.07858571,1.0,0.00142881,1.09899401,0.00285179,0.0018449,1.69336583,0.002184,0.97003837,0.0020612,0.30100492,0.00206468,0.05770113,0.05012531,0.00141125,0.29442387,0.00011224,1.0,3.66305748,2.61545682,1.45214926,1.0,0.00168155,0.27442222,0.90477502],"beta":[-0.00045623,-0.00048794,-0.00090229,-0.00073227,0.00043399,-0.00036772,0.00014292,0.00040919,0.00048794,-0.00030664,-1.542e-05,-0.00062894,0.00026393,-9.98e-05,-0.00104771,0.0,3.037e-05,0.00089294,-0.00050452,0.00072417,-0.0001127,0.00084487,0.0004022,0.000122,-0.00123067,0.00034213,-0.00121885,-0.0003518,0.00107029,-0.00042912,-0.00036772,0.0,0.00065431,0.00056539,2.877e-05,0.0,-0.00038442,-0.00039474,-0.00081227],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202412_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202412_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202412_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202412_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.34201062,0.45628731,0.45815739,0.4808263,0.48257457,0.74105262,0.7440705,0.82468934],"y_thresholds":[0.26666667,0.26666667,0.4,0.4,0.55555556,0.55555556,0.6,0.6]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.07222222,0.51736568,0.52915332,0.65333333],"y_thresholds":[0.48484848,0.48484848,0.5,0.5]},"uncertainty_calibration":{"u_q25":0.01002894,"u_q75":0.01418069},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":25.81616538,"policy_score":26.02621355,"brier":0.25592532,"rmse":0.00905209,"n_val":67},{"cfg_name":"tree_heavy","inner_split":2,"score":-1e+18,"policy_score":-1e+18,"brier":0.3171512,"rmse":0.00798635,"n_val":67},{"cfg_name":"tree_stable","inner_split":1,"score":-1e+18,"policy_score":-1e+18,"brier":0.24821893,"rmse":0.00891472,"n_val":67},{"cfg_name":"tree_stable","inner_split":2,"score":1.34457051,"policy_score":1.58848649,"brier":0.30366741,"rmse":0.00808271,"n_val":67},{"cfg_name":"blend_conservative","inner_split":1,"score":-0.14074151,"policy_score":0.06142733,"brier":0.246131,"rmse":0.0087853,"n_val":67},{"cfg_name":"blend_conservative","inner_split":2,"score":-0.34536311,"policy_score":-0.11223566,"brier":0.2903647,"rmse":0.00767696,"n_val":67},{"selected_cfg":"blend_conservative","nested_score":-0.24305231}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.55592834,"max_abs_z":1.24039567,"top_shift_features":[{"feature":"tp_to_cost","abs_z":1.24039567},{"feature":"a_tp","abs_z":1.12681101},{"feature":"b_sl","abs_z":1.12551671},{"feature":"u_atr","abs_z":1.12040229},{"feature":"qqq_vol_z","abs_z":1.10988553}]},"performance_drift":{"mean_abs_z":0.55592834,"recent_median_net_bps":20.40726474,"recent_median_calmar":16.73863128}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49622166,"global_ev":-0.00045623,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":98,"win_rate_raw":0.56122449,"ev_raw":0.00066429,"win_rate_shrunk":0.52544312,"ev_shrunk":4.749e-05,"ev_half_a":0.00036741,"ev_half_b":0.0009493,"consistency":0.85452622,"prob_delta":0.0249705,"ev_delta":4.058e-05},{"cluster":1,"n":73,"win_rate_raw":0.49315068,"ev_raw":-0.00035925,"win_rate_shrunk":0.4950601,"ev_shrunk":-0.00041955,"ev_half_a":0.00012297,"ev_half_b":-0.0008034,"consistency":0.19210172,"prob_delta":-0.00022314,"ev_delta":-8.06e-05},{"cluster":2,"n":78,"win_rate_raw":0.46153846,"ev_raw":-0.00086989,"win_rate_shrunk":0.48255858,"ev_shrunk":-0.00061919,"ev_half_a":-0.00109154,"ev_half_b":-0.00045123,"consistency":0.83992442,"prob_delta":-0.01147595,"ev_delta":-0.00052007},{"cluster":3,"n":39,"win_rate_raw":0.41025641,"ev_raw":-0.00313063,"win_rate_shrunk":0.47513585,"ev_shrunk":-0.00111222,"ev_half_a":-0.00214936,"ev_half_b":-0.00374393,"consistency":0.58632228,"prob_delta":-0.01236308,"ev_delta":-0.00065212},{"cluster":4,"n":77,"win_rate_raw":0.42857143,"ev_raw":-0.00124395,"win_rate_shrunk":0.46977969,"ev_shrunk":-0.00076412,"ev_half_a":0.00110991,"ev_half_b":-0.00291781,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":5,"n":32,"win_rate_raw":0.65625,"ev_raw":0.0020541,"win_rate_shrunk":0.52991184,"ev_shrunk":7.226e-05,"ev_half_a":0.00069341,"ev_half_b":0.00359621,"consistency":0.21944069,"prob_delta":0.007393,"ev_delta":1.586e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}