{"fold_id":"spy_202501","symbol":"SPY","test_start_utc":"2025-01-01 00:00:00+00:00","test_end_utc":"2025-02-01 00:00:00+00:00","n_train":466,"n_test":12,"n_trades_test":8,"policy_score_test":4.78238708,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00256123,"agg_ev_cut":-0.00236123,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.7,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":-0.00256123,"agg_ev_cut":-0.00236123,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00732604,"b_sl":0.00547913,"beta_proxy":0.69814159,"cost_rt":0.00071934,"dist_to_hi":-0.00406577,"ema_fast_slope":0.00042473,"entry_overnight":0.0,"gap_mu":0.00036216,"gap_sd":0.00526473,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.6261705,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00046044,"qqq_pullback_z":0.54343811,"qqq_range_ratio":0.00466581,"qqq_sigma":0.0038271,"qqq_trend_score":1.88820392,"qqq_u_atr":0.0051604,"qqq_vol_z":-0.10722896,"range_ratio":0.00315696,"regime_agree":1.0,"ret_spread":-0.0001865,"rs_log":0.18611876,"same_bar_ambiguous":0.0,"sigma":0.00277144,"sigma_prank":0.326,"slip_half":0.00022967,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.9865876,"trend_score":2.05997157,"truncated_horizon":0.0,"u_atr":0.00364451,"u_atr_prank":0.336,"vol_z":-0.29215314},"mu":[11.7884131,0.00811362,0.00606315,0.680537,0.0007913,-0.00732615,0.00045785,0.10579345,0.00024212,0.00598123,5.26196474,6.95465995,0.06123426,0.50167643,0.0,0.00053083,0.43993287,0.0053217,0.00433903,2.0919705,0.00568568,-0.13028546,0.00363293,0.90176322,-0.00013154,0.20948227,0.00251889,0.00314376,0.38254912,0.00026565,8e-05,6.79345088,10.10334569,2.33438526,0.0,0.00401269,0.38485642,-0.22793542],"sd":[0.61514615,0.00344942,0.00256977,0.07489678,0.00022563,0.01125499,0.00102454,0.30757308,0.00068987,0.00183832,4.48809106,3.87954134,0.01024206,1.07423041,1.0,0.00142261,1.09493982,0.00286728,0.00186039,1.71735165,0.00220355,0.96667469,0.00207705,0.29763453,0.00205974,0.05856674,0.05012531,0.00142417,0.2947629,0.00011281,1.0,3.65208024,2.62266194,1.49641102,1.0,0.00169382,0.27345663,0.91232656],"beta":[0.49370277,-0.02098131,-0.02007507,-0.02271047,0.01994512,-0.04612042,-0.01349989,0.00490305,0.02098131,-0.03523999,0.05230816,-0.02776544,0.04312918,0.00344054,-0.04596245,0.0,-0.03608531,0.07742907,-0.03424723,0.04278081,-0.01983707,0.05261812,0.01040059,-0.0019183,-0.07288087,0.01731893,-0.08154165,-0.03065777,0.06942819,-0.01488605,-0.04612042,0.0,0.05132142,-0.05395642,0.00339044,0.0,-0.02802762,-0.0057278,-0.01202743],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00732604,"b_sl":0.00547913,"beta_proxy":0.69814159,"cost_rt":0.00071934,"dist_to_hi":-0.00406577,"ema_fast_slope":0.00042473,"entry_overnight":0.0,"gap_mu":0.00036216,"gap_sd":0.00526473,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.6261705,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00046044,"qqq_pullback_z":0.54343811,"qqq_range_ratio":0.00466581,"qqq_sigma":0.0038271,"qqq_trend_score":1.88820392,"qqq_u_atr":0.0051604,"qqq_vol_z":-0.10722896,"range_ratio":0.00315696,"regime_agree":1.0,"ret_spread":-0.0001865,"rs_log":0.18611876,"same_bar_ambiguous":0.0,"sigma":0.00277144,"sigma_prank":0.326,"slip_half":0.00022967,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.9865876,"trend_score":2.05997157,"truncated_horizon":0.0,"u_atr":0.00364451,"u_atr_prank":0.336,"vol_z":-0.29215314},"mu":[11.7884131,0.00811362,0.00606315,0.680537,0.0007913,-0.00732615,0.00045785,0.10579345,0.00024212,0.00598123,5.26196474,6.95465995,0.06123426,0.50167643,0.0,0.00053083,0.43993287,0.0053217,0.00433903,2.0919705,0.00568568,-0.13028546,0.00363293,0.90176322,-0.00013154,0.20948227,0.00251889,0.00314376,0.38254912,0.00026565,8e-05,6.79345088,10.10334569,2.33438526,0.0,0.00401269,0.38485642,-0.22793542],"sd":[0.61514615,0.00344942,0.00256977,0.07489678,0.00022563,0.01125499,0.00102454,0.30757308,0.00068987,0.00183832,4.48809106,3.87954134,0.01024206,1.07423041,1.0,0.00142261,1.09493982,0.00286728,0.00186039,1.71735165,0.00220355,0.96667469,0.00207705,0.29763453,0.00205974,0.05856674,0.05012531,0.00142417,0.2947629,0.00011281,1.0,3.65208024,2.62266194,1.49641102,1.0,0.00169382,0.27345663,0.91232656],"beta":[-0.00042112,-0.00044563,-0.00087491,-0.00070956,0.00040647,-0.00031341,0.00016756,0.00017961,0.00044563,-0.00021049,0.00012618,-0.00058721,0.00017256,-0.00012893,-0.00115901,0.0,0.00027618,0.00098133,-0.00034471,0.00068837,-3.547e-05,0.00076304,0.00034164,-0.00014802,-0.00133018,0.00049994,-0.00133649,-0.0003537,0.00108331,-0.0003968,-0.00031341,0.0,0.00067547,0.00065316,-8.9e-05,0.0,-0.0003713,-0.00045984,-0.00066147],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202501_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202501_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202501_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202501_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.34001447,0.48553203,0.48611617,0.66902328,0.6712251,0.77316893],"y_thresholds":[0.31818182,0.31818182,0.59459459,0.59459459,0.7,0.7]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.12297297,0.41395519,0.41692011,0.58636364,0.61],"y_thresholds":[0.40540541,0.40540541,0.62962963,0.62962963,0.8]},"uncertainty_calibration":{"u_q25":0.00975336,"u_q75":0.01479082},"nested_tuning_rows":[],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.33774287,"max_abs_z":1.21400039,"top_shift_features":[{"feature":"gap_mu","abs_z":1.21400039},{"feature":"sigma_prank","abs_z":1.14788655},{"feature":"rs_log","abs_z":1.05716227},{"feature":"u_atr_prank","abs_z":0.93673353},{"feature":"beta_proxy","abs_z":0.77393291}]},"performance_drift":{"mean_abs_z":0.33774287,"recent_median_net_bps":14.15209311,"recent_median_calmar":13.90576777}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49370277,"global_ev":-0.00042112,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":43,"win_rate_raw":0.39534884,"ev_raw":-0.00363012,"win_rate_shrunk":0.46775664,"ev_shrunk":-0.00126766,"ev_half_a":-0.00387239,"ev_half_b":-0.00325958,"consistency":0.84679645,"prob_delta":-0.02197109,"ev_delta":-0.00107345},{"cluster":1,"n":71,"win_rate_raw":0.49295775,"ev_raw":-0.00025153,"win_rate_shrunk":0.49342582,"ev_shrunk":-0.00035808,"ev_half_a":0.00046701,"ev_half_b":-0.00099059,"consistency":0.1588997,"prob_delta":-4.401e-05,"ev_delta":-5.69e-05},{"cluster":2,"n":74,"win_rate_raw":0.41891892,"ev_raw":-0.00105781,"win_rate_shrunk":0.46517697,"ev_shrunk":-0.00066398,"ev_half_a":0.00086828,"ev_half_b":-0.0025253,"consistency":0.03790168,"prob_delta":-0.00108118,"ev_delta":-2.517e-05},{"cluster":3,"n":108,"win_rate_raw":0.53703704,"ev_raw":0.00045264,"win_rate_shrunk":0.51422953,"ev_shrunk":-7.23e-06,"ev_half_a":0.0003068,"ev_half_b":0.00056931,"consistency":0.93437291,"prob_delta":0.01917965,"ev_delta":-6.76e-06},{"cluster":4,"n":69,"win_rate_raw":0.47826087,"ev_raw":-0.00062722,"win_rate_shrunk":0.48806525,"ev_shrunk":-0.00049636,"ev_half_a":-0.00131034,"ev_half_b":0.00026083,"consistency":0.15180136,"prob_delta":-0.00085578,"ev_delta":-7.535e-05},{"cluster":5,"n":32,"win_rate_raw":0.6875,"ev_raw":0.00248256,"win_rate_shrunk":0.53450219,"ev_shrunk":0.00019018,"ev_half_a":0.00012343,"ev_half_b":0.00515623,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}