{"fold_id":"spy_202502","symbol":"SPY","test_start_utc":"2025-02-01 00:00:00+00:00","test_end_utc":"2025-03-01 00:00:00+00:00","n_train":462,"n_test":7,"n_trades_test":4,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-5.083e-05,"agg_ev_cut":0.00014917,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.46,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.35,"ev_cut":-5.083e-05,"agg_ev_cut":0.00014917,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00723792,"b_sl":0.00540628,"beta_proxy":0.69876261,"cost_rt":0.0007189,"dist_to_hi":-0.00406577,"ema_fast_slope":0.00042497,"entry_overnight":0.0,"gap_mu":0.0003596,"gap_sd":0.00495313,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63291644,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00048853,"qqq_pullback_z":0.54909781,"qqq_range_ratio":0.00457296,"qqq_sigma":0.00381616,"qqq_trend_score":1.95233888,"qqq_u_atr":0.00512083,"qqq_vol_z":-0.10722896,"range_ratio":0.00312132,"regime_agree":1.0,"ret_spread":-0.0001865,"rs_log":0.18609066,"same_bar_ambiguous":0.0,"sigma":0.00272751,"sigma_prank":0.326,"slip_half":0.00022945,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.93592901,"trend_score":2.08455567,"truncated_horizon":0.0,"u_atr":0.00360177,"u_atr_prank":0.344,"vol_z":-0.29882617},"mu":[11.78625954,0.00808606,0.00604227,0.68092329,0.00079105,-0.00736679,0.00045866,0.10687023,0.00021999,0.0059256,5.3562341,6.95165394,0.06115776,0.50586255,0.0,0.00053501,0.44646856,0.00529599,0.00433245,2.13210917,0.00567512,-0.13868373,0.00360149,0.90330789,-0.00013276,0.20902337,0.00254453,0.00313542,0.38403053,0.00026552,8e-05,6.79389313,10.06698632,2.36187852,0.0,0.00399847,0.38668702,-0.23257102],"sd":[0.61789638,0.00346617,0.00258207,0.07518118,0.00022686,0.01129457,0.00102254,0.30894819,0.00066928,0.00184573,4.48069856,3.86017753,0.01028824,1.0680846,1.0,0.00142503,1.09482107,0.00287684,0.00187015,1.7352345,0.00221402,0.96851112,0.00205751,0.29553806,0.00206627,0.05949673,0.05037911,0.00143388,0.29556019,0.00011343,1.0,3.63832629,2.61979795,1.50538609,1.0,0.00170169,0.27319071,0.91314132],"beta":[0.49363868,-0.02386005,-0.02567039,-0.0267237,0.02189281,-0.04882461,-0.01482864,-0.0028075,0.02386005,-0.03420542,0.05856228,-0.03051406,0.04996504,0.00774527,-0.05944736,0.0,-0.00403783,0.0614042,-0.03404163,0.05068277,-0.02186846,0.05554754,0.00332122,0.01619652,-0.0670626,0.01655339,-0.08847531,-0.03050115,0.06248245,-0.02105303,-0.04882461,0.0,0.04033132,-0.063741,0.00295496,0.0,-0.02881075,-0.00120553,-0.01029288],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00723792,"b_sl":0.00540628,"beta_proxy":0.69876261,"cost_rt":0.0007189,"dist_to_hi":-0.00406577,"ema_fast_slope":0.00042497,"entry_overnight":0.0,"gap_mu":0.0003596,"gap_sd":0.00495313,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63291644,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00048853,"qqq_pullback_z":0.54909781,"qqq_range_ratio":0.00457296,"qqq_sigma":0.00381616,"qqq_trend_score":1.95233888,"qqq_u_atr":0.00512083,"qqq_vol_z":-0.10722896,"range_ratio":0.00312132,"regime_agree":1.0,"ret_spread":-0.0001865,"rs_log":0.18609066,"same_bar_ambiguous":0.0,"sigma":0.00272751,"sigma_prank":0.326,"slip_half":0.00022945,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.93592901,"trend_score":2.08455567,"truncated_horizon":0.0,"u_atr":0.00360177,"u_atr_prank":0.344,"vol_z":-0.29882617},"mu":[11.78625954,0.00808606,0.00604227,0.68092329,0.00079105,-0.00736679,0.00045866,0.10687023,0.00021999,0.0059256,5.3562341,6.95165394,0.06115776,0.50586255,0.0,0.00053501,0.44646856,0.00529599,0.00433245,2.13210917,0.00567512,-0.13868373,0.00360149,0.90330789,-0.00013276,0.20902337,0.00254453,0.00313542,0.38403053,0.00026552,8e-05,6.79389313,10.06698632,2.36187852,0.0,0.00399847,0.38668702,-0.23257102],"sd":[0.61789638,0.00346617,0.00258207,0.07518118,0.00022686,0.01129457,0.00102254,0.30894819,0.00066928,0.00184573,4.48069856,3.86017753,0.01028824,1.0680846,1.0,0.00142503,1.09482107,0.00287684,0.00187015,1.7352345,0.00221402,0.96851112,0.00205751,0.29553806,0.00206627,0.05949673,0.05037911,0.00143388,0.29556019,0.00011343,1.0,3.63832629,2.61979795,1.50538609,1.0,0.00170169,0.27319071,0.91314132],"beta":[-0.0004281,-0.00047119,-0.00090676,-0.00073689,0.00041365,-0.00032794,0.00015528,6.618e-05,0.00047119,-0.00015853,0.00019132,-0.00062867,0.0002101,-0.00011517,-0.00136129,0.0,0.00061577,0.00092262,-0.00037626,0.00079076,-5.178e-05,0.00065397,0.00028668,0.00012737,-0.00125002,0.00054243,-0.00140349,-0.00035187,0.00104713,-0.00038974,-0.00032794,0.0,0.00058237,0.00062182,-9.178e-05,0.0,-0.00038927,-0.00047139,-0.00070381],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202502_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202502_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202502_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202502_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.34659224,0.46311484,0.46792256,0.69991091,0.70128716,0.75575102],"y_thresholds":[0.33333333,0.33333333,0.59459459,0.59459459,0.75,0.75]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.12297297,0.44065289,0.46294548,0.54350379,0.54765835,0.56666667,0.59651652,0.675],"y_thresholds":[0.45238095,0.45238095,0.52631579,0.52631579,0.75,0.75,1.0,1.0]},"uncertainty_calibration":{"u_q25":0.00957904,"u_q75":0.01504755},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-1e+18,"policy_score":-1e+18,"brier":0.26905177,"rmse":0.00801858,"n_val":66},{"cfg_name":"tree_heavy","inner_split":2,"score":1.23365025,"policy_score":1.44938592,"brier":0.26849119,"rmse":0.00718364,"n_val":66},{"cfg_name":"tree_stable","inner_split":1,"score":-1e+18,"policy_score":-1e+18,"brier":0.28330276,"rmse":0.00773219,"n_val":66},{"cfg_name":"tree_stable","inner_split":2,"score":1.32849169,"policy_score":1.56689647,"brier":0.29866096,"rmse":0.00720453,"n_val":66},{"cfg_name":"blend_conservative","inner_split":1,"score":1.44156703,"policy_score":1.68500125,"brier":0.30407319,"rmse":0.00768966,"n_val":66},{"cfg_name":"blend_conservative","inner_split":2,"score":2.35160631,"policy_score":2.56463169,"brier":0.26472272,"rmse":0.00724167,"n_val":66},{"selected_cfg":"blend_conservative","nested_score":1.89658667}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":0.41022729,"max_abs_z":1.83371175,"top_shift_features":[{"feature":"intraday_tail_frac","abs_z":1.83371175},{"feature":"rs_log","abs_z":1.16579225},{"feature":"spread_half","abs_z":1.0},{"feature":"gap_mu","abs_z":0.89060199},{"feature":"trend_score","abs_z":0.70468823}]},"performance_drift":{"mean_abs_z":0.41022729,"recent_median_net_bps":7.64038609,"recent_median_calmar":4.17062393}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49363868,"global_ev":-0.0004281,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":40,"win_rate_raw":0.4,"ev_raw":-0.00330255,"win_rate_shrunk":0.47022901,"ev_shrunk":-0.00114671,"ev_half_a":-0.00216664,"ev_half_b":-0.00566176,"consistency":0.12621985,"prob_delta":-0.00295477,"ev_delta":-0.00014474},{"cluster":1,"n":30,"win_rate_raw":0.66666667,"ev_raw":0.00206108,"win_rate_shrunk":0.52824427,"ev_shrunk":6.974e-05,"ev_half_a":-0.00049341,"ev_half_b":0.00498049,"consistency":0.0,"prob_delta":0.0,"ev_delta":0.0},{"cluster":2,"n":69,"win_rate_raw":0.46376812,"ev_raw":-0.00063419,"win_rate_shrunk":0.48273355,"ev_shrunk":-0.00050334,"ev_half_a":-0.00015445,"ev_half_b":-0.00102556,"consistency":0.78222375,"prob_delta":-0.00853025,"ev_delta":-0.00039372},{"cluster":3,"n":77,"win_rate_raw":0.51948052,"ev_raw":-0.00011836,"win_rate_shrunk":0.5037393,"ev_shrunk":-0.00030703,"ev_half_a":-0.00074274,"ev_half_b":0.00063089,"consistency":0.1641478,"prob_delta":0.00165799,"ev_delta":-5.04e-05},{"cluster":4,"n":78,"win_rate_raw":0.43589744,"ev_raw":-0.00103387,"win_rate_shrunk":0.47089213,"ev_shrunk":-0.00066673,"ev_half_a":-0.00020359,"ev_half_b":-0.00186415,"consistency":0.58486019,"prob_delta":-0.01330355,"ev_delta":-0.00038995},{"cluster":5,"n":99,"win_rate_raw":0.52525253,"ev_raw":0.00035903,"win_rate_shrunk":0.50792987,"ev_shrunk":-7.227e-05,"ev_half_a":0.00040563,"ev_half_b":0.00032609,"consistency":0.98011505,"prob_delta":0.01400701,"ev_delta":-7.084e-05}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}