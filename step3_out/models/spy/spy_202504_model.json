{"fold_id":"spy_202504","symbol":"SPY","test_start_utc":"2025-04-01 00:00:00+00:00","test_end_utc":"2025-05-01 00:00:00+00:00","n_train":460,"n_test":6,"n_trades_test":0,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.62,"agg_p_cut":0.66,"safe_size":0.533,"aggressive_size":0.864,"ev_cut":0.00029172,"agg_ev_cut":0.00079172,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.58,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.2,"ev_cut":0.00029172,"agg_ev_cut":0.00049172,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00719519,"b_sl":0.00537555,"beta_proxy":0.70137819,"cost_rt":0.00071231,"dist_to_hi":-0.00394469,"ema_fast_slope":0.00044406,"entry_overnight":0.0,"gap_mu":0.00035724,"gap_sd":0.00478926,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64068928,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0004977,"qqq_pullback_z":0.54930128,"qqq_range_ratio":0.00452124,"qqq_sigma":0.00377037,"qqq_trend_score":1.95059434,"qqq_u_atr":0.00507085,"qqq_vol_z":-0.1123083,"range_ratio":0.00309537,"regime_agree":1.0,"ret_spread":-0.00018913,"rs_log":0.18468243,"same_bar_ambiguous":0.0,"sigma":0.00268317,"sigma_prank":0.324,"slip_half":0.00022615,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.72526086,"trend_score":2.06735087,"truncated_horizon":0.0,"u_atr":0.00358167,"u_atr_prank":0.34,"vol_z":-0.28081961},"mu":[11.78005115,0.00802612,0.00599687,0.68018505,0.00078811,-0.00744807,0.00046569,0.10997442,0.00018719,0.0058145,5.54219949,6.8797954,0.06094629,0.5281951,0.0,0.00053496,0.45522098,0.00526029,0.00426156,2.16349657,0.00560589,-0.12767159,0.0035945,0.90537084,-0.00013244,0.20702629,0.00255754,0.00309546,0.37867008,0.00026406,8e-05,6.72890026,10.01602775,2.3794725,0.0,0.00396763,0.38732481,-0.21861785],"sd":[0.62571575,0.00348552,0.00259644,0.07555672,0.00022728,0.01137156,0.00101592,0.31285788,0.00062151,0.00185196,4.44317739,3.83527522,0.01048075,1.08184584,1.0,0.00142366,1.10702781,0.00286355,0.00184909,1.78002685,0.00218554,0.96845985,0.00205389,0.29270203,0.00194783,0.06128677,0.05050746,0.00144452,0.29654648,0.00011364,1.0,3.61980324,2.61259422,1.54101966,1.0,0.0017111,0.27502938,0.91526579],"beta":[0.49616368,-0.03249684,-0.04961373,-0.04718631,0.03670076,-0.07124405,-0.02384581,-0.01340948,0.03249684,-0.01468198,0.11530685,-0.03353868,0.03553528,0.00570706,-0.06358126,0.0,0.02474514,0.06863404,-0.07829747,0.05840544,-0.01929676,0.13016703,0.01171237,0.06156942,-0.0574632,0.02879984,-0.14245287,-0.02686242,0.07072372,-0.0342583,-0.07124405,0.0,0.04604964,-0.08800744,-0.01224608,0.0,-0.04213863,0.01757338,-0.00887271],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00719519,"b_sl":0.00537555,"beta_proxy":0.70137819,"cost_rt":0.00071231,"dist_to_hi":-0.00394469,"ema_fast_slope":0.00044406,"entry_overnight":0.0,"gap_mu":0.00035724,"gap_sd":0.00478926,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.64068928,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0004977,"qqq_pullback_z":0.54930128,"qqq_range_ratio":0.00452124,"qqq_sigma":0.00377037,"qqq_trend_score":1.95059434,"qqq_u_atr":0.00507085,"qqq_vol_z":-0.1123083,"range_ratio":0.00309537,"regime_agree":1.0,"ret_spread":-0.00018913,"rs_log":0.18468243,"same_bar_ambiguous":0.0,"sigma":0.00268317,"sigma_prank":0.324,"slip_half":0.00022615,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.72526086,"trend_score":2.06735087,"truncated_horizon":0.0,"u_atr":0.00358167,"u_atr_prank":0.34,"vol_z":-0.28081961},"mu":[11.78005115,0.00802612,0.00599687,0.68018505,0.00078811,-0.00744807,0.00046569,0.10997442,0.00018719,0.0058145,5.54219949,6.8797954,0.06094629,0.5281951,0.0,0.00053496,0.45522098,0.00526029,0.00426156,2.16349657,0.00560589,-0.12767159,0.0035945,0.90537084,-0.00013244,0.20702629,0.00255754,0.00309546,0.37867008,0.00026406,8e-05,6.72890026,10.01602775,2.3794725,0.0,0.00396763,0.38732481,-0.21861785],"sd":[0.62571575,0.00348552,0.00259644,0.07555672,0.00022728,0.01137156,0.00101592,0.31285788,0.00062151,0.00185196,4.44317739,3.83527522,0.01048075,1.08184584,1.0,0.00142366,1.10702781,0.00286355,0.00184909,1.78002685,0.00218554,0.96845985,0.00205389,0.29270203,0.00194783,0.06128677,0.05050746,0.00144452,0.29654648,0.00011364,1.0,3.61980324,2.61259422,1.54101966,1.0,0.0017111,0.27502938,0.91526579],"beta":[-0.00045618,-0.00063595,-0.00138238,-0.00111584,0.00067609,-0.00056918,2.767e-05,-3.756e-05,0.00063595,1.9e-06,0.00095092,-0.00070684,0.00010942,-5.413e-05,-0.00154404,0.0,0.00114448,0.00101241,-0.00099263,0.00068968,-0.00011387,0.00119693,0.00034144,0.00085756,-0.00096221,0.00082303,-0.0022001,-0.000287,0.00148392,-0.00074776,-0.00056918,0.0,0.00063375,0.00075897,-0.00027768,0.0,-0.00057046,-0.00012085,-0.00073968],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202504_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202504_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202504_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202504_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.19822687,0.24518554,0.25144672,0.31436324,0.3255558,0.78909936,0.79574103,0.83512362,0.84715336,0.88409393],"y_thresholds":[0.33333333,0.33333333,0.4,0.4,0.43396226,0.43396226,0.6,0.6,1.0,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.08584906,0.43584906,0.45087536,0.48,0.51398159,0.99987],"y_thresholds":[0.40983607,0.40983607,0.75,0.75,1.0,1.0]},"uncertainty_calibration":{"u_q25":0.00860386,"u_q75":0.01515812},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-1e+18,"policy_score":-1e+18,"brier":0.25805159,"rmse":0.00765142,"n_val":66},{"cfg_name":"tree_heavy","inner_split":2,"score":17.32333448,"policy_score":17.52551271,"brier":0.24971471,"rmse":0.0074461,"n_val":66},{"cfg_name":"tree_stable","inner_split":1,"score":-1e+18,"policy_score":-1e+18,"brier":0.25104765,"rmse":0.00739773,"n_val":66},{"cfg_name":"tree_stable","inner_split":2,"score":7.1172999,"policy_score":7.32772839,"brier":0.26149991,"rmse":0.00715178,"n_val":66},{"cfg_name":"blend_conservative","inner_split":1,"score":-1e+18,"policy_score":-1e+18,"brier":0.2572923,"rmse":0.00723364,"n_val":66},{"cfg_name":"blend_conservative","inner_split":2,"score":2.41574736,"policy_score":2.63117156,"brier":0.26789992,"rmse":0.00724963,"n_val":66},{"selected_cfg":"tree_heavy","nested_score":-5e+17}],"drift":{"flag":false,"feature_drift":{"mean_abs_z":1.31189345,"max_abs_z":4.17614079,"top_shift_features":[{"feature":"sigma","abs_z":4.17614079},{"feature":"qqq_sigma","abs_z":3.45793676},{"feature":"u_atr","abs_z":3.04690339},{"feature":"b_sl","abs_z":2.99449915},{"feature":"a_tp","abs_z":2.96548033}]},"performance_drift":{"mean_abs_z":1.31189345,"recent_median_net_bps":2.93066992,"recent_median_calmar":1.75796793}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49616368,"global_ev":-0.00045618,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":30,"win_rate_raw":0.63333333,"ev_raw":0.00088451,"win_rate_shrunk":0.52359761,"ev_shrunk":-0.00018804,"ev_half_a":-0.00208469,"ev_half_b":0.00315508,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":1,"n":78,"win_rate_raw":0.43589744,"ev_raw":-0.00103387,"win_rate_shrunk":0.47242243,"ev_shrunk":-0.00068375,"ev_half_a":-0.00118358,"ev_half_b":-0.00080689,"consistency":0.90582639,"prob_delta":-0.02150545,"ev_delta":-0.00061936},{"cluster":2,"n":97,"win_rate_raw":0.54639175,"ev_raw":0.00059667,"win_rate_shrunk":0.51861586,"ev_shrunk":1.445e-05,"ev_half_a":7.402e-05,"ev_half_b":0.00087873,"consistency":0.79882328,"prob_delta":0.01793532,"ev_delta":1.154e-05},{"cluster":3,"n":65,"win_rate_raw":0.46153846,"ev_raw":-0.00065355,"win_rate_shrunk":0.48399806,"ev_shrunk":-0.00052553,"ev_half_a":-0.00040058,"ev_half_b":-0.00083329,"consistency":0.89182157,"prob_delta":-0.01084956,"ev_delta":-0.00046867},{"cluster":4,"n":81,"win_rate_raw":0.51851852,"ev_raw":-9.324e-05,"win_rate_shrunk":0.50517235,"ev_shrunk":-0.00030992,"ev_half_a":-0.00023009,"ev_half_b":3.383e-05,"consistency":0.2335048,"prob_delta":0.00210357,"ev_delta":-7.237e-05},{"cluster":5,"n":40,"win_rate_raw":0.4,"ev_raw":-0.00330255,"win_rate_shrunk":0.47212276,"ev_shrunk":-0.00116777,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}