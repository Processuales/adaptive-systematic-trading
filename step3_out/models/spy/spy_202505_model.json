{"fold_id":"spy_202505","symbol":"SPY","test_start_utc":"2025-05-01 00:00:00+00:00","test_end_utc":"2025-06-01 00:00:00+00:00","n_train":452,"n_test":13,"n_trades_test":1,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.64,"agg_p_cut":0.69,"safe_size":0.4797,"aggressive_size":0.76032,"ev_cut":0.00029172,"agg_ev_cut":0.00079172,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.58,"agg_p_cut":0.58,"safe_size":0.65,"aggressive_size":1.2,"ev_cut":0.00029172,"agg_ev_cut":0.00049172,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"tree_heavy","ridge_alpha_prob":6.0,"ridge_alpha_ret":8.0,"tree_weight_prob":0.75,"tree_weight_ret":0.8,"num_leaves":31,"learning_rate":0.05,"min_child_samples":28,"n_estimators":240},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00724271,"b_sl":0.00540628,"beta_proxy":0.70537758,"cost_rt":0.00071503,"dist_to_hi":-0.00403702,"ema_fast_slope":0.00044406,"entry_overnight":0.0,"gap_mu":0.00034704,"gap_sd":0.00476625,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63892552,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0004977,"qqq_pullback_z":0.54909781,"qqq_range_ratio":0.00448915,"qqq_sigma":0.00381616,"qqq_trend_score":1.95059434,"qqq_u_atr":0.00509312,"qqq_vol_z":-0.10538769,"range_ratio":0.00309537,"regime_agree":1.0,"ret_spread":-0.00020673,"rs_log":0.18305861,"same_bar_ambiguous":0.0,"sigma":0.00272736,"sigma_prank":0.332,"slip_half":0.00022752,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.91497201,"trend_score":2.06735087,"truncated_horizon":0.0,"u_atr":0.00360177,"u_atr_prank":0.356,"vol_z":-0.28159887},"mu":[11.78701299,0.00808658,0.00604247,0.68562868,0.00079054,-0.00758019,0.00046819,0.10649351,0.00015966,0.00579459,5.70909091,6.86233766,0.06127273,0.52321689,0.0,0.00053662,0.45416641,0.00529529,0.00428557,2.16782795,0.00563077,-0.11815896,0.0036144,0.90909091,-0.00013019,0.20628724,0.0025974,0.0031262,0.38986494,0.00026527,8e-05,6.71428571,10.06327234,2.3607391,0.0,0.00399836,0.3970961,-0.22601063],"sd":[0.61693643,0.00348594,0.00259636,0.07024213,0.00022777,0.01142475,0.0010191,0.30846821,0.00059341,0.00186136,4.45392522,3.87120703,0.01065716,1.07179617,1.0,0.00142819,1.10368755,0.00289745,0.0018596,1.76791264,0.0021949,0.96310733,0.00206752,0.28747979,0.0019697,0.06207128,0.05089849,0.00144461,0.2970233,0.00011388,1.0,3.66044899,2.60909591,1.51535475,1.0,0.00171053,0.27581118,0.91048599],"beta":[0.4987013,-0.03051903,-0.04520705,-0.04661924,0.03869181,-0.07570675,-0.02389829,-0.0114446,0.03051903,-0.01521399,0.15738565,-0.0264944,0.02855895,0.01049976,-0.06027135,0.0,0.01928996,0.06703744,-0.06469338,0.05512399,-0.02140544,0.12990907,-0.00044349,0.05291537,-0.0612108,0.02587621,-0.17487565,-0.02805863,0.06182878,-0.02623031,-0.07570675,0.0,0.05108587,-0.09449656,-0.00430234,0.0,-0.04939505,0.03377085,-0.00366195],"ridge_alpha":6.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00724271,"b_sl":0.00540628,"beta_proxy":0.70537758,"cost_rt":0.00071503,"dist_to_hi":-0.00403702,"ema_fast_slope":0.00044406,"entry_overnight":0.0,"gap_mu":0.00034704,"gap_sd":0.00476625,"gap_tail":5.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63892552,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.0004977,"qqq_pullback_z":0.54909781,"qqq_range_ratio":0.00448915,"qqq_sigma":0.00381616,"qqq_trend_score":1.95059434,"qqq_u_atr":0.00509312,"qqq_vol_z":-0.10538769,"range_ratio":0.00309537,"regime_agree":1.0,"ret_spread":-0.00020673,"rs_log":0.18305861,"same_bar_ambiguous":0.0,"sigma":0.00272736,"sigma_prank":0.332,"slip_half":0.00022752,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.91497201,"trend_score":2.06735087,"truncated_horizon":0.0,"u_atr":0.00360177,"u_atr_prank":0.356,"vol_z":-0.28159887},"mu":[11.78701299,0.00808658,0.00604247,0.68562868,0.00079054,-0.00758019,0.00046819,0.10649351,0.00015966,0.00579459,5.70909091,6.86233766,0.06127273,0.52321689,0.0,0.00053662,0.45416641,0.00529529,0.00428557,2.16782795,0.00563077,-0.11815896,0.0036144,0.90909091,-0.00013019,0.20628724,0.0025974,0.0031262,0.38986494,0.00026527,8e-05,6.71428571,10.06327234,2.3607391,0.0,0.00399836,0.3970961,-0.22601063],"sd":[0.61693643,0.00348594,0.00259636,0.07024213,0.00022777,0.01142475,0.0010191,0.30846821,0.00059341,0.00186136,4.45392522,3.87120703,0.01065716,1.07179617,1.0,0.00142819,1.10368755,0.00289745,0.0018596,1.76791264,0.0021949,0.96310733,0.00206752,0.28747979,0.0019697,0.06207128,0.05089849,0.00144461,0.2970233,0.00011388,1.0,3.66044899,2.60909591,1.51535475,1.0,0.00171053,0.27581118,0.91048599],"beta":[-0.00042669,-0.00064709,-0.00146069,-0.00122038,0.00073387,-0.00067059,-4.4e-07,5.709e-05,0.00064709,-9.011e-05,0.00140903,-0.00062455,0.00012507,3.043e-05,-0.00142205,0.0,0.00104076,0.00091427,-0.00089464,0.00076601,2.235e-05,0.00118562,0.00021309,0.00086078,-0.00107827,0.00075435,-0.0026012,-0.00031406,0.00157996,-0.0006957,-0.00067059,0.0,0.0005904,0.00066834,-0.00032347,0.0,-0.00072796,0.00016041,-0.00073514],"ridge_alpha":8.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202505_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202505_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202505_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202505_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.32160217,0.44414818,0.51073398,0.535777,0.55120627,0.81530006,0.81768303,0.8877339,0.8880372],"y_thresholds":[0.0,0.0,0.25,0.25,0.4,0.4,0.7,0.7,1.0]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.13,0.58063969,0.5888411,0.97685163,0.99613574,0.99987],"y_thresholds":[0.38,0.38,0.4,0.4,0.5,0.5]},"uncertainty_calibration":{"u_q25":0.0092229,"u_q75":0.01580796},"nested_tuning_rows":[],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.49927383,"max_abs_z":2.35333328,"top_shift_features":[{"feature":"beta_proxy","abs_z":2.35333328},{"feature":"gap_tail","abs_z":2.06880727},{"feature":"gap_sd","abs_z":2.03700727},{"feature":"gap_mu","abs_z":1.2988317},{"feature":"intraday_tail_frac","abs_z":1.15125202}]},"performance_drift":{"mean_abs_z":0.49927383,"recent_median_net_bps":-1.40739624,"recent_median_calmar":-0.65468808}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.4987013,"global_ev":-0.00042669,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":90,"win_rate_raw":0.53333333,"ev_raw":0.00048775,"win_rate_shrunk":0.5135436,"ev_shrunk":-3.479e-05,"ev_half_a":-0.00038121,"ev_half_b":0.00086016,"consistency":0.17241401,"prob_delta":0.00255902,"ev_delta":-6e-06},{"cluster":1,"n":78,"win_rate_raw":0.43589744,"ev_raw":-0.00103387,"win_rate_shrunk":0.47396038,"ev_shrunk":-0.00066588,"ev_half_a":-0.00140047,"ev_half_b":-0.00015723,"consistency":0.689192,"prob_delta":-0.01705124,"ev_delta":-0.00045892},{"cluster":2,"n":41,"win_rate_raw":0.3902439,"ev_raw":-0.00335326,"win_rate_shrunk":0.47108171,"ev_shrunk":-0.00117197,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":3,"n":81,"win_rate_raw":0.5308642,"ev_raw":-0.00013074,"win_rate_shrunk":0.51166247,"ev_shrunk":-0.00030743,"ev_half_a":-0.00056542,"ev_half_b":0.00023479,"consistency":0.19998687,"prob_delta":0.00259206,"ev_delta":-6.148e-05},{"cluster":4,"n":28,"win_rate_raw":0.64285714,"ev_raw":0.00106983,"win_rate_shrunk":0.52597403,"ev_shrunk":-0.00014357,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":5,"n":67,"win_rate_raw":0.49253731,"ev_raw":-0.00014051,"win_rate_shrunk":0.49649281,"ev_shrunk":-0.00032416,"ev_half_a":-0.00025217,"ev_half_b":-7.404e-05,"consistency":0.95546722,"prob_delta":-0.00211014,"ev_delta":-0.00030972}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}