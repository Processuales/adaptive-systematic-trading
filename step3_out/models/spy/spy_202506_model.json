{"fold_id":"spy_202506","symbol":"SPY","test_start_utc":"2025-06-01 00:00:00+00:00","test_end_utc":"2025-07-01 00:00:00+00:00","n_train":459,"n_test":14,"n_trades_test":3,"policy_score_test":-1e+18,"best_params":{"mix_struct_weight":0.55,"p_cut":0.56,"agg_p_cut":0.69,"safe_size":0.72324,"aggressive_size":0.65,"ev_cut":0.00021854,"agg_ev_cut":0.00071854,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"base_params_before_drift_guard":{"mix_struct_weight":0.55,"p_cut":0.5,"agg_p_cut":0.58,"safe_size":0.98,"aggressive_size":1.0,"ev_cut":0.00021854,"agg_ev_cut":0.00041854,"use_confidence_sizing":true,"safe_size_floor_mult":0.7,"safe_size_ceiling_mult":1.22,"agg_size_floor_mult":0.8,"agg_size_ceiling_mult":1.28,"max_aggressive_size":1.35},"model_config":{"name":"blend_conservative","ridge_alpha_prob":10.0,"ridge_alpha_ret":12.0,"tree_weight_prob":0.58,"tree_weight_ret":0.62,"num_leaves":15,"learning_rate":0.035,"min_child_samples":44,"n_estimators":280},"ridge_prob_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"y","medians":{"H":12.0,"a_tp":0.00724271,"b_sl":0.00540628,"beta_proxy":0.70617405,"cost_rt":0.0007105,"dist_to_hi":-0.00394469,"ema_fast_slope":0.00044406,"entry_overnight":0.0,"gap_mu":0.00035724,"gap_sd":0.00481784,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63892552,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00053331,"qqq_pullback_z":0.54930128,"qqq_range_ratio":0.00448915,"qqq_sigma":0.00384408,"qqq_trend_score":1.98913928,"qqq_u_atr":0.00512083,"qqq_vol_z":-0.10538769,"range_ratio":0.00309537,"regime_agree":1.0,"ret_spread":-0.00020673,"rs_log":0.18139159,"same_bar_ambiguous":0.0,"sigma":0.00272751,"sigma_prank":0.334,"slip_half":0.00022525,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.91497201,"trend_score":2.09610902,"truncated_horizon":0.0,"u_atr":0.00360177,"u_atr_prank":0.364,"vol_z":-0.29215314},"mu":[11.79539642,0.00808646,0.00604295,0.68814288,0.00078851,-0.00745791,0.00047487,0.10230179,0.00016567,0.00580821,5.91560102,6.84654731,0.06141944,0.53090864,0.0,0.00054933,0.46488243,0.00531591,0.0042965,2.1794278,0.00564222,-0.12595009,0.00364519,0.90792839,-0.00015456,0.20456723,0.00255754,0.00312242,0.39354987,0.00026425,8e-05,6.69565217,10.0837418,2.3675759,0.0,0.00399945,0.40032737,-0.23668947],"sd":[0.60608954,0.00347889,0.00259092,0.06662845,0.00022642,0.01135113,0.00100982,0.30304477,0.00058548,0.00184541,4.39722501,3.87885369,0.01052791,1.06426313,1.0,0.00141832,1.0977707,0.00289119,0.00184902,1.74582103,0.00218402,0.96062271,0.00209316,0.28912701,0.00201568,0.06197799,0.05050746,0.00143707,0.29726016,0.00011321,1.0,3.66317913,2.60051341,1.50627631,1.0,0.00170665,0.27742786,0.91418238],"beta":[0.49616368,-0.02026694,-0.041336,-0.0435873,0.0293402,-0.06060874,-0.03038441,-0.01930649,0.02026694,-0.03885038,0.08197971,-0.02297087,0.04155538,-0.00066667,-0.06080029,0.0,0.03422624,0.06020458,-0.0520782,0.04729903,-0.02345971,0.08899072,-0.00581323,0.04570894,-0.05351216,0.02996145,-0.12221988,-0.02724848,0.06798313,-0.02592094,-0.06060874,0.0,0.0525185,-0.06927321,0.01134832,0.0,-0.04808204,0.02087255,0.00174432],"ridge_alpha":10.0},"ridge_ret_model":{"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"],"target_col":"net_logret","medians":{"H":12.0,"a_tp":0.00724271,"b_sl":0.00540628,"beta_proxy":0.70617405,"cost_rt":0.0007105,"dist_to_hi":-0.00394469,"ema_fast_slope":0.00044406,"entry_overnight":0.0,"gap_mu":0.00035724,"gap_sd":0.00481784,"gap_tail":6.0,"hold_bars":6.0,"intraday_tail_frac":0.06,"pullback_z":0.63892552,"qqq_age_min":0.0,"qqq_ema_fast_slope":0.00053331,"qqq_pullback_z":0.54930128,"qqq_range_ratio":0.00448915,"qqq_sigma":0.00384408,"qqq_trend_score":1.98913928,"qqq_u_atr":0.00512083,"qqq_vol_z":-0.10538769,"range_ratio":0.00309537,"regime_agree":1.0,"ret_spread":-0.00020673,"rs_log":0.18139159,"same_bar_ambiguous":0.0,"sigma":0.00272751,"sigma_prank":0.334,"slip_half":0.00022525,"spread_half":8e-05,"touch_delay_bars":6.0,"tp_to_cost":9.91497201,"trend_score":2.09610902,"truncated_horizon":0.0,"u_atr":0.00360177,"u_atr_prank":0.364,"vol_z":-0.29215314},"mu":[11.79539642,0.00808646,0.00604295,0.68814288,0.00078851,-0.00745791,0.00047487,0.10230179,0.00016567,0.00580821,5.91560102,6.84654731,0.06141944,0.53090864,0.0,0.00054933,0.46488243,0.00531591,0.0042965,2.1794278,0.00564222,-0.12595009,0.00364519,0.90792839,-0.00015456,0.20456723,0.00255754,0.00312242,0.39354987,0.00026425,8e-05,6.69565217,10.0837418,2.3675759,0.0,0.00399945,0.40032737,-0.23668947],"sd":[0.60608954,0.00347889,0.00259092,0.06662845,0.00022642,0.01135113,0.00100982,0.30304477,0.00058548,0.00184541,4.39722501,3.87885369,0.01052791,1.06426313,1.0,0.00141832,1.0977707,0.00289119,0.00184902,1.74582103,0.00218402,0.96062271,0.00209316,0.28912701,0.00201568,0.06197799,0.05050746,0.00143707,0.29726016,0.00011321,1.0,3.66317913,2.60051341,1.50627631,1.0,0.00170665,0.27742786,0.91418238],"beta":[-0.00045791,-0.00045679,-0.00115311,-0.0009937,0.00071069,-0.00063772,-5.989e-05,3.921e-05,0.00045679,-0.00051419,0.00050292,-0.00054545,0.00031606,-6.377e-05,-0.00138723,0.0,0.00110932,0.0007848,-0.00063484,0.00075909,2.399e-05,0.00094381,0.00016812,0.00063965,-0.00089811,0.00067807,-0.0020736,-0.00028878,0.00130952,-0.00069005,-0.00063772,0.0,0.00058028,0.00053929,-0.00019375,0.0,-0.00066659,-3.84e-06,-0.00060186],"ridge_alpha":12.0},"lgb_paths":{"classifier":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202506_lgb_cls.txt","regressor":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202506_lgb_ret.txt","quantile_q10":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202506_lgb_q10.txt","quantile_q90":"C:\\dev\\Coding\\Trading Bot\\adaptive-systematic-trading\\step3_out\\models\\spy\\spy_202506_lgb_q90.txt"},"probability_calibration":{"method":"isotonic","x_thresholds":[0.3571639,0.4421222,0.45226492,0.4742583,0.48665977,0.51469088,0.51742469,0.64635802,0.64759072,0.65649972,0.65777931,0.72220257,0.72238794,0.83351531],"y_thresholds":[0.0,0.0,0.25,0.25,0.33333333,0.33333333,0.43478261,0.43478261,0.5,0.5,0.54545455,0.54545455,0.61538462,0.61538462]},"confidence_calibration":{"method":"isotonic","x_thresholds":[0.05909091,0.9283098],"y_thresholds":[0.42647059,0.42647059]},"uncertainty_calibration":{"u_q25":0.00942615,"u_q75":0.01869164},"nested_tuning_rows":[{"cfg_name":"tree_heavy","inner_split":1,"score":-1.06721999,"policy_score":-0.83060887,"brier":0.29520455,"rmse":0.00760385,"n_val":66},{"cfg_name":"tree_heavy","inner_split":2,"score":-0.43014469,"policy_score":-0.24312444,"brier":0.23098825,"rmse":0.00688953,"n_val":66},{"cfg_name":"tree_stable","inner_split":1,"score":-1.45783639,"policy_score":-1.17434077,"brier":0.35801316,"rmse":0.00749287,"n_val":66},{"cfg_name":"tree_stable","inner_split":2,"score":-0.38831014,"policy_score":-0.201757,"brier":0.23070246,"rmse":0.00676314,"n_val":66},{"cfg_name":"blend_conservative","inner_split":1,"score":2.15175847,"policy_score":2.37297298,"brier":0.27567954,"rmse":0.00722743,"n_val":66},{"cfg_name":"blend_conservative","inner_split":2,"score":31.46275825,"policy_score":31.64388987,"brier":0.22340439,"rmse":0.00678916,"n_val":66},{"selected_cfg":"blend_conservative","nested_score":16.80725836}],"drift":{"flag":true,"feature_drift":{"mean_abs_z":0.43815697,"max_abs_z":2.07458066,"top_shift_features":[{"feature":"gap_sd","abs_z":2.07458066},{"feature":"gap_tail","abs_z":1.98361948},{"feature":"beta_proxy","abs_z":1.32668987},{"feature":"rs_log","abs_z":1.25404719},{"feature":"gap_mu","abs_z":1.20781052}]},"performance_drift":{"mean_abs_z":0.43815697,"recent_median_net_bps":-12.91036602,"recent_median_calmar":-3.35106271}},"pattern_aid":{"enabled":true,"prob_strength":0.55,"ret_strength":0.65,"prob_max_abs_delta":0.04,"ret_max_abs_delta":0.0035,"selected_cols":["trend_score","pullback_z","sigma","u_atr","sigma_prank","u_atr_prank","gap_sd","intraday_tail_frac","range_ratio","ema_fast_slope","rs_log","ret_spread","beta_proxy","regime_agree","entry_overnight"],"n_clusters":6,"global_win_rate":0.49616368,"global_ev":-0.00045791,"min_cluster_samples":40,"prior_strength":120.0,"consistency_tol":0.004,"cluster_rows":[{"cluster":0,"n":94,"win_rate_raw":0.54255319,"ev_raw":0.00048584,"win_rate_shrunk":0.51654038,"ev_shrunk":-4.337e-05,"ev_half_a":-0.00021857,"ev_half_b":0.00078468,"consistency":0.18729666,"prob_delta":0.00381649,"ev_delta":-8.12e-06},{"cluster":1,"n":41,"win_rate_raw":0.3902439,"ev_raw":-0.00335326,"win_rate_shrunk":0.46919032,"ev_shrunk":-0.00119523,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":-0.0,"ev_delta":-0.0},{"cluster":2,"n":79,"win_rate_raw":0.51898734,"ev_raw":-0.00011167,"win_rate_shrunk":0.50522433,"ev_shrunk":-0.00032045,"ev_half_a":-0.00055857,"ev_half_b":0.00020894,"consistency":0.20203104,"prob_delta":0.00183053,"ev_delta":-6.474e-05},{"cluster":3,"n":70,"win_rate_raw":0.48571429,"ev_raw":-0.0002795,"win_rate_shrunk":0.4923139,"ev_shrunk":-0.00039218,"ev_half_a":-0.00093213,"ev_half_b":3.987e-05,"consistency":0.1892497,"prob_delta":-0.00072857,"ev_delta":-7.422e-05},{"cluster":4,"n":29,"win_rate_raw":0.62068966,"ev_raw":0.00075179,"win_rate_shrunk":0.52040028,"ev_shrunk":-0.00022246,"ev_half_a":0.0,"ev_half_b":0.0,"consistency":0.0,"prob_delta":0.0,"ev_delta":-0.0},{"cluster":5,"n":78,"win_rate_raw":0.43589744,"ev_raw":-0.00103387,"win_rate_shrunk":0.47242243,"ev_shrunk":-0.0006848,"ev_half_a":-0.00135302,"ev_half_b":0.00030655,"consistency":0.14627703,"prob_delta":-0.0034728,"ev_delta":-0.00010017}]},"feature_cols":["H","a_tp","b_sl","beta_proxy","cost_rt","dist_to_hi","ema_fast_slope","entry_overnight","gap_mu","gap_sd","gap_tail","hold_bars","intraday_tail_frac","pullback_z","qqq_age_min","qqq_ema_fast_slope","qqq_pullback_z","qqq_range_ratio","qqq_sigma","qqq_trend_score","qqq_u_atr","qqq_vol_z","range_ratio","regime_agree","ret_spread","rs_log","same_bar_ambiguous","sigma","sigma_prank","slip_half","spread_half","touch_delay_bars","tp_to_cost","trend_score","truncated_horizon","u_atr","u_atr_prank","vol_z"]}